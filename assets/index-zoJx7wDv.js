(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function Ws(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ae={},mn=[],mt=()=>{},_a=()=>!1,mr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Vs=e=>e.startsWith("onUpdate:"),Ie=Object.assign,Ks=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},D0=Object.prototype.hasOwnProperty,ie=(e,t)=>D0.call(e,t),G=Array.isArray,_n=e=>_r(e)==="[object Map]",xa=e=>_r(e)==="[object Set]",X=e=>typeof e=="function",be=e=>typeof e=="string",Wt=e=>typeof e=="symbol",de=e=>e!==null&&typeof e=="object",ya=e=>(de(e)||X(e))&&X(e.then)&&X(e.catch),wa=Object.prototype.toString,_r=e=>wa.call(e),S0=e=>_r(e).slice(8,-1),va=e=>_r(e)==="[object Object]",Js=e=>be(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Jn=Ws(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xr=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},F0=/-\w/g,Ut=xr(e=>e.replace(F0,t=>t.slice(1).toUpperCase())),I0=/\B([A-Z])/g,Vt=xr(e=>e.replace(I0,"-$1").toLowerCase()),ka=xr(e=>e.charAt(0).toUpperCase()+e.slice(1)),zr=xr(e=>e?`on${ka(e)}`:""),jt=(e,t)=>!Object.is(e,t),Lu=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ca=(e,t,n,u=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:u,value:n})},Zs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ki;const yr=()=>Ki||(Ki=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wr(e){if(G(e)){const t={};for(let n=0;n<e.length;n++){const u=e[n],s=be(u)?O0(u):wr(u);if(s)for(const r in s)t[r]=s[r]}return t}else if(be(e)||de(e))return e}const R0=/;(?![^(]*\))/g,T0=/:([^]+)/,M0=/\/\*[^]*?\*\//g;function O0(e){const t={};return e.replace(M0,"").split(R0).forEach(n=>{if(n){const u=n.split(T0);u.length>1&&(t[u[0].trim()]=u[1].trim())}}),t}function et(e){let t="";if(be(e))t=e;else if(G(e))for(let n=0;n<e.length;n++){const u=et(e[n]);u&&(t+=u+" ")}else if(de(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const P0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$0=Ws(P0);function Aa(e){return!!e||e===""}const Ea=e=>!!(e&&e.__v_isRef===!0),ye=e=>be(e)?e:e==null?"":G(e)||de(e)&&(e.toString===wa||!X(e.toString))?Ea(e)?ye(e.value):JSON.stringify(e,Da,2):String(e),Da=(e,t)=>Ea(t)?Da(e,t.value):_n(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[u,s],r)=>(n[Hr(u,r)+" =>"]=s,n),{})}:xa(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Hr(n))}:Wt(t)?Hr(t):de(t)&&!G(t)&&!va(t)?String(t):t,Hr=(e,t="")=>{var n;return Wt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Le;class L0{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Le,!t&&Le&&(this.index=(Le.scopes||(Le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Le;try{return Le=this,t()}finally{Le=n}}}on(){++this._on===1&&(this.prevScope=Le,Le=this)}off(){this._on>0&&--this._on===0&&(Le=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,u;for(n=0,u=this.effects.length;n<u;n++)this.effects[n].stop();for(this.effects.length=0,n=0,u=this.cleanups.length;n<u;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,u=this.scopes.length;n<u;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function B0(){return Le}let le;const Wr=new WeakSet;class Sa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Le&&Le.active&&Le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wr.has(this)&&(Wr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ia(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ji(this),Ra(this);const t=le,n=tt;le=this,tt=!0;try{return this.fn()}finally{Ta(this),le=t,tt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Qs(t);this.deps=this.depsTail=void 0,Ji(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gs(this)&&this.run()}get dirty(){return gs(this)}}let Fa=0,Zn,Gn;function Ia(e,t=!1){if(e.flags|=8,t){e.next=Gn,Gn=e;return}e.next=Zn,Zn=e}function Gs(){Fa++}function Xs(){if(--Fa>0)return;if(Gn){let t=Gn;for(Gn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Zn;){let t=Zn;for(Zn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(u){e||(e=u)}t=n}}if(e)throw e}function Ra(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ta(e){let t,n=e.depsTail,u=n;for(;u;){const s=u.prevDep;u.version===-1?(u===n&&(n=s),Qs(u),N0(u)):t=u,u.dep.activeLink=u.prevActiveLink,u.prevActiveLink=void 0,u=s}e.deps=t,e.depsTail=n}function gs(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ma(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ma(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===su)||(e.globalVersion=su,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!gs(e))))return;e.flags|=2;const t=e.dep,n=le,u=tt;le=e,tt=!0;try{Ra(e);const s=e.fn(e._value);(t.version===0||jt(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{le=n,tt=u,Ta(e),e.flags&=-3}}function Qs(e,t=!1){const{dep:n,prevSub:u,nextSub:s}=e;if(u&&(u.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=u,e.nextSub=void 0),n.subs===e&&(n.subs=u,!u&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Qs(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function N0(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let tt=!0;const Oa=[];function St(){Oa.push(tt),tt=!1}function Ft(){const e=Oa.pop();tt=e===void 0?!0:e}function Ji(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=le;le=void 0;try{t()}finally{le=n}}}let su=0;class q0{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ys{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!le||!tt||le===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==le)n=this.activeLink=new q0(le,this),le.deps?(n.prevDep=le.depsTail,le.depsTail.nextDep=n,le.depsTail=n):le.deps=le.depsTail=n,Pa(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const u=n.nextDep;u.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=u),n.prevDep=le.depsTail,n.nextDep=void 0,le.depsTail.nextDep=n,le.depsTail=n,le.deps===n&&(le.deps=u)}return n}trigger(t){this.version++,su++,this.notify(t)}notify(t){Gs();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Xs()}}}function Pa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let u=t.deps;u;u=u.nextDep)Pa(u)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ms=new WeakMap,tn=Symbol(""),_s=Symbol(""),iu=Symbol("");function Se(e,t,n){if(tt&&le){let u=ms.get(e);u||ms.set(e,u=new Map);let s=u.get(n);s||(u.set(n,s=new Ys),s.map=u,s.key=n),s.track()}}function Et(e,t,n,u,s,r){const i=ms.get(e);if(!i){su++;return}const o=a=>{a&&a.trigger()};if(Gs(),t==="clear")i.forEach(o);else{const a=G(e),c=a&&Js(n);if(a&&n==="length"){const l=Number(u);i.forEach((f,h)=>{(h==="length"||h===iu||!Wt(h)&&h>=l)&&o(f)})}else switch((n!==void 0||i.has(void 0))&&o(i.get(n)),c&&o(i.get(iu)),t){case"add":a?c&&o(i.get("length")):(o(i.get(tn)),_n(e)&&o(i.get(_s)));break;case"delete":a||(o(i.get(tn)),_n(e)&&o(i.get(_s)));break;case"set":_n(e)&&o(i.get(tn));break}}Xs()}function rn(e){const t=se(e);return t===e?t:(Se(t,"iterate",iu),Xe(e)?t:t.map(nt))}function vr(e){return Se(e=se(e),"iterate",iu),e}function Pt(e,t){return It(e)?nn(e)?kn(nt(t)):kn(t):nt(t)}const j0={__proto__:null,[Symbol.iterator](){return Vr(this,Symbol.iterator,e=>Pt(this,e))},concat(...e){return rn(this).concat(...e.map(t=>G(t)?rn(t):t))},entries(){return Vr(this,"entries",e=>(e[1]=Pt(this,e[1]),e))},every(e,t){return vt(this,"every",e,t,void 0,arguments)},filter(e,t){return vt(this,"filter",e,t,n=>n.map(u=>Pt(this,u)),arguments)},find(e,t){return vt(this,"find",e,t,n=>Pt(this,n),arguments)},findIndex(e,t){return vt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return vt(this,"findLast",e,t,n=>Pt(this,n),arguments)},findLastIndex(e,t){return vt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return vt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Kr(this,"includes",e)},indexOf(...e){return Kr(this,"indexOf",e)},join(e){return rn(this).join(e)},lastIndexOf(...e){return Kr(this,"lastIndexOf",e)},map(e,t){return vt(this,"map",e,t,void 0,arguments)},pop(){return On(this,"pop")},push(...e){return On(this,"push",e)},reduce(e,...t){return Zi(this,"reduce",e,t)},reduceRight(e,...t){return Zi(this,"reduceRight",e,t)},shift(){return On(this,"shift")},some(e,t){return vt(this,"some",e,t,void 0,arguments)},splice(...e){return On(this,"splice",e)},toReversed(){return rn(this).toReversed()},toSorted(e){return rn(this).toSorted(e)},toSpliced(...e){return rn(this).toSpliced(...e)},unshift(...e){return On(this,"unshift",e)},values(){return Vr(this,"values",e=>Pt(this,e))}};function Vr(e,t,n){const u=vr(e),s=u[t]();return u!==e&&!Xe(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=n(r.value)),r}),s}const U0=Array.prototype;function vt(e,t,n,u,s,r){const i=vr(e),o=i!==e&&!Xe(e),a=i[t];if(a!==U0[t]){const f=a.apply(e,r);return o?nt(f):f}let c=n;i!==e&&(o?c=function(f,h){return n.call(this,Pt(e,f),h,e)}:n.length>2&&(c=function(f,h){return n.call(this,f,h,e)}));const l=a.call(i,c,u);return o&&s?s(l):l}function Zi(e,t,n,u){const s=vr(e);let r=n;return s!==e&&(Xe(e)?n.length>3&&(r=function(i,o,a){return n.call(this,i,o,a,e)}):r=function(i,o,a){return n.call(this,i,Pt(e,o),a,e)}),s[t](r,...u)}function Kr(e,t,n){const u=se(e);Se(u,"iterate",iu);const s=u[t](...n);return(s===-1||s===!1)&&ui(n[0])?(n[0]=se(n[0]),u[t](...n)):s}function On(e,t,n=[]){St(),Gs();const u=se(e)[t].apply(e,n);return Xs(),Ft(),u}const z0=Ws("__proto__,__v_isRef,__isVue"),$a=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Wt));function H0(e){Wt(e)||(e=String(e));const t=se(this);return Se(t,"has",e),t.hasOwnProperty(e)}class La{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,u){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return u===(s?r?ef:ja:r?qa:Na).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(u)?t:void 0;const i=G(t);if(!s){let a;if(i&&(a=j0[n]))return a;if(n==="hasOwnProperty")return H0}const o=Reflect.get(t,n,Fe(t)?t:u);if((Wt(n)?$a.has(n):z0(n))||(s||Se(t,"get",n),r))return o;if(Fe(o)){const a=i&&Js(n)?o:o.value;return s&&de(a)?ys(a):a}return de(o)?s?ys(o):ti(o):o}}class Ba extends La{constructor(t=!1){super(!1,t)}set(t,n,u,s){let r=t[n];const i=G(t)&&Js(n);if(!this._isShallow){const c=It(r);if(!Xe(u)&&!It(u)&&(r=se(r),u=se(u)),!i&&Fe(r)&&!Fe(u))return c||(r.value=u),!0}const o=i?Number(n)<t.length:ie(t,n),a=Reflect.set(t,n,u,Fe(t)?t:s);return t===se(s)&&(o?jt(u,r)&&Et(t,"set",n,u):Et(t,"add",n,u)),a}deleteProperty(t,n){const u=ie(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&u&&Et(t,"delete",n,void 0),s}has(t,n){const u=Reflect.has(t,n);return(!Wt(n)||!$a.has(n))&&Se(t,"has",n),u}ownKeys(t){return Se(t,"iterate",G(t)?"length":tn),Reflect.ownKeys(t)}}class W0 extends La{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const V0=new Ba,K0=new W0,J0=new Ba(!0);const xs=e=>e,Au=e=>Reflect.getPrototypeOf(e);function Z0(e,t,n){return function(...u){const s=this.__v_raw,r=se(s),i=_n(r),o=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,c=s[e](...u),l=n?xs:t?kn:nt;return!t&&Se(r,"iterate",a?_s:tn),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:o?[l(f[0]),l(f[1])]:l(f),done:h}},[Symbol.iterator](){return this}}}}function Eu(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function G0(e,t){const n={get(s){const r=this.__v_raw,i=se(r),o=se(s);e||(jt(s,o)&&Se(i,"get",s),Se(i,"get",o));const{has:a}=Au(i),c=t?xs:e?kn:nt;if(a.call(i,s))return c(r.get(s));if(a.call(i,o))return c(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!e&&Se(se(s),"iterate",tn),s.size},has(s){const r=this.__v_raw,i=se(r),o=se(s);return e||(jt(s,o)&&Se(i,"has",s),Se(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=se(o),c=t?xs:e?kn:nt;return!e&&Se(a,"iterate",tn),o.forEach((l,f)=>s.call(r,c(l),c(f),i))}};return Ie(n,e?{add:Eu("add"),set:Eu("set"),delete:Eu("delete"),clear:Eu("clear")}:{add(s){!t&&!Xe(s)&&!It(s)&&(s=se(s));const r=se(this);return Au(r).has.call(r,s)||(r.add(s),Et(r,"add",s,s)),this},set(s,r){!t&&!Xe(r)&&!It(r)&&(r=se(r));const i=se(this),{has:o,get:a}=Au(i);let c=o.call(i,s);c||(s=se(s),c=o.call(i,s));const l=a.call(i,s);return i.set(s,r),c?jt(r,l)&&Et(i,"set",s,r):Et(i,"add",s,r),this},delete(s){const r=se(this),{has:i,get:o}=Au(r);let a=i.call(r,s);a||(s=se(s),a=i.call(r,s)),o&&o.call(r,s);const c=r.delete(s);return a&&Et(r,"delete",s,void 0),c},clear(){const s=se(this),r=s.size!==0,i=s.clear();return r&&Et(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Z0(s,e,t)}),n}function ei(e,t){const n=G0(e,t);return(u,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?u:Reflect.get(ie(n,s)&&s in u?n:u,s,r)}const X0={get:ei(!1,!1)},Q0={get:ei(!1,!0)},Y0={get:ei(!0,!1)};const Na=new WeakMap,qa=new WeakMap,ja=new WeakMap,ef=new WeakMap;function tf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nf(e){return e.__v_skip||!Object.isExtensible(e)?0:tf(S0(e))}function ti(e){return It(e)?e:ni(e,!1,V0,X0,Na)}function uf(e){return ni(e,!1,J0,Q0,qa)}function ys(e){return ni(e,!0,K0,Y0,ja)}function ni(e,t,n,u,s){if(!de(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=nf(e);if(r===0)return e;const i=s.get(e);if(i)return i;const o=new Proxy(e,r===2?u:n);return s.set(e,o),o}function nn(e){return It(e)?nn(e.__v_raw):!!(e&&e.__v_isReactive)}function It(e){return!!(e&&e.__v_isReadonly)}function Xe(e){return!!(e&&e.__v_isShallow)}function ui(e){return e?!!e.__v_raw:!1}function se(e){const t=e&&e.__v_raw;return t?se(t):e}function rf(e){return!ie(e,"__v_skip")&&Object.isExtensible(e)&&Ca(e,"__v_skip",!0),e}const nt=e=>de(e)?ti(e):e,kn=e=>de(e)?ys(e):e;function Fe(e){return e?e.__v_isRef===!0:!1}function pe(e){return sf(e,!1)}function sf(e,t){return Fe(e)?e:new of(e,t)}class of{constructor(t,n){this.dep=new Ys,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:se(t),this._value=n?t:nt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,u=this.__v_isShallow||Xe(t)||It(t);t=u?t:se(t),jt(t,n)&&(this._rawValue=t,this._value=u?t:nt(t),this.dep.trigger())}}function af(e){return Fe(e)?e.value:e}const cf={get:(e,t,n)=>t==="__v_raw"?e:af(Reflect.get(e,t,n)),set:(e,t,n,u)=>{const s=e[t];return Fe(s)&&!Fe(n)?(s.value=n,!0):Reflect.set(e,t,n,u)}};function Ua(e){return nn(e)?e:new Proxy(e,cf)}class lf{constructor(t,n,u){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ys(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=su-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=u}notify(){if(this.flags|=16,!(this.flags&8)&&le!==this)return Ia(this,!0),!0}get value(){const t=this.dep.track();return Ma(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ff(e,t,n=!1){let u,s;return X(e)?u=e:(u=e.get,s=e.set),new lf(u,s,n)}const Du={},Qu=new WeakMap;let Gt;function df(e,t=!1,n=Gt){if(n){let u=Qu.get(n);u||Qu.set(n,u=[]),u.push(e)}}function hf(e,t,n=ae){const{immediate:u,deep:s,once:r,scheduler:i,augmentJob:o,call:a}=n,c=y=>s?y:Xe(y)||s===!1||s===0?Dt(y,1):Dt(y);let l,f,h,d,p=!1,b=!1;if(Fe(e)?(f=()=>e.value,p=Xe(e)):nn(e)?(f=()=>c(e),p=!0):G(e)?(b=!0,p=e.some(y=>nn(y)||Xe(y)),f=()=>e.map(y=>{if(Fe(y))return y.value;if(nn(y))return c(y);if(X(y))return a?a(y,2):y()})):X(e)?t?f=a?()=>a(e,2):e:f=()=>{if(h){St();try{h()}finally{Ft()}}const y=Gt;Gt=l;try{return a?a(e,3,[d]):e(d)}finally{Gt=y}}:f=mt,t&&s){const y=f,E=s===!0?1/0:s;f=()=>Dt(y(),E)}const x=B0(),v=()=>{l.stop(),x&&x.active&&Ks(x.effects,l)};if(r&&t){const y=t;t=(...E)=>{y(...E),v()}}let m=b?new Array(e.length).fill(Du):Du;const k=y=>{if(!(!(l.flags&1)||!l.dirty&&!y))if(t){const E=l.run();if(s||p||(b?E.some((C,D)=>jt(C,m[D])):jt(E,m))){h&&h();const C=Gt;Gt=l;try{const D=[E,m===Du?void 0:b&&m[0]===Du?[]:m,d];m=E,a?a(t,3,D):t(...D)}finally{Gt=C}}}else l.run()};return o&&o(k),l=new Sa(f),l.scheduler=i?()=>i(k,!1):k,d=y=>df(y,!1,l),h=l.onStop=()=>{const y=Qu.get(l);if(y){if(a)a(y,4);else for(const E of y)E();Qu.delete(l)}},t?u?k(!0):m=l.run():i?i(k.bind(null,!0),!0):l.run(),v.pause=l.pause.bind(l),v.resume=l.resume.bind(l),v.stop=v,v}function Dt(e,t=1/0,n){if(t<=0||!de(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Fe(e))Dt(e.value,t,n);else if(G(e))for(let u=0;u<e.length;u++)Dt(e[u],t,n);else if(xa(e)||_n(e))e.forEach(u=>{Dt(u,t,n)});else if(va(e)){for(const u in e)Dt(e[u],t,n);for(const u of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,u)&&Dt(e[u],t,n)}return e}function bu(e,t,n,u){try{return u?e(...u):e()}catch(s){kr(s,t,n)}}function xt(e,t,n,u){if(X(e)){const s=bu(e,t,n,u);return s&&ya(s)&&s.catch(r=>{kr(r,t,n)}),s}if(G(e)){const s=[];for(let r=0;r<e.length;r++)s.push(xt(e[r],t,n,u));return s}}function kr(e,t,n,u=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||ae;if(t){let o=t.parent;const a=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const l=o.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](e,a,c)===!1)return}o=o.parent}if(r){St(),bu(r,null,10,[e,a,c]),Ft();return}}pf(e,n,s,u,i)}function pf(e,t,n,u=!0,s=!1){if(s)throw e;console.error(e)}const Me=[];let ft=-1;const xn=[];let $t=null,ln=0;const za=Promise.resolve();let Yu=null;function Ha(e){const t=Yu||za;return e?t.then(this?e.bind(this):e):t}function bf(e){let t=ft+1,n=Me.length;for(;t<n;){const u=t+n>>>1,s=Me[u],r=ou(s);r<e||r===e&&s.flags&2?t=u+1:n=u}return t}function ri(e){if(!(e.flags&1)){const t=ou(e),n=Me[Me.length-1];!n||!(e.flags&2)&&t>=ou(n)?Me.push(e):Me.splice(bf(t),0,e),e.flags|=1,Wa()}}function Wa(){Yu||(Yu=za.then(Ka))}function gf(e){G(e)?xn.push(...e):$t&&e.id===-1?$t.splice(ln+1,0,e):e.flags&1||(xn.push(e),e.flags|=1),Wa()}function Gi(e,t,n=ft+1){for(;n<Me.length;n++){const u=Me[n];if(u&&u.flags&2){if(e&&u.id!==e.uid)continue;Me.splice(n,1),n--,u.flags&4&&(u.flags&=-2),u(),u.flags&4||(u.flags&=-2)}}}function Va(e){if(xn.length){const t=[...new Set(xn)].sort((n,u)=>ou(n)-ou(u));if(xn.length=0,$t){$t.push(...t);return}for($t=t,ln=0;ln<$t.length;ln++){const n=$t[ln];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}$t=null,ln=0}}const ou=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ka(e){try{for(ft=0;ft<Me.length;ft++){const t=Me[ft];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),bu(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ft<Me.length;ft++){const t=Me[ft];t&&(t.flags&=-2)}ft=-1,Me.length=0,Va(),Yu=null,(Me.length||xn.length)&&Ka()}}let Ze=null,Ja=null;function er(e){const t=Ze;return Ze=e,Ja=e&&e.type.__scopeId||null,t}function mf(e,t=Ze,n){if(!t||e._n)return e;const u=(...s)=>{u._d&&io(-1);const r=er(t);let i;try{i=e(...s)}finally{er(r),u._d&&io(1)}return i};return u._n=!0,u._c=!0,u._d=!0,u}function yn(e,t){if(Ze===null)return e;const n=Dr(Ze),u=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,i,o,a=ae]=t[s];r&&(X(r)&&(r={mounted:r,updated:r}),r.deep&&Dt(i),u.push({dir:r,instance:n,value:i,oldValue:void 0,arg:o,modifiers:a}))}return e}function Jt(e,t,n,u){const s=e.dirs,r=t&&t.dirs;for(let i=0;i<s.length;i++){const o=s[i];r&&(o.oldValue=r[i].value);let a=o.dir[u];a&&(St(),xt(a,n,8,[e.el,o,e,t]),Ft())}}const _f=Symbol("_vte"),xf=e=>e.__isTeleport,yf=Symbol("_leaveCb");function si(e,t){e.shapeFlag&6&&e.component?(e.transition=t,si(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Dn(e,t){return X(e)?Ie({name:e.name},t,{setup:e}):e}function Za(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const tr=new WeakMap;function Xn(e,t,n,u,s=!1){if(G(e)){e.forEach((p,b)=>Xn(p,t&&(G(t)?t[b]:t),n,u,s));return}if(Qn(u)&&!s){u.shapeFlag&512&&u.type.__asyncResolved&&u.component.subTree.component&&Xn(e,t,n,u.component.subTree);return}const r=u.shapeFlag&4?Dr(u.component):u.el,i=s?null:r,{i:o,r:a}=e,c=t&&t.r,l=o.refs===ae?o.refs={}:o.refs,f=o.setupState,h=se(f),d=f===ae?_a:p=>ie(h,p);if(c!=null&&c!==a){if(Xi(t),be(c))l[c]=null,d(c)&&(f[c]=null);else if(Fe(c)){c.value=null;const p=t;p.k&&(l[p.k]=null)}}if(X(a))bu(a,o,12,[i,l]);else{const p=be(a),b=Fe(a);if(p||b){const x=()=>{if(e.f){const v=p?d(a)?f[a]:l[a]:a.value;if(s)G(v)&&Ks(v,r);else if(G(v))v.includes(r)||v.push(r);else if(p)l[a]=[r],d(a)&&(f[a]=l[a]);else{const m=[r];a.value=m,e.k&&(l[e.k]=m)}}else p?(l[a]=i,d(a)&&(f[a]=i)):b&&(a.value=i,e.k&&(l[e.k]=i))};if(i){const v=()=>{x(),tr.delete(e)};v.id=-1,tr.set(e,v),He(v,n)}else Xi(e),x()}}}function Xi(e){const t=tr.get(e);t&&(t.flags|=8,tr.delete(e))}yr().requestIdleCallback;yr().cancelIdleCallback;const Qn=e=>!!e.type.__asyncLoader,Ga=e=>e.type.__isKeepAlive;function wf(e,t){Xa(e,"a",t)}function vf(e,t){Xa(e,"da",t)}function Xa(e,t,n=Oe){const u=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Cr(t,u,n),n){let s=n.parent;for(;s&&s.parent;)Ga(s.parent.vnode)&&kf(u,t,n,s),s=s.parent}}function kf(e,t,n,u){const s=Cr(t,e,u,!0);oi(()=>{Ks(u[t],s)},n)}function Cr(e,t,n=Oe,u=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{St();const o=gu(n),a=xt(t,n,e,i);return o(),Ft(),a});return u?s.unshift(r):s.push(r),r}}const Rt=e=>(t,n=Oe)=>{(!cu||e==="sp")&&Cr(e,(...u)=>t(...u),n)},Cf=Rt("bm"),ii=Rt("m"),Af=Rt("bu"),Ef=Rt("u"),Df=Rt("bum"),oi=Rt("um"),Sf=Rt("sp"),Ff=Rt("rtg"),If=Rt("rtc");function Rf(e,t=Oe){Cr("ec",e,t)}const Tf=Symbol.for("v-ndc");function ws(e,t,n,u){let s;const r=n,i=G(e);if(i||be(e)){const o=i&&nn(e);let a=!1,c=!1;o&&(a=!Xe(e),c=It(e),e=vr(e)),s=new Array(e.length);for(let l=0,f=e.length;l<f;l++)s[l]=t(a?c?kn(nt(e[l])):nt(e[l]):e[l],l,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,r)}else if(de(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,r));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=t(e[l],l,a,r)}}else s=[];return s}const vs=e=>e?_c(e)?Dr(e):vs(e.parent):null,Yn=Ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vs(e.parent),$root:e=>vs(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ya(e),$forceUpdate:e=>e.f||(e.f=()=>{ri(e.update)}),$nextTick:e=>e.n||(e.n=Ha.bind(e.proxy)),$watch:e=>Hf.bind(e)}),Jr=(e,t)=>e!==ae&&!e.__isScriptSetup&&ie(e,t),Mf={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:u,data:s,props:r,accessCache:i,type:o,appContext:a}=e;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return u[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Jr(u,t))return i[t]=1,u[t];if(s!==ae&&ie(s,t))return i[t]=2,s[t];if(ie(r,t))return i[t]=3,r[t];if(n!==ae&&ie(n,t))return i[t]=4,n[t];ks&&(i[t]=0)}}const c=Yn[t];let l,f;if(c)return t==="$attrs"&&Se(e.attrs,"get",""),c(e);if((l=o.__cssModules)&&(l=l[t]))return l;if(n!==ae&&ie(n,t))return i[t]=4,n[t];if(f=a.config.globalProperties,ie(f,t))return f[t]},set({_:e},t,n){const{data:u,setupState:s,ctx:r}=e;return Jr(s,t)?(s[t]=n,!0):u!==ae&&ie(u,t)?(u[t]=n,!0):ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:u,appContext:s,props:r,type:i}},o){let a;return!!(n[o]||e!==ae&&o[0]!=="$"&&ie(e,o)||Jr(t,o)||ie(r,o)||ie(u,o)||ie(Yn,o)||ie(s.config.globalProperties,o)||(a=i.__cssModules)&&a[o])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ie(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Qi(e){return G(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ks=!0;function Of(e){const t=Ya(e),n=e.proxy,u=e.ctx;ks=!1,t.beforeCreate&&Yi(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:i,watch:o,provide:a,inject:c,created:l,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:b,deactivated:x,beforeDestroy:v,beforeUnmount:m,destroyed:k,unmounted:y,render:E,renderTracked:C,renderTriggered:D,errorCaptured:O,serverPrefetch:$,expose:L,inheritAttrs:U,components:W,directives:ee,filters:Y}=t;if(c&&Pf(c,u,null),i)for(const re in i){const ue=i[re];X(ue)&&(u[re]=ue.bind(n))}if(s){const re=s.call(n,n);de(re)&&(e.data=ti(re))}if(ks=!0,r)for(const re in r){const ue=r[re],rt=X(ue)?ue.bind(n,n):X(ue.get)?ue.get.bind(n,n):mt,Tt=!X(ue)&&X(ue.set)?ue.set.bind(n):mt,Kt=_t({get:rt,set:Tt});Object.defineProperty(u,re,{enumerable:!0,configurable:!0,get:()=>Kt.value,set:st=>Kt.value=st})}if(o)for(const re in o)Qa(o[re],u,n,re);if(a){const re=X(a)?a.call(n):a;Reflect.ownKeys(re).forEach(ue=>{jf(ue,re[ue])})}l&&Yi(l,e,"c");function te(re,ue){G(ue)?ue.forEach(rt=>re(rt.bind(n))):ue&&re(ue.bind(n))}if(te(Cf,f),te(ii,h),te(Af,d),te(Ef,p),te(wf,b),te(vf,x),te(Rf,O),te(If,C),te(Ff,D),te(Df,m),te(oi,y),te(Sf,$),G(L))if(L.length){const re=e.exposed||(e.exposed={});L.forEach(ue=>{Object.defineProperty(re,ue,{get:()=>n[ue],set:rt=>n[ue]=rt,enumerable:!0})})}else e.exposed||(e.exposed={});E&&e.render===mt&&(e.render=E),U!=null&&(e.inheritAttrs=U),W&&(e.components=W),ee&&(e.directives=ee),$&&Za(e)}function Pf(e,t,n=mt){G(e)&&(e=Cs(e));for(const u in e){const s=e[u];let r;de(s)?"default"in s?r=Bu(s.from||u,s.default,!0):r=Bu(s.from||u):r=Bu(s),Fe(r)?Object.defineProperty(t,u,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[u]=r}}function Yi(e,t,n){xt(G(e)?e.map(u=>u.bind(t.proxy)):e.bind(t.proxy),t,n)}function Qa(e,t,n,u){let s=u.includes(".")?nc(n,u):()=>n[u];if(be(e)){const r=t[e];X(r)&&Nu(s,r)}else if(X(e))Nu(s,e.bind(n));else if(de(e))if(G(e))e.forEach(r=>Qa(r,t,n,u));else{const r=X(e.handler)?e.handler.bind(n):t[e.handler];X(r)&&Nu(s,r,e)}}function Ya(e){const t=e.type,{mixins:n,extends:u}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,o=r.get(t);let a;return o?a=o:!s.length&&!n&&!u?a=t:(a={},s.length&&s.forEach(c=>nr(a,c,i,!0)),nr(a,t,i)),de(t)&&r.set(t,a),a}function nr(e,t,n,u=!1){const{mixins:s,extends:r}=t;r&&nr(e,r,n,!0),s&&s.forEach(i=>nr(e,i,n,!0));for(const i in t)if(!(u&&i==="expose")){const o=$f[i]||n&&n[i];e[i]=o?o(e[i],t[i]):t[i]}return e}const $f={data:eo,props:to,emits:to,methods:Bn,computed:Bn,beforeCreate:Re,created:Re,beforeMount:Re,mounted:Re,beforeUpdate:Re,updated:Re,beforeDestroy:Re,beforeUnmount:Re,destroyed:Re,unmounted:Re,activated:Re,deactivated:Re,errorCaptured:Re,serverPrefetch:Re,components:Bn,directives:Bn,watch:Bf,provide:eo,inject:Lf};function eo(e,t){return t?e?function(){return Ie(X(e)?e.call(this,this):e,X(t)?t.call(this,this):t)}:t:e}function Lf(e,t){return Bn(Cs(e),Cs(t))}function Cs(e){if(G(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Re(e,t){return e?[...new Set([].concat(e,t))]:t}function Bn(e,t){return e?Ie(Object.create(null),e,t):t}function to(e,t){return e?G(e)&&G(t)?[...new Set([...e,...t])]:Ie(Object.create(null),Qi(e),Qi(t??{})):t}function Bf(e,t){if(!e)return t;if(!t)return e;const n=Ie(Object.create(null),e);for(const u in t)n[u]=Re(e[u],t[u]);return n}function ec(){return{app:null,config:{isNativeTag:_a,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Nf=0;function qf(e,t){return function(u,s=null){X(u)||(u=Ie({},u)),s!=null&&!de(s)&&(s=null);const r=ec(),i=new WeakSet,o=[];let a=!1;const c=r.app={_uid:Nf++,_component:u,_props:s,_container:null,_context:r,_instance:null,version:kd,get config(){return r.config},set config(l){},use(l,...f){return i.has(l)||(l&&X(l.install)?(i.add(l),l.install(c,...f)):X(l)&&(i.add(l),l(c,...f))),c},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),c},component(l,f){return f?(r.components[l]=f,c):r.components[l]},directive(l,f){return f?(r.directives[l]=f,c):r.directives[l]},mount(l,f,h){if(!a){const d=c._ceVNode||Ne(u,s);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(d,l,h),a=!0,c._container=l,l.__vue_app__=c,Dr(d.component)}},onUnmount(l){o.push(l)},unmount(){a&&(xt(o,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(l,f){return r.provides[l]=f,c},runWithContext(l){const f=wn;wn=c;try{return l()}finally{wn=f}}};return c}}let wn=null;function jf(e,t){if(Oe){let n=Oe.provides;const u=Oe.parent&&Oe.parent.provides;u===n&&(n=Oe.provides=Object.create(u)),n[e]=t}}function Bu(e,t,n=!1){const u=md();if(u||wn){let s=wn?wn._context.provides:u?u.parent==null||u.ce?u.vnode.appContext&&u.vnode.appContext.provides:u.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&X(t)?t.call(u&&u.proxy):t}}const Uf=Symbol.for("v-scx"),zf=()=>Bu(Uf);function Nu(e,t,n){return tc(e,t,n)}function tc(e,t,n=ae){const{immediate:u,deep:s,flush:r,once:i}=n,o=Ie({},n),a=t&&u||!t&&r!=="post";let c;if(cu){if(r==="sync"){const d=zf();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!a){const d=()=>{};return d.stop=mt,d.resume=mt,d.pause=mt,d}}const l=Oe;o.call=(d,p,b)=>xt(d,l,p,b);let f=!1;r==="post"?o.scheduler=d=>{He(d,l&&l.suspense)}:r!=="sync"&&(f=!0,o.scheduler=(d,p)=>{p?d():ri(d)}),o.augmentJob=d=>{t&&(d.flags|=4),f&&(d.flags|=2,l&&(d.id=l.uid,d.i=l))};const h=hf(e,t,o);return cu&&(c?c.push(h):a&&h()),h}function Hf(e,t,n){const u=this.proxy,s=be(e)?e.includes(".")?nc(u,e):()=>u[e]:e.bind(u,u);let r;X(t)?r=t:(r=t.handler,n=t);const i=gu(this),o=tc(s,r.bind(u),n);return i(),o}function nc(e,t){const n=t.split(".");return()=>{let u=e;for(let s=0;s<n.length&&u;s++)u=u[n[s]];return u}}const Wf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ut(t)}Modifiers`]||e[`${Vt(t)}Modifiers`];function Vf(e,t,...n){if(e.isUnmounted)return;const u=e.vnode.props||ae;let s=n;const r=t.startsWith("update:"),i=r&&Wf(u,t.slice(7));i&&(i.trim&&(s=n.map(l=>be(l)?l.trim():l)),i.number&&(s=n.map(Zs)));let o,a=u[o=zr(t)]||u[o=zr(Ut(t))];!a&&r&&(a=u[o=zr(Vt(t))]),a&&xt(a,e,6,s);const c=u[o+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,xt(c,e,6,s)}}const Kf=new WeakMap;function uc(e,t,n=!1){const u=n?Kf:t.emitsCache,s=u.get(e);if(s!==void 0)return s;const r=e.emits;let i={},o=!1;if(!X(e)){const a=c=>{const l=uc(c,t,!0);l&&(o=!0,Ie(i,l))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!o?(de(e)&&u.set(e,null),null):(G(r)?r.forEach(a=>i[a]=null):Ie(i,r),de(e)&&u.set(e,i),i)}function Ar(e,t){return!e||!mr(t)?!1:(t=t.slice(2).replace(/Once$/,""),ie(e,t[0].toLowerCase()+t.slice(1))||ie(e,Vt(t))||ie(e,t))}function no(e){const{type:t,vnode:n,proxy:u,withProxy:s,propsOptions:[r],slots:i,attrs:o,emit:a,render:c,renderCache:l,props:f,data:h,setupState:d,ctx:p,inheritAttrs:b}=e,x=er(e);let v,m;try{if(n.shapeFlag&4){const y=s||u,E=y;v=ht(c.call(E,y,l,f,d,h,p)),m=o}else{const y=t;v=ht(y.length>1?y(f,{attrs:o,slots:i,emit:a}):y(f,null)),m=t.props?o:Jf(o)}}catch(y){eu.length=0,kr(y,e,1),v=Ne(zt)}let k=v;if(m&&b!==!1){const y=Object.keys(m),{shapeFlag:E}=k;y.length&&E&7&&(r&&y.some(Vs)&&(m=Zf(m,r)),k=Cn(k,m,!1,!0))}return n.dirs&&(k=Cn(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&si(k,n.transition),v=k,er(x),v}const Jf=e=>{let t;for(const n in e)(n==="class"||n==="style"||mr(n))&&((t||(t={}))[n]=e[n]);return t},Zf=(e,t)=>{const n={};for(const u in e)(!Vs(u)||!(u.slice(9)in t))&&(n[u]=e[u]);return n};function Gf(e,t,n){const{props:u,children:s,component:r}=e,{props:i,children:o,patchFlag:a}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return u?uo(u,i,c):!!i;if(a&8){const l=t.dynamicProps;for(let f=0;f<l.length;f++){const h=l[f];if(i[h]!==u[h]&&!Ar(c,h))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:u===i?!1:u?i?uo(u,i,c):!0:!!i;return!1}function uo(e,t,n){const u=Object.keys(t);if(u.length!==Object.keys(e).length)return!0;for(let s=0;s<u.length;s++){const r=u[s];if(t[r]!==e[r]&&!Ar(n,r))return!0}return!1}function Xf({vnode:e,parent:t},n){for(;t;){const u=t.subTree;if(u.suspense&&u.suspense.activeBranch===e&&(u.el=e.el),u===e)(e=t.vnode).el=n,t=t.parent;else break}}const rc={},sc=()=>Object.create(rc),ic=e=>Object.getPrototypeOf(e)===rc;function Qf(e,t,n,u=!1){const s={},r=sc();e.propsDefaults=Object.create(null),oc(e,t,s,r);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=u?s:uf(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Yf(e,t,n,u){const{props:s,attrs:r,vnode:{patchFlag:i}}=e,o=se(s),[a]=e.propsOptions;let c=!1;if((u||i>0)&&!(i&16)){if(i&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let h=l[f];if(Ar(e.emitsOptions,h))continue;const d=t[h];if(a)if(ie(r,h))d!==r[h]&&(r[h]=d,c=!0);else{const p=Ut(h);s[p]=As(a,o,p,d,e,!1)}else d!==r[h]&&(r[h]=d,c=!0)}}}else{oc(e,t,s,r)&&(c=!0);let l;for(const f in o)(!t||!ie(t,f)&&((l=Vt(f))===f||!ie(t,l)))&&(a?n&&(n[f]!==void 0||n[l]!==void 0)&&(s[f]=As(a,o,f,void 0,e,!0)):delete s[f]);if(r!==o)for(const f in r)(!t||!ie(t,f))&&(delete r[f],c=!0)}c&&Et(e.attrs,"set","")}function oc(e,t,n,u){const[s,r]=e.propsOptions;let i=!1,o;if(t)for(let a in t){if(Jn(a))continue;const c=t[a];let l;s&&ie(s,l=Ut(a))?!r||!r.includes(l)?n[l]=c:(o||(o={}))[l]=c:Ar(e.emitsOptions,a)||(!(a in u)||c!==u[a])&&(u[a]=c,i=!0)}if(r){const a=se(n),c=o||ae;for(let l=0;l<r.length;l++){const f=r[l];n[f]=As(s,a,f,c[f],e,!ie(c,f))}}return i}function As(e,t,n,u,s,r){const i=e[n];if(i!=null){const o=ie(i,"default");if(o&&u===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&X(a)){const{propsDefaults:c}=s;if(n in c)u=c[n];else{const l=gu(s);u=c[n]=a.call(null,t),l()}}else u=a;s.ce&&s.ce._setProp(n,u)}i[0]&&(r&&!o?u=!1:i[1]&&(u===""||u===Vt(n))&&(u=!0))}return u}const ed=new WeakMap;function ac(e,t,n=!1){const u=n?ed:t.propsCache,s=u.get(e);if(s)return s;const r=e.props,i={},o=[];let a=!1;if(!X(e)){const l=f=>{a=!0;const[h,d]=ac(f,t,!0);Ie(i,h),d&&o.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!r&&!a)return de(e)&&u.set(e,mn),mn;if(G(r))for(let l=0;l<r.length;l++){const f=Ut(r[l]);ro(f)&&(i[f]=ae)}else if(r)for(const l in r){const f=Ut(l);if(ro(f)){const h=r[l],d=i[f]=G(h)||X(h)?{type:h}:Ie({},h),p=d.type;let b=!1,x=!0;if(G(p))for(let v=0;v<p.length;++v){const m=p[v],k=X(m)&&m.name;if(k==="Boolean"){b=!0;break}else k==="String"&&(x=!1)}else b=X(p)&&p.name==="Boolean";d[0]=b,d[1]=x,(b||ie(d,"default"))&&o.push(f)}}const c=[i,o];return de(e)&&u.set(e,c),c}function ro(e){return e[0]!=="$"&&!Jn(e)}const ai=e=>e==="_"||e==="_ctx"||e==="$stable",ci=e=>G(e)?e.map(ht):[ht(e)],td=(e,t,n)=>{if(t._n)return t;const u=mf((...s)=>ci(t(...s)),n);return u._c=!1,u},cc=(e,t,n)=>{const u=e._ctx;for(const s in e){if(ai(s))continue;const r=e[s];if(X(r))t[s]=td(s,r,u);else if(r!=null){const i=ci(r);t[s]=()=>i}}},lc=(e,t)=>{const n=ci(t);e.slots.default=()=>n},fc=(e,t,n)=>{for(const u in t)(n||!ai(u))&&(e[u]=t[u])},nd=(e,t,n)=>{const u=e.slots=sc();if(e.vnode.shapeFlag&32){const s=t._;s?(fc(u,t,n),n&&Ca(u,"_",s,!0)):cc(t,u)}else t&&lc(e,t)},ud=(e,t,n)=>{const{vnode:u,slots:s}=e;let r=!0,i=ae;if(u.shapeFlag&32){const o=t._;o?n&&o===1?r=!1:fc(s,t,n):(r=!t.$stable,cc(t,s)),i=t}else t&&(lc(e,t),i={default:1});if(r)for(const o in s)!ai(o)&&i[o]==null&&delete s[o]},He=ad;function rd(e){return sd(e)}function sd(e,t){const n=yr();n.__VUE__=!0;const{insert:u,remove:s,patchProp:r,createElement:i,createText:o,createComment:a,setText:c,setElementText:l,parentNode:f,nextSibling:h,setScopeId:d=mt,insertStaticContent:p}=e,b=(g,_,A,T=null,S=null,F=null,B=void 0,P=null,M=!!_.dynamicChildren)=>{if(g===_)return;g&&!Pn(g,_)&&(T=Cu(g),st(g,S,F,!0),g=null),_.patchFlag===-2&&(M=!1,_.dynamicChildren=null);const{type:I,ref:K,shapeFlag:q}=_;switch(I){case Er:x(g,_,A,T);break;case zt:v(g,_,A,T);break;case Gr:g==null&&m(_,A,T,B);break;case Ve:W(g,_,A,T,S,F,B,P,M);break;default:q&1?E(g,_,A,T,S,F,B,P,M):q&6?ee(g,_,A,T,S,F,B,P,M):(q&64||q&128)&&I.process(g,_,A,T,S,F,B,P,M,Tn)}K!=null&&S?Xn(K,g&&g.ref,F,_||g,!_):K==null&&g&&g.ref!=null&&Xn(g.ref,null,F,g,!0)},x=(g,_,A,T)=>{if(g==null)u(_.el=o(_.children),A,T);else{const S=_.el=g.el;_.children!==g.children&&c(S,_.children)}},v=(g,_,A,T)=>{g==null?u(_.el=a(_.children||""),A,T):_.el=g.el},m=(g,_,A,T)=>{[g.el,g.anchor]=p(g.children,_,A,T,g.el,g.anchor)},k=({el:g,anchor:_},A,T)=>{let S;for(;g&&g!==_;)S=h(g),u(g,A,T),g=S;u(_,A,T)},y=({el:g,anchor:_})=>{let A;for(;g&&g!==_;)A=h(g),s(g),g=A;s(_)},E=(g,_,A,T,S,F,B,P,M)=>{if(_.type==="svg"?B="svg":_.type==="math"&&(B="mathml"),g==null)C(_,A,T,S,F,B,P,M);else{const I=g.el&&g.el._isVueCE?g.el:null;try{I&&I._beginPatch(),$(g,_,S,F,B,P,M)}finally{I&&I._endPatch()}}},C=(g,_,A,T,S,F,B,P)=>{let M,I;const{props:K,shapeFlag:q,transition:V,dirs:Z}=g;if(M=g.el=i(g.type,F,K&&K.is,K),q&8?l(M,g.children):q&16&&O(g.children,M,null,T,S,Zr(g,F),B,P),Z&&Jt(g,null,T,"created"),D(M,g,g.scopeId,B,T),K){for(const ce in K)ce!=="value"&&!Jn(ce)&&r(M,ce,null,K[ce],F,T);"value"in K&&r(M,"value",null,K.value,F),(I=K.onVnodeBeforeMount)&&ct(I,T,g)}Z&&Jt(g,null,T,"beforeMount");const ne=id(S,V);ne&&V.beforeEnter(M),u(M,_,A),((I=K&&K.onVnodeMounted)||ne||Z)&&He(()=>{I&&ct(I,T,g),ne&&V.enter(M),Z&&Jt(g,null,T,"mounted")},S)},D=(g,_,A,T,S)=>{if(A&&d(g,A),T)for(let F=0;F<T.length;F++)d(g,T[F]);if(S){let F=S.subTree;if(_===F||pc(F.type)&&(F.ssContent===_||F.ssFallback===_)){const B=S.vnode;D(g,B,B.scopeId,B.slotScopeIds,S.parent)}}},O=(g,_,A,T,S,F,B,P,M=0)=>{for(let I=M;I<g.length;I++){const K=g[I]=P?Lt(g[I]):ht(g[I]);b(null,K,_,A,T,S,F,B,P)}},$=(g,_,A,T,S,F,B)=>{const P=_.el=g.el;let{patchFlag:M,dynamicChildren:I,dirs:K}=_;M|=g.patchFlag&16;const q=g.props||ae,V=_.props||ae;let Z;if(A&&Zt(A,!1),(Z=V.onVnodeBeforeUpdate)&&ct(Z,A,_,g),K&&Jt(_,g,A,"beforeUpdate"),A&&Zt(A,!0),(q.innerHTML&&V.innerHTML==null||q.textContent&&V.textContent==null)&&l(P,""),I?L(g.dynamicChildren,I,P,A,T,Zr(_,S),F):B||ue(g,_,P,null,A,T,Zr(_,S),F,!1),M>0){if(M&16)U(P,q,V,A,S);else if(M&2&&q.class!==V.class&&r(P,"class",null,V.class,S),M&4&&r(P,"style",q.style,V.style,S),M&8){const ne=_.dynamicProps;for(let ce=0;ce<ne.length;ce++){const oe=ne[ce],Pe=q[oe],$e=V[oe];($e!==Pe||oe==="value")&&r(P,oe,Pe,$e,S,A)}}M&1&&g.children!==_.children&&l(P,_.children)}else!B&&I==null&&U(P,q,V,A,S);((Z=V.onVnodeUpdated)||K)&&He(()=>{Z&&ct(Z,A,_,g),K&&Jt(_,g,A,"updated")},T)},L=(g,_,A,T,S,F,B)=>{for(let P=0;P<_.length;P++){const M=g[P],I=_[P],K=M.el&&(M.type===Ve||!Pn(M,I)||M.shapeFlag&198)?f(M.el):A;b(M,I,K,null,T,S,F,B,!0)}},U=(g,_,A,T,S)=>{if(_!==A){if(_!==ae)for(const F in _)!Jn(F)&&!(F in A)&&r(g,F,_[F],null,S,T);for(const F in A){if(Jn(F))continue;const B=A[F],P=_[F];B!==P&&F!=="value"&&r(g,F,P,B,S,T)}"value"in A&&r(g,"value",_.value,A.value,S)}},W=(g,_,A,T,S,F,B,P,M)=>{const I=_.el=g?g.el:o(""),K=_.anchor=g?g.anchor:o("");let{patchFlag:q,dynamicChildren:V,slotScopeIds:Z}=_;Z&&(P=P?P.concat(Z):Z),g==null?(u(I,A,T),u(K,A,T),O(_.children||[],A,K,S,F,B,P,M)):q>0&&q&64&&V&&g.dynamicChildren?(L(g.dynamicChildren,V,A,S,F,B,P),(_.key!=null||S&&_===S.subTree)&&dc(g,_,!0)):ue(g,_,A,K,S,F,B,P,M)},ee=(g,_,A,T,S,F,B,P,M)=>{_.slotScopeIds=P,g==null?_.shapeFlag&512?S.ctx.activate(_,A,T,B,M):Y(_,A,T,S,F,B,M):he(g,_,M)},Y=(g,_,A,T,S,F,B)=>{const P=g.component=gd(g,T,S);if(Ga(g)&&(P.ctx.renderer=Tn),_d(P,!1,B),P.asyncDep){if(S&&S.registerDep(P,te,B),!g.el){const M=P.subTree=Ne(zt);v(null,M,_,A),g.placeholder=M.el}}else te(P,g,_,A,S,F,B)},he=(g,_,A)=>{const T=_.component=g.component;if(Gf(g,_,A))if(T.asyncDep&&!T.asyncResolved){re(T,_,A);return}else T.next=_,T.update();else _.el=g.el,T.vnode=_},te=(g,_,A,T,S,F,B)=>{const P=()=>{if(g.isMounted){let{next:q,bu:V,u:Z,parent:ne,vnode:ce}=g;{const ot=hc(g);if(ot){q&&(q.el=ce.el,re(g,q,B)),ot.asyncDep.then(()=>{g.isUnmounted||P()});return}}let oe=q,Pe;Zt(g,!1),q?(q.el=ce.el,re(g,q,B)):q=ce,V&&Lu(V),(Pe=q.props&&q.props.onVnodeBeforeUpdate)&&ct(Pe,ne,q,ce),Zt(g,!0);const $e=no(g),it=g.subTree;g.subTree=$e,b(it,$e,f(it.el),Cu(it),g,S,F),q.el=$e.el,oe===null&&Xf(g,$e.el),Z&&He(Z,S),(Pe=q.props&&q.props.onVnodeUpdated)&&He(()=>ct(Pe,ne,q,ce),S)}else{let q;const{el:V,props:Z}=_,{bm:ne,m:ce,parent:oe,root:Pe,type:$e}=g,it=Qn(_);Zt(g,!1),ne&&Lu(ne),!it&&(q=Z&&Z.onVnodeBeforeMount)&&ct(q,oe,_),Zt(g,!0);{Pe.ce&&Pe.ce._def.shadowRoot!==!1&&Pe.ce._injectChildStyle($e);const ot=g.subTree=no(g);b(null,ot,A,T,g,S,F),_.el=ot.el}if(ce&&He(ce,S),!it&&(q=Z&&Z.onVnodeMounted)){const ot=_;He(()=>ct(q,oe,ot),S)}(_.shapeFlag&256||oe&&Qn(oe.vnode)&&oe.vnode.shapeFlag&256)&&g.a&&He(g.a,S),g.isMounted=!0,_=A=T=null}};g.scope.on();const M=g.effect=new Sa(P);g.scope.off();const I=g.update=M.run.bind(M),K=g.job=M.runIfDirty.bind(M);K.i=g,K.id=g.uid,M.scheduler=()=>ri(K),Zt(g,!0),I()},re=(g,_,A)=>{_.component=g;const T=g.vnode.props;g.vnode=_,g.next=null,Yf(g,_.props,T,A),ud(g,_.children,A),St(),Gi(g),Ft()},ue=(g,_,A,T,S,F,B,P,M=!1)=>{const I=g&&g.children,K=g?g.shapeFlag:0,q=_.children,{patchFlag:V,shapeFlag:Z}=_;if(V>0){if(V&128){Tt(I,q,A,T,S,F,B,P,M);return}else if(V&256){rt(I,q,A,T,S,F,B,P,M);return}}Z&8?(K&16&&Rn(I,S,F),q!==I&&l(A,q)):K&16?Z&16?Tt(I,q,A,T,S,F,B,P,M):Rn(I,S,F,!0):(K&8&&l(A,""),Z&16&&O(q,A,T,S,F,B,P,M))},rt=(g,_,A,T,S,F,B,P,M)=>{g=g||mn,_=_||mn;const I=g.length,K=_.length,q=Math.min(I,K);let V;for(V=0;V<q;V++){const Z=_[V]=M?Lt(_[V]):ht(_[V]);b(g[V],Z,A,null,S,F,B,P,M)}I>K?Rn(g,S,F,!0,!1,q):O(_,A,T,S,F,B,P,M,q)},Tt=(g,_,A,T,S,F,B,P,M)=>{let I=0;const K=_.length;let q=g.length-1,V=K-1;for(;I<=q&&I<=V;){const Z=g[I],ne=_[I]=M?Lt(_[I]):ht(_[I]);if(Pn(Z,ne))b(Z,ne,A,null,S,F,B,P,M);else break;I++}for(;I<=q&&I<=V;){const Z=g[q],ne=_[V]=M?Lt(_[V]):ht(_[V]);if(Pn(Z,ne))b(Z,ne,A,null,S,F,B,P,M);else break;q--,V--}if(I>q){if(I<=V){const Z=V+1,ne=Z<K?_[Z].el:T;for(;I<=V;)b(null,_[I]=M?Lt(_[I]):ht(_[I]),A,ne,S,F,B,P,M),I++}}else if(I>V)for(;I<=q;)st(g[I],S,F,!0),I++;else{const Z=I,ne=I,ce=new Map;for(I=ne;I<=V;I++){const je=_[I]=M?Lt(_[I]):ht(_[I]);je.key!=null&&ce.set(je.key,I)}let oe,Pe=0;const $e=V-ne+1;let it=!1,ot=0;const Mn=new Array($e);for(I=0;I<$e;I++)Mn[I]=0;for(I=Z;I<=q;I++){const je=g[I];if(Pe>=$e){st(je,S,F,!0);continue}let at;if(je.key!=null)at=ce.get(je.key);else for(oe=ne;oe<=V;oe++)if(Mn[oe-ne]===0&&Pn(je,_[oe])){at=oe;break}at===void 0?st(je,S,F,!0):(Mn[at-ne]=I+1,at>=ot?ot=at:it=!0,b(je,_[at],A,null,S,F,B,P,M),Pe++)}const Hi=it?od(Mn):mn;for(oe=Hi.length-1,I=$e-1;I>=0;I--){const je=ne+I,at=_[je],Wi=_[je+1],Vi=je+1<K?Wi.el||Wi.placeholder:T;Mn[I]===0?b(null,at,A,Vi,S,F,B,P,M):it&&(oe<0||I!==Hi[oe]?Kt(at,A,Vi,2):oe--)}}},Kt=(g,_,A,T,S=null)=>{const{el:F,type:B,transition:P,children:M,shapeFlag:I}=g;if(I&6){Kt(g.component.subTree,_,A,T);return}if(I&128){g.suspense.move(_,A,T);return}if(I&64){B.move(g,_,A,Tn);return}if(B===Ve){u(F,_,A);for(let q=0;q<M.length;q++)Kt(M[q],_,A,T);u(g.anchor,_,A);return}if(B===Gr){k(g,_,A);return}if(T!==2&&I&1&&P)if(T===0)P.beforeEnter(F),u(F,_,A),He(()=>P.enter(F),S);else{const{leave:q,delayLeave:V,afterLeave:Z}=P,ne=()=>{g.ctx.isUnmounted?s(F):u(F,_,A)},ce=()=>{F._isLeaving&&F[yf](!0),q(F,()=>{ne(),Z&&Z()})};V?V(F,ne,ce):ce()}else u(F,_,A)},st=(g,_,A,T=!1,S=!1)=>{const{type:F,props:B,ref:P,children:M,dynamicChildren:I,shapeFlag:K,patchFlag:q,dirs:V,cacheIndex:Z}=g;if(q===-2&&(S=!1),P!=null&&(St(),Xn(P,null,A,g,!0),Ft()),Z!=null&&(_.renderCache[Z]=void 0),K&256){_.ctx.deactivate(g);return}const ne=K&1&&V,ce=!Qn(g);let oe;if(ce&&(oe=B&&B.onVnodeBeforeUnmount)&&ct(oe,_,g),K&6)E0(g.component,A,T);else{if(K&128){g.suspense.unmount(A,T);return}ne&&Jt(g,null,_,"beforeUnmount"),K&64?g.type.remove(g,_,A,Tn,T):I&&!I.hasOnce&&(F!==Ve||q>0&&q&64)?Rn(I,_,A,!1,!0):(F===Ve&&q&384||!S&&K&16)&&Rn(M,_,A),T&&Ui(g)}(ce&&(oe=B&&B.onVnodeUnmounted)||ne)&&He(()=>{oe&&ct(oe,_,g),ne&&Jt(g,null,_,"unmounted")},A)},Ui=g=>{const{type:_,el:A,anchor:T,transition:S}=g;if(_===Ve){A0(A,T);return}if(_===Gr){y(g);return}const F=()=>{s(A),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(g.shapeFlag&1&&S&&!S.persisted){const{leave:B,delayLeave:P}=S,M=()=>B(A,F);P?P(g.el,F,M):M()}else F()},A0=(g,_)=>{let A;for(;g!==_;)A=h(g),s(g),g=A;s(_)},E0=(g,_,A)=>{const{bum:T,scope:S,job:F,subTree:B,um:P,m:M,a:I}=g;so(M),so(I),T&&Lu(T),S.stop(),F&&(F.flags|=8,st(B,g,_,A)),P&&He(P,_),He(()=>{g.isUnmounted=!0},_)},Rn=(g,_,A,T=!1,S=!1,F=0)=>{for(let B=F;B<g.length;B++)st(g[B],_,A,T,S)},Cu=g=>{if(g.shapeFlag&6)return Cu(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const _=h(g.anchor||g.el),A=_&&_[_f];return A?h(A):_};let Ur=!1;const zi=(g,_,A)=>{g==null?_._vnode&&st(_._vnode,null,null,!0):b(_._vnode||null,g,_,null,null,null,A),_._vnode=g,Ur||(Ur=!0,Gi(),Va(),Ur=!1)},Tn={p:b,um:st,m:Kt,r:Ui,mt:Y,mc:O,pc:ue,pbc:L,n:Cu,o:e};return{render:zi,hydrate:void 0,createApp:qf(zi)}}function Zr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Zt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function id(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function dc(e,t,n=!1){const u=e.children,s=t.children;if(G(u)&&G(s))for(let r=0;r<u.length;r++){const i=u[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=Lt(s[r]),o.el=i.el),!n&&o.patchFlag!==-2&&dc(i,o)),o.type===Er&&o.patchFlag!==-1&&(o.el=i.el),o.type===zt&&!o.el&&(o.el=i.el)}}function od(e){const t=e.slice(),n=[0];let u,s,r,i,o;const a=e.length;for(u=0;u<a;u++){const c=e[u];if(c!==0){if(s=n[n.length-1],e[s]<c){t[u]=s,n.push(u);continue}for(r=0,i=n.length-1;r<i;)o=r+i>>1,e[n[o]]<c?r=o+1:i=o;c<e[n[r]]&&(r>0&&(t[u]=n[r-1]),n[r]=u)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function hc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:hc(t)}function so(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const pc=e=>e.__isSuspense;function ad(e,t){t&&t.pendingBranch?G(e)?t.effects.push(...e):t.effects.push(e):gf(e)}const Ve=Symbol.for("v-fgt"),Er=Symbol.for("v-txt"),zt=Symbol.for("v-cmt"),Gr=Symbol.for("v-stc"),eu=[];let Ke=null;function xe(e=!1){eu.push(Ke=e?null:[])}function cd(){eu.pop(),Ke=eu[eu.length-1]||null}let au=1;function io(e,t=!1){au+=e,e<0&&Ke&&t&&(Ke.hasOnce=!0)}function bc(e){return e.dynamicChildren=au>0?Ke||mn:null,cd(),au>0&&Ke&&Ke.push(e),e}function ke(e,t,n,u,s,r){return bc(N(e,t,n,u,s,r,!0))}function ld(e,t,n,u,s){return bc(Ne(e,t,n,u,s,!0))}function gc(e){return e?e.__v_isVNode===!0:!1}function Pn(e,t){return e.type===t.type&&e.key===t.key}const mc=({key:e})=>e??null,qu=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?be(e)||Fe(e)||X(e)?{i:Ze,r:e,k:t,f:!!n}:e:null);function N(e,t=null,n=null,u=0,s=null,r=e===Ve?0:1,i=!1,o=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&mc(t),ref:t&&qu(t),scopeId:Ja,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:u,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ze};return o?(li(a,n),r&128&&e.normalize(a)):n&&(a.shapeFlag|=be(n)?8:16),au>0&&!i&&Ke&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Ke.push(a),a}const Ne=fd;function fd(e,t=null,n=null,u=0,s=null,r=!1){if((!e||e===Tf)&&(e=zt),gc(e)){const o=Cn(e,t,!0);return n&&li(o,n),au>0&&!r&&Ke&&(o.shapeFlag&6?Ke[Ke.indexOf(e)]=o:Ke.push(o)),o.patchFlag=-2,o}if(vd(e)&&(e=e.__vccOpts),t){t=dd(t);let{class:o,style:a}=t;o&&!be(o)&&(t.class=et(o)),de(a)&&(ui(a)&&!G(a)&&(a=Ie({},a)),t.style=wr(a))}const i=be(e)?1:pc(e)?128:xf(e)?64:de(e)?4:X(e)?2:0;return N(e,t,n,u,s,i,r,!0)}function dd(e){return e?ui(e)||ic(e)?Ie({},e):e:null}function Cn(e,t,n=!1,u=!1){const{props:s,ref:r,patchFlag:i,children:o,transition:a}=e,c=t?hd(s||{},t):s,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&mc(c),ref:t&&t.ref?n&&r?G(r)?r.concat(qu(t)):[r,qu(t)]:qu(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ve?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Cn(e.ssContent),ssFallback:e.ssFallback&&Cn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&u&&si(l,a.clone(l)),l}function tu(e=" ",t=0){return Ne(Er,null,e,t)}function fn(e="",t=!1){return t?(xe(),ld(zt,null,e)):Ne(zt,null,e)}function ht(e){return e==null||typeof e=="boolean"?Ne(zt):G(e)?Ne(Ve,null,e.slice()):gc(e)?Lt(e):Ne(Er,null,String(e))}function Lt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Cn(e)}function li(e,t){let n=0;const{shapeFlag:u}=e;if(t==null)t=null;else if(G(t))n=16;else if(typeof t=="object")if(u&65){const s=t.default;s&&(s._c&&(s._d=!1),li(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!ic(t)?t._ctx=Ze:s===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else X(t)?(t={default:t,_ctx:Ze},n=32):(t=String(t),u&64?(n=16,t=[tu(t)]):n=8);e.children=t,e.shapeFlag|=n}function hd(...e){const t={};for(let n=0;n<e.length;n++){const u=e[n];for(const s in u)if(s==="class")t.class!==u.class&&(t.class=et([t.class,u.class]));else if(s==="style")t.style=wr([t.style,u.style]);else if(mr(s)){const r=t[s],i=u[s];i&&r!==i&&!(G(r)&&r.includes(i))&&(t[s]=r?[].concat(r,i):i)}else s!==""&&(t[s]=u[s])}return t}function ct(e,t,n,u=null){xt(e,t,7,[n,u])}const pd=ec();let bd=0;function gd(e,t,n){const u=e.type,s=(t?t.appContext:e.appContext)||pd,r={uid:bd++,vnode:e,type:u,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new L0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ac(u,s),emitsOptions:uc(u,s),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:u.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Vf.bind(null,r),e.ce&&e.ce(r),r}let Oe=null;const md=()=>Oe||Ze;let ur,Es;{const e=yr(),t=(n,u)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(u),r=>{s.length>1?s.forEach(i=>i(r)):s[0](r)}};ur=t("__VUE_INSTANCE_SETTERS__",n=>Oe=n),Es=t("__VUE_SSR_SETTERS__",n=>cu=n)}const gu=e=>{const t=Oe;return ur(e),e.scope.on(),()=>{e.scope.off(),ur(t)}},oo=()=>{Oe&&Oe.scope.off(),ur(null)};function _c(e){return e.vnode.shapeFlag&4}let cu=!1;function _d(e,t=!1,n=!1){t&&Es(t);const{props:u,children:s}=e.vnode,r=_c(e);Qf(e,u,r,t),nd(e,s,n||t);const i=r?xd(e,t):void 0;return t&&Es(!1),i}function xd(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Mf);const{setup:u}=n;if(u){St();const s=e.setupContext=u.length>1?wd(e):null,r=gu(e),i=bu(u,e,0,[e.props,s]),o=ya(i);if(Ft(),r(),(o||e.sp)&&!Qn(e)&&Za(e),o){if(i.then(oo,oo),t)return i.then(a=>{ao(e,a)}).catch(a=>{kr(a,e,0)});e.asyncDep=i}else ao(e,i)}else xc(e)}function ao(e,t,n){X(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:de(t)&&(e.setupState=Ua(t)),xc(e)}function xc(e,t,n){const u=e.type;e.render||(e.render=u.render||mt);{const s=gu(e);St();try{Of(e)}finally{Ft(),s()}}}const yd={get(e,t){return Se(e,"get",""),e[t]}};function wd(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,yd),slots:e.slots,emit:e.emit,expose:t}}function Dr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ua(rf(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Yn)return Yn[n](e)},has(t,n){return n in t||n in Yn}})):e.proxy}function vd(e){return X(e)&&"__vccOpts"in e}const _t=(e,t)=>ff(e,t,cu),kd="3.5.25";let Ds;const co=typeof window<"u"&&window.trustedTypes;if(co)try{Ds=co.createPolicy("vue",{createHTML:e=>e})}catch{}const yc=Ds?e=>Ds.createHTML(e):e=>e,Cd="http://www.w3.org/2000/svg",Ad="http://www.w3.org/1998/Math/MathML",At=typeof document<"u"?document:null,lo=At&&At.createElement("template"),Ed={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,u)=>{const s=t==="svg"?At.createElementNS(Cd,e):t==="mathml"?At.createElementNS(Ad,e):n?At.createElement(e,{is:n}):At.createElement(e);return e==="select"&&u&&u.multiple!=null&&s.setAttribute("multiple",u.multiple),s},createText:e=>At.createTextNode(e),createComment:e=>At.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>At.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,u,s,r){const i=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{lo.innerHTML=yc(u==="svg"?`<svg>${e}</svg>`:u==="mathml"?`<math>${e}</math>`:e);const o=lo.content;if(u==="svg"||u==="mathml"){const a=o.firstChild;for(;a.firstChild;)o.appendChild(a.firstChild);o.removeChild(a)}t.insertBefore(o,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Dd=Symbol("_vtc");function Sd(e,t,n){const u=e[Dd];u&&(t=(t?[t,...u]:[...u]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const rr=Symbol("_vod"),wc=Symbol("_vsh"),fo={name:"show",beforeMount(e,{value:t},{transition:n}){e[rr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):$n(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:u}){!t!=!n&&(u?t?(u.beforeEnter(e),$n(e,!0),u.enter(e)):u.leave(e,()=>{$n(e,!1)}):$n(e,t))},beforeUnmount(e,{value:t}){$n(e,t)}};function $n(e,t){e.style.display=t?e[rr]:"none",e[wc]=!t}const Fd=Symbol(""),Id=/(?:^|;)\s*display\s*:/;function Rd(e,t,n){const u=e.style,s=be(n);let r=!1;if(n&&!s){if(t)if(be(t))for(const i of t.split(";")){const o=i.slice(0,i.indexOf(":")).trim();n[o]==null&&ju(u,o,"")}else for(const i in t)n[i]==null&&ju(u,i,"");for(const i in n)i==="display"&&(r=!0),ju(u,i,n[i])}else if(s){if(t!==n){const i=u[Fd];i&&(n+=";"+i),u.cssText=n,r=Id.test(n)}}else t&&e.removeAttribute("style");rr in e&&(e[rr]=r?u.display:"",e[wc]&&(u.display="none"))}const ho=/\s*!important$/;function ju(e,t,n){if(G(n))n.forEach(u=>ju(e,t,u));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const u=Td(e,t);ho.test(n)?e.setProperty(Vt(u),n.replace(ho,""),"important"):e[u]=n}}const po=["Webkit","Moz","ms"],Xr={};function Td(e,t){const n=Xr[t];if(n)return n;let u=Ut(t);if(u!=="filter"&&u in e)return Xr[t]=u;u=ka(u);for(let s=0;s<po.length;s++){const r=po[s]+u;if(r in e)return Xr[t]=r}return t}const bo="http://www.w3.org/1999/xlink";function go(e,t,n,u,s,r=$0(t)){u&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(bo,t.slice(6,t.length)):e.setAttributeNS(bo,t,n):n==null||r&&!Aa(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Wt(n)?String(n):n)}function mo(e,t,n,u,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?yc(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(o!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const o=typeof e[t];o==="boolean"?n=Aa(n):n==null&&o==="string"?(n="",i=!0):o==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(s||t)}function dn(e,t,n,u){e.addEventListener(t,n,u)}function Md(e,t,n,u){e.removeEventListener(t,n,u)}const _o=Symbol("_vei");function Od(e,t,n,u,s=null){const r=e[_o]||(e[_o]={}),i=r[t];if(u&&i)i.value=u;else{const[o,a]=Pd(t);if(u){const c=r[t]=Bd(u,s);dn(e,o,c,a)}else i&&(Md(e,o,i,a),r[t]=void 0)}}const xo=/(?:Once|Passive|Capture)$/;function Pd(e){let t;if(xo.test(e)){t={};let u;for(;u=e.match(xo);)e=e.slice(0,e.length-u[0].length),t[u[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Vt(e.slice(2)),t]}let Qr=0;const $d=Promise.resolve(),Ld=()=>Qr||($d.then(()=>Qr=0),Qr=Date.now());function Bd(e,t){const n=u=>{if(!u._vts)u._vts=Date.now();else if(u._vts<=n.attached)return;xt(Nd(u,n.value),t,5,[u])};return n.value=e,n.attached=Ld(),n}function Nd(e,t){if(G(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(u=>s=>!s._stopped&&u&&u(s))}else return t}const yo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,qd=(e,t,n,u,s,r)=>{const i=s==="svg";t==="class"?Sd(e,u,i):t==="style"?Rd(e,n,u):mr(t)?Vs(t)||Od(e,t,n,u,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jd(e,t,u,i))?(mo(e,t,u),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&go(e,t,u,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!be(u))?mo(e,Ut(t),u,r,t):(t==="true-value"?e._trueValue=u:t==="false-value"&&(e._falseValue=u),go(e,t,u,i))};function jd(e,t,n,u){if(u)return!!(t==="innerHTML"||t==="textContent"||t in e&&yo(t)&&X(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return yo(t)&&be(n)?!1:t in e}const wo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return G(t)?n=>Lu(t,n):t};function Ud(e){e.target.composing=!0}function vo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Yr=Symbol("_assign");function ko(e,t,n){return t&&(e=e.trim()),n&&(e=Zs(e)),e}const Uu={created(e,{modifiers:{lazy:t,trim:n,number:u}},s){e[Yr]=wo(s);const r=u||s.props&&s.props.type==="number";dn(e,t?"change":"input",i=>{i.target.composing||e[Yr](ko(e.value,n,r))}),(n||r)&&dn(e,"change",()=>{e.value=ko(e.value,n,r)}),t||(dn(e,"compositionstart",Ud),dn(e,"compositionend",vo),dn(e,"change",vo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:u,trim:s,number:r}},i){if(e[Yr]=wo(i),e.composing)return;const o=(r||e.type==="number")&&!/^0\d/.test(e.value)?Zs(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(u&&t===n||s&&e.value.trim()===a)||(e.value=a))}},zd=["ctrl","shift","alt","meta"],Hd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>zd.some(n=>e[`${n}Key`]&&!t.includes(n))},Wd=(e,t)=>{const n=e._withMods||(e._withMods={}),u=t.join(".");return n[u]||(n[u]=((s,...r)=>{for(let i=0;i<t.length;i++){const o=Hd[t[i]];if(o&&o(s,t))return}return e(s,...r)}))},Vd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Kd=(e,t)=>{const n=e._withKeys||(e._withKeys={}),u=t.join(".");return n[u]||(n[u]=(s=>{if(!("key"in s))return;const r=Vt(s.key);if(t.some(i=>i===r||Vd[i]===r))return e(s)}))},Jd=Ie({patchProp:qd},Ed);let Co;function Zd(){return Co||(Co=rd(Jd))}const Gd=((...e)=>{const t=Zd().createApp(...e),{mount:n}=t;return t.mount=u=>{const s=Qd(u);if(!s)return;const r=t._component;!X(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=n(s,!1,Xd(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},t});function Xd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Qd(e){return be(e)?document.querySelector(e):e}const mu={en:{title:"VibeMarkdown",settings:"Settings",chat:"AI Assistant",editor:"Editor",preview:"Preview",send:"Send",clear:"Clear Chat",placeholder:"Ask AI...",save:"Save",cancel:"Cancel",apiKey:"API Key",apiUrl:"API URL",model:"Model",settingsTitle:"AI Configuration",noKeyWarning:"Please configure API Key in settings first.",viewEditor:"Editor Only",viewSplit:"Split View",viewPreview:"Preview Only",toggleChat:"Toggle Chat",selectionContext:"Selected Context"},zh:{title:"VibeMarkdown",settings:"",chat:"AI ",editor:"",preview:"",send:"",clear:"",placeholder:" AI...",save:"",cancel:"",apiKey:"API Key",apiUrl:"API URL",model:"",settingsTitle:"AI ",noKeyWarning:" API Key",viewEditor:"",viewSplit:"",viewPreview:"",toggleChat:"",selectionContext:""}},Yd={class:"h-14 border-b border-gray-700 flex items-center justify-between px-4 bg-gray-800 shrink-0 z-40 relative"},eh={class:"flex items-center gap-2"},th={class:"font-bold text-lg tracking-wide hidden sm:block"},nh={class:"flex bg-gray-900 rounded-lg p-1 border border-gray-700"},uh=["title"],rh=["title"],sh=["title"],ih={class:"flex items-center gap-3"},oh=["title"],ah={class:"material-icons text-sm"},ch=["title"],lh=Dn({__name:"AppHeader",props:{currentLang:{},viewMode:{},showChat:{type:Boolean}},emits:["update:viewMode","update:showChat","toggleLanguage","openSettings"],setup(e,{emit:t}){const n=e,u=t,s=_t(()=>mu[n.currentLang]);return(r,i)=>(xe(),ke("header",Yd,[N("div",eh,[i[6]||(i[6]=N("span",{class:"material-icons text-purple-400"},"edit_note",-1)),N("h1",th,ye(s.value.title),1)]),N("div",nh,[N("button",{class:et(["p-1.5 rounded transition-colors",e.viewMode==="editor"?"bg-gray-700 text-purple-400":"text-gray-400 hover:text-gray-200"]),title:s.value.viewEditor,onClick:i[0]||(i[0]=o=>u("update:viewMode","editor"))},[...i[7]||(i[7]=[N("span",{class:"material-icons text-sm"},"edit",-1)])],10,uh),N("button",{class:et(["p-1.5 rounded transition-colors",e.viewMode==="split"?"bg-gray-700 text-purple-400":"text-gray-400 hover:text-gray-200"]),title:s.value.viewSplit,onClick:i[1]||(i[1]=o=>u("update:viewMode","split"))},[...i[8]||(i[8]=[N("span",{class:"material-icons text-sm"},"vertical_split",-1)])],10,rh),N("button",{class:et(["p-1.5 rounded transition-colors",e.viewMode==="preview"?"bg-gray-700 text-purple-400":"text-gray-400 hover:text-gray-200"]),title:s.value.viewPreview,onClick:i[2]||(i[2]=o=>u("update:viewMode","preview"))},[...i[9]||(i[9]=[N("span",{class:"material-icons text-sm"},"visibility",-1)])],10,sh)]),N("div",ih,[N("button",{class:et(["p-2 rounded-full transition-colors",e.showChat?"text-purple-400 bg-gray-700":"text-gray-400 hover:bg-gray-700"]),title:s.value.toggleChat,onClick:i[3]||(i[3]=o=>u("update:showChat",!e.showChat))},[...i[10]||(i[10]=[N("span",{class:"material-icons text-sm"},"chat",-1)])],10,oh),N("button",{class:"p-2 hover:bg-gray-700 rounded-full transition-colors",title:"Switch Language",onClick:i[4]||(i[4]=o=>u("toggleLanguage"))},[N("span",ah,ye(e.currentLang==="en"?"language":"translate"),1)]),N("button",{class:"p-2 hover:bg-gray-700 rounded-full transition-colors",title:s.value.settings,onClick:i[5]||(i[5]=o=>u("openSettings"))},[...i[11]||(i[11]=[N("span",{class:"material-icons"},"settings",-1)])],8,ch)])]))}}),fh={class:"flex flex-col border-r border-gray-700 min-w-0 h-full"},dh={class:"h-8 bg-gray-800 border-b border-gray-700 flex items-center px-3 text-xs text-gray-400 uppercase tracking-wider shrink-0"},hh={class:"flex-1 flex relative overflow-hidden"},ph={class:"flex-1 relative"},bh=["innerHTML"],gh=["value"],mh=Dn({__name:"MarkdownEditor",props:{modelValue:{},currentLang:{},diffHighlights:{}},emits:["update:modelValue","selectionChange"],setup(e,{emit:t}){const n=e,u=t,s=_t(()=>mu[n.currentLang]),r=pe(null),i=pe(null),o=pe(null),a=pe(null),c=_t(()=>n.modelValue.split(`
`).length),l=p=>{const b=p.target;i.value&&(i.value.scrollTop=b.scrollTop),o.value&&(o.value.scrollTop=b.scrollTop)},f=()=>{if(!r.value)return;const p=r.value.selectionStart,b=r.value.selectionEnd;a.value={start:p,end:b},p!==b?u("selectionChange",n.modelValue.substring(p,b)):u("selectionChange","")},h=p=>p.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"').replace(/'/g,"&#039;"),d=_t(()=>{const b=n.modelValue.split(`
`),x=n.diffHighlights??[],v=a.value;let m=0,k="";return b.forEach((y,E)=>{const C=y.length,D=m,O=E===b.length-1,$=D+C+(O?0:1);let L=!1;x.length>0&&(L=x.some(Y=>Y.start===Y.end?O?Y.start>=D&&Y.start<=$:Y.start>=D&&Y.start<$:Math.max(D,Y.start)<Math.min($,Y.end)));let U=!1;v&&(v.start===v.end?O?U=v.start>=D&&v.start<=$:U=v.start>=D&&v.start<$:U=Math.max(D,v.start)<Math.min($,v.end));const W=["px-4","whitespace-pre-wrap","break-words"];L&&W.push("bg-green-500/20"),U&&W.push("bg-blue-500/40");const ee=h(y)||"<br>";k+=`<div class="${W.join(" ")}">${ee}</div>`,m=$}),k});return(p,b)=>(xe(),ke("div",fh,[N("div",dh,ye(s.value.editor),1),N("div",hh,[N("div",{ref_key:"lineNumbersRef",ref:i,class:"w-12 bg-gray-900 border-r border-gray-800 text-right pr-2 text-gray-600 font-mono text-sm select-none overflow-hidden"},[(xe(!0),ke(Ve,null,ws(c.value,x=>(xe(),ke("div",{key:x,class:"h-6 flex items-center"},ye(x),1))),128))],512),N("div",ph,[N("div",{ref_key:"backdropRef",ref:o,class:"absolute inset-0 font-mono text-sm leading-6 pointer-events-none text-transparent bg-gray-900 overflow-hidden",innerHTML:d.value},null,8,bh),N("textarea",{ref_key:"editorRef",ref:r,value:e.modelValue,class:"absolute inset-0 w-full h-full bg-transparent text-gray-200 outline-none resize-none font-mono text-sm leading-6",style:{"caret-color":"white"},spellcheck:"false",onInput:b[0]||(b[0]=x=>u("update:modelValue",x.target.value)),onScroll:l,onSelect:f,onKeyup:f,onMouseup:f},null,40,gh)])])]))}}),Ao={};function _h(e){let t=Ao[e];if(t)return t;t=Ao[e]=[];for(let n=0;n<128;n++){const u=String.fromCharCode(n);t.push(u)}for(let n=0;n<e.length;n++){const u=e.charCodeAt(n);t[u]="%"+("0"+u.toString(16).toUpperCase()).slice(-2)}return t}function An(e,t){typeof t!="string"&&(t=An.defaultChars);const n=_h(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(u){let s="";for(let r=0,i=u.length;r<i;r+=3){const o=parseInt(u.slice(r+1,r+3),16);if(o<128){s+=n[o];continue}if((o&224)===192&&r+3<i){const a=parseInt(u.slice(r+4,r+6),16);if((a&192)===128){const c=o<<6&1984|a&63;c<128?s+="":s+=String.fromCharCode(c),r+=3;continue}}if((o&240)===224&&r+6<i){const a=parseInt(u.slice(r+4,r+6),16),c=parseInt(u.slice(r+7,r+9),16);if((a&192)===128&&(c&192)===128){const l=o<<12&61440|a<<6&4032|c&63;l<2048||l>=55296&&l<=57343?s+="":s+=String.fromCharCode(l),r+=6;continue}}if((o&248)===240&&r+9<i){const a=parseInt(u.slice(r+4,r+6),16),c=parseInt(u.slice(r+7,r+9),16),l=parseInt(u.slice(r+10,r+12),16);if((a&192)===128&&(c&192)===128&&(l&192)===128){let f=o<<18&1835008|a<<12&258048|c<<6&4032|l&63;f<65536||f>1114111?s+="":(f-=65536,s+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),r+=9;continue}}s+=""}return s})}An.defaultChars=";/?:@&=+$,#";An.componentChars="";const Eo={};function xh(e){let t=Eo[e];if(t)return t;t=Eo[e]=[];for(let n=0;n<128;n++){const u=String.fromCharCode(n);/^[0-9a-z]$/i.test(u)?t.push(u):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function _u(e,t,n){typeof t!="string"&&(n=t,t=_u.defaultChars),typeof n>"u"&&(n=!0);const u=xh(t);let s="";for(let r=0,i=e.length;r<i;r++){const o=e.charCodeAt(r);if(n&&o===37&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){s+=e.slice(r,r+3),r+=2;continue}if(o<128){s+=u[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&r+1<i){const a=e.charCodeAt(r+1);if(a>=56320&&a<=57343){s+=encodeURIComponent(e[r]+e[r+1]),r++;continue}}s+="%EF%BF%BD";continue}s+=encodeURIComponent(e[r])}return s}_u.defaultChars=";/?:@&=+$,-_.!~*'()#";_u.componentChars="-_.!~*'()";function fi(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function sr(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const yh=/^([a-z0-9.+-]+:)/i,wh=/:[0-9]*$/,vh=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,kh=["<",">",'"',"`"," ","\r",`
`,"	"],Ch=["{","}","|","\\","^","`"].concat(kh),Ah=["'"].concat(Ch),Do=["%","/","?",";","#"].concat(Ah),So=["/","?","#"],Eh=255,Fo=/^[+a-z0-9A-Z_-]{0,63}$/,Dh=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Io={javascript:!0,"javascript:":!0},Ro={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function di(e,t){if(e&&e instanceof sr)return e;const n=new sr;return n.parse(e,t),n}sr.prototype.parse=function(e,t){let n,u,s,r=e;if(r=r.trim(),!t&&e.split("#").length===1){const c=vh.exec(r);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let i=yh.exec(r);if(i&&(i=i[0],n=i.toLowerCase(),this.protocol=i,r=r.substr(i.length)),(t||i||r.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=r.substr(0,2)==="//",s&&!(i&&Io[i])&&(r=r.substr(2),this.slashes=!0)),!Io[i]&&(s||i&&!Ro[i])){let c=-1;for(let p=0;p<So.length;p++)u=r.indexOf(So[p]),u!==-1&&(c===-1||u<c)&&(c=u);let l,f;c===-1?f=r.lastIndexOf("@"):f=r.lastIndexOf("@",c),f!==-1&&(l=r.slice(0,f),r=r.slice(f+1),this.auth=l),c=-1;for(let p=0;p<Do.length;p++)u=r.indexOf(Do[p]),u!==-1&&(c===-1||u<c)&&(c=u);c===-1&&(c=r.length),r[c-1]===":"&&c--;const h=r.slice(0,c);r=r.slice(c),this.parseHost(h),this.hostname=this.hostname||"";const d=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!d){const p=this.hostname.split(/\./);for(let b=0,x=p.length;b<x;b++){const v=p[b];if(v&&!v.match(Fo)){let m="";for(let k=0,y=v.length;k<y;k++)v.charCodeAt(k)>127?m+="x":m+=v[k];if(!m.match(Fo)){const k=p.slice(0,b),y=p.slice(b+1),E=v.match(Dh);E&&(k.push(E[1]),y.unshift(E[2])),y.length&&(r=y.join(".")+r),this.hostname=k.join(".");break}}}}this.hostname.length>Eh&&(this.hostname=""),d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=r.indexOf("#");o!==-1&&(this.hash=r.substr(o),r=r.slice(0,o));const a=r.indexOf("?");return a!==-1&&(this.search=r.substr(a),r=r.slice(0,a)),r&&(this.pathname=r),Ro[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};sr.prototype.parseHost=function(e){let t=wh.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Sh=Object.freeze(Object.defineProperty({__proto__:null,decode:An,encode:_u,format:fi,parse:di},Symbol.toStringTag,{value:"Module"})),vc=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kc=/[\0-\x1F\x7F-\x9F]/,Fh=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,hi=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Cc=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Ac=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Ih=Object.freeze(Object.defineProperty({__proto__:null,Any:vc,Cc:kc,Cf:Fh,P:hi,S:Cc,Z:Ac},Symbol.toStringTag,{value:"Module"})),Rh=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Th=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var es;const Mh=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Oh=(es=String.fromCodePoint)!==null&&es!==void 0?es:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Ph(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Mh.get(e))!==null&&t!==void 0?t:e}var Ce;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ce||(Ce={}));const $h=32;var qt;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(qt||(qt={}));function Ss(e){return e>=Ce.ZERO&&e<=Ce.NINE}function Lh(e){return e>=Ce.UPPER_A&&e<=Ce.UPPER_F||e>=Ce.LOWER_A&&e<=Ce.LOWER_F}function Bh(e){return e>=Ce.UPPER_A&&e<=Ce.UPPER_Z||e>=Ce.LOWER_A&&e<=Ce.LOWER_Z||Ss(e)}function Nh(e){return e===Ce.EQUALS||Bh(e)}var we;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(we||(we={}));var Nt;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Nt||(Nt={}));class qh{constructor(t,n,u){this.decodeTree=t,this.emitCodePoint=n,this.errors=u,this.state=we.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Nt.Strict}startEntity(t){this.decodeMode=t,this.state=we.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case we.EntityStart:return t.charCodeAt(n)===Ce.NUM?(this.state=we.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=we.NamedEntity,this.stateNamedEntity(t,n));case we.NumericStart:return this.stateNumericStart(t,n);case we.NumericDecimal:return this.stateNumericDecimal(t,n);case we.NumericHex:return this.stateNumericHex(t,n);case we.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|$h)===Ce.LOWER_X?(this.state=we.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=we.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,u,s){if(n!==u){const r=u-n;this.result=this.result*Math.pow(s,r)+parseInt(t.substr(n,r),s),this.consumed+=r}}stateNumericHex(t,n){const u=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Ss(s)||Lh(s))n+=1;else return this.addToNumericResult(t,u,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,u,n,16),-1}stateNumericDecimal(t,n){const u=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Ss(s))n+=1;else return this.addToNumericResult(t,u,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,u,n,10),-1}emitNumericEntity(t,n){var u;if(this.consumed<=n)return(u=this.errors)===null||u===void 0||u.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ce.SEMI)this.consumed+=1;else if(this.decodeMode===Nt.Strict)return 0;return this.emitCodePoint(Ph(this.result),this.consumed),this.errors&&(t!==Ce.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:u}=this;let s=u[this.treeIndex],r=(s&qt.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const i=t.charCodeAt(n);if(this.treeIndex=jh(u,s,this.treeIndex+Math.max(1,r),i),this.treeIndex<0)return this.result===0||this.decodeMode===Nt.Attribute&&(r===0||Nh(i))?0:this.emitNotTerminatedNamedEntity();if(s=u[this.treeIndex],r=(s&qt.VALUE_LENGTH)>>14,r!==0){if(i===Ce.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==Nt.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:u}=this,s=(u[n]&qt.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,u){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~qt.VALUE_LENGTH:s[t+1],u),n===3&&this.emitCodePoint(s[t+2],u),u}end(){var t;switch(this.state){case we.NamedEntity:return this.result!==0&&(this.decodeMode!==Nt.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case we.NumericDecimal:return this.emitNumericEntity(0,2);case we.NumericHex:return this.emitNumericEntity(0,3);case we.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case we.EntityStart:return 0}}}function Ec(e){let t="";const n=new qh(e,u=>t+=Oh(u));return function(s,r){let i=0,o=0;for(;(o=s.indexOf("&",o))>=0;){t+=s.slice(i,o),n.startEntity(r);const c=n.write(s,o+1);if(c<0){i=o+n.end();break}i=o+c,o=c===0?i+1:i}const a=t+s.slice(i);return t="",a}}function jh(e,t,n,u){const s=(t&qt.BRANCH_LENGTH)>>7,r=t&qt.JUMP_TABLE;if(s===0)return r!==0&&u===r?n:-1;if(r){const a=u-r;return a<0||a>=s?-1:e[n+a]-1}let i=n,o=i+s-1;for(;i<=o;){const a=i+o>>>1,c=e[a];if(c<u)i=a+1;else if(c>u)o=a-1;else return e[a+s]}return-1}const Uh=Ec(Rh);Ec(Th);function Dc(e,t=Nt.Legacy){return Uh(e,t)}function zh(e){return Object.prototype.toString.call(e)}function pi(e){return zh(e)==="[object String]"}const Hh=Object.prototype.hasOwnProperty;function Wh(e,t){return Hh.call(e,t)}function Sr(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(u){e[u]=n[u]})}}),e}function Sc(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function bi(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function ir(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Fc=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Vh=/&([a-z#][a-z0-9]{1,31});/gi,Kh=new RegExp(Fc.source+"|"+Vh.source,"gi"),Jh=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Zh(e,t){if(t.charCodeAt(0)===35&&Jh.test(t)){const u=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return bi(u)?ir(u):e}const n=Dc(e);return n!==e?n:e}function Gh(e){return e.indexOf("\\")<0?e:e.replace(Fc,"$1")}function En(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Kh,function(t,n,u){return n||Zh(t,u)})}const Xh=/[&<>"]/,Qh=/[&<>"]/g,Yh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function e1(e){return Yh[e]}function Ht(e){return Xh.test(e)?e.replace(Qh,e1):e}const t1=/[.?*+^$[\]\\(){}|-]/g;function n1(e){return e.replace(t1,"\\$&")}function fe(e){switch(e){case 9:case 32:return!0}return!1}function lu(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function fu(e){return hi.test(e)||Cc.test(e)}function du(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Fr(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const u1={mdurl:Sh,ucmicro:Ih},r1=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Sc,assign:Sr,escapeHtml:Ht,escapeRE:n1,fromCodePoint:ir,has:Wh,isMdAsciiPunct:du,isPunctChar:fu,isSpace:fe,isString:pi,isValidEntityCode:bi,isWhiteSpace:lu,lib:u1,normalizeReference:Fr,unescapeAll:En,unescapeMd:Gh},Symbol.toStringTag,{value:"Module"}));function s1(e,t,n){let u,s,r,i;const o=e.posMax,a=e.pos;for(e.pos=t+1,u=1;e.pos<o;){if(r=e.src.charCodeAt(e.pos),r===93&&(u--,u===0)){s=!0;break}if(i=e.pos,e.md.inline.skipToken(e),r===91){if(i===e.pos-1)u++;else if(n)return e.pos=a,-1}}let c=-1;return s&&(c=e.pos),e.pos=a,c}function i1(e,t,n){let u,s=t;const r={ok:!1,pos:0,str:""};if(e.charCodeAt(s)===60){for(s++;s<n;){if(u=e.charCodeAt(s),u===10||u===60)return r;if(u===62)return r.pos=s+1,r.str=En(e.slice(t+1,s)),r.ok=!0,r;if(u===92&&s+1<n){s+=2;continue}s++}return r}let i=0;for(;s<n&&(u=e.charCodeAt(s),!(u===32||u<32||u===127));){if(u===92&&s+1<n){if(e.charCodeAt(s+1)===32)break;s+=2;continue}if(u===40&&(i++,i>32))return r;if(u===41){if(i===0)break;i--}s++}return t===s||i!==0||(r.str=En(e.slice(t,s)),r.pos=s,r.ok=!0),r}function o1(e,t,n,u){let s,r=t;const i={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(u)i.str=u.str,i.marker=u.marker;else{if(r>=n)return i;let o=e.charCodeAt(r);if(o!==34&&o!==39&&o!==40)return i;t++,r++,o===40&&(o=41),i.marker=o}for(;r<n;){if(s=e.charCodeAt(r),s===i.marker)return i.pos=r+1,i.str+=En(e.slice(t,r)),i.ok=!0,i;if(s===40&&i.marker===41)return i;s===92&&r+1<n&&r++,r++}return i.can_continue=!0,i.str+=En(e.slice(t,r)),i}const a1=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:i1,parseLinkLabel:s1,parseLinkTitle:o1},Symbol.toStringTag,{value:"Module"})),yt={};yt.code_inline=function(e,t,n,u,s){const r=e[t];return"<code"+s.renderAttrs(r)+">"+Ht(r.content)+"</code>"};yt.code_block=function(e,t,n,u,s){const r=e[t];return"<pre"+s.renderAttrs(r)+"><code>"+Ht(e[t].content)+`</code></pre>
`};yt.fence=function(e,t,n,u,s){const r=e[t],i=r.info?En(r.info).trim():"";let o="",a="";if(i){const l=i.split(/(\s+)/g);o=l[0],a=l.slice(2).join("")}let c;if(n.highlight?c=n.highlight(r.content,o,a)||Ht(r.content):c=Ht(r.content),c.indexOf("<pre")===0)return c+`
`;if(i){const l=r.attrIndex("class"),f=r.attrs?r.attrs.slice():[];l<0?f.push(["class",n.langPrefix+o]):(f[l]=f[l].slice(),f[l][1]+=" "+n.langPrefix+o);const h={attrs:f};return`<pre><code${s.renderAttrs(h)}>${c}</code></pre>
`}return`<pre><code${s.renderAttrs(r)}>${c}</code></pre>
`};yt.image=function(e,t,n,u,s){const r=e[t];return r.attrs[r.attrIndex("alt")][1]=s.renderInlineAsText(r.children,n,u),s.renderToken(e,t,n)};yt.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};yt.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};yt.text=function(e,t){return Ht(e[t].content)};yt.html_block=function(e,t){return e[t].content};yt.html_inline=function(e,t){return e[t].content};function Sn(){this.rules=Sr({},yt)}Sn.prototype.renderAttrs=function(t){let n,u,s;if(!t.attrs)return"";for(s="",n=0,u=t.attrs.length;n<u;n++)s+=" "+Ht(t.attrs[n][0])+'="'+Ht(t.attrs[n][1])+'"';return s};Sn.prototype.renderToken=function(t,n,u){const s=t[n];let r="";if(s.hidden)return"";s.block&&s.nesting!==-1&&n&&t[n-1].hidden&&(r+=`
`),r+=(s.nesting===-1?"</":"<")+s.tag,r+=this.renderAttrs(s),s.nesting===0&&u.xhtmlOut&&(r+=" /");let i=!1;if(s.block&&(i=!0,s.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===s.tag)&&(i=!1)}return r+=i?`>
`:">",r};Sn.prototype.renderInline=function(e,t,n){let u="";const s=this.rules;for(let r=0,i=e.length;r<i;r++){const o=e[r].type;typeof s[o]<"u"?u+=s[o](e,r,t,n,this):u+=this.renderToken(e,r,t)}return u};Sn.prototype.renderInlineAsText=function(e,t,n){let u="";for(let s=0,r=e.length;s<r;s++)switch(e[s].type){case"text":u+=e[s].content;break;case"image":u+=this.renderInlineAsText(e[s].children,t,n);break;case"html_inline":case"html_block":u+=e[s].content;break;case"softbreak":case"hardbreak":u+=`
`;break}return u};Sn.prototype.render=function(e,t,n){let u="";const s=this.rules;for(let r=0,i=e.length;r<i;r++){const o=e[r].type;o==="inline"?u+=this.renderInline(e[r].children,t,n):typeof s[o]<"u"?u+=s[o](e,r,t,n,this):u+=this.renderToken(e,r,t,n)}return u};function qe(){this.__rules__=[],this.__cache__=null}qe.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};qe.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(u){t.indexOf(u)<0&&t.push(u)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(u){u.enabled&&(n&&u.alt.indexOf(n)<0||e.__cache__[n].push(u.fn))})})};qe.prototype.at=function(e,t,n){const u=this.__find__(e),s=n||{};if(u===-1)throw new Error("Parser rule not found: "+e);this.__rules__[u].fn=t,this.__rules__[u].alt=s.alt||[],this.__cache__=null};qe.prototype.before=function(e,t,n,u){const s=this.__find__(e),r=u||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null};qe.prototype.after=function(e,t,n,u){const s=this.__find__(e),r=u||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null};qe.prototype.push=function(e,t,n){const u=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:u.alt||[]}),this.__cache__=null};qe.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(u){const s=this.__find__(u);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+u)}this.__rules__[s].enabled=!0,n.push(u)},this),this.__cache__=null,n};qe.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};qe.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(u){const s=this.__find__(u);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+u)}this.__rules__[s].enabled=!1,n.push(u)},this),this.__cache__=null,n};qe.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function ut(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}ut.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let u=0,s=n.length;u<s;u++)if(n[u][0]===t)return u;return-1};ut.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};ut.prototype.attrSet=function(t,n){const u=this.attrIndex(t),s=[t,n];u<0?this.attrPush(s):this.attrs[u]=s};ut.prototype.attrGet=function(t){const n=this.attrIndex(t);let u=null;return n>=0&&(u=this.attrs[n][1]),u};ut.prototype.attrJoin=function(t,n){const u=this.attrIndex(t);u<0?this.attrPush([t,n]):this.attrs[u][1]=this.attrs[u][1]+" "+n};function Ic(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Ic.prototype.Token=ut;const c1=/\r\n?|\n/g,l1=/\0/g;function f1(e){let t;t=e.src.replace(c1,`
`),t=t.replace(l1,""),e.src=t}function d1(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function h1(e){const t=e.tokens;for(let n=0,u=t.length;n<u;n++){const s=t[n];s.type==="inline"&&e.md.inline.parse(s.content,e.md,e.env,s.children)}}function p1(e){return/^<a[>\s]/i.test(e)}function b1(e){return/^<\/a\s*>/i.test(e)}function g1(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,u=t.length;n<u;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let s=t[n].children,r=0;for(let i=s.length-1;i>=0;i--){const o=s[i];if(o.type==="link_close"){for(i--;s[i].level!==o.level&&s[i].type!=="link_open";)i--;continue}if(o.type==="html_inline"&&(p1(o.content)&&r>0&&r--,b1(o.content)&&r++),!(r>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const a=o.content;let c=e.md.linkify.match(a);const l=[];let f=o.level,h=0;c.length>0&&c[0].index===0&&i>0&&s[i-1].type==="text_special"&&(c=c.slice(1));for(let d=0;d<c.length;d++){const p=c[d].url,b=e.md.normalizeLink(p);if(!e.md.validateLink(b))continue;let x=c[d].text;c[d].schema?c[d].schema==="mailto:"&&!/^mailto:/i.test(x)?x=e.md.normalizeLinkText("mailto:"+x).replace(/^mailto:/,""):x=e.md.normalizeLinkText(x):x=e.md.normalizeLinkText("http://"+x).replace(/^http:\/\//,"");const v=c[d].index;if(v>h){const E=new e.Token("text","",0);E.content=a.slice(h,v),E.level=f,l.push(E)}const m=new e.Token("link_open","a",1);m.attrs=[["href",b]],m.level=f++,m.markup="linkify",m.info="auto",l.push(m);const k=new e.Token("text","",0);k.content=x,k.level=f,l.push(k);const y=new e.Token("link_close","a",-1);y.level=--f,y.markup="linkify",y.info="auto",l.push(y),h=c[d].lastIndex}if(h<a.length){const d=new e.Token("text","",0);d.content=a.slice(h),d.level=f,l.push(d)}t[n].children=s=Sc(s,i,l)}}}}const Rc=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,m1=/\((c|tm|r)\)/i,_1=/\((c|tm|r)\)/ig,x1={c:"",r:"",tm:""};function y1(e,t){return x1[t.toLowerCase()]}function w1(e){let t=0;for(let n=e.length-1;n>=0;n--){const u=e[n];u.type==="text"&&!t&&(u.content=u.content.replace(_1,y1)),u.type==="link_open"&&u.info==="auto"&&t--,u.type==="link_close"&&u.info==="auto"&&t++}}function v1(e){let t=0;for(let n=e.length-1;n>=0;n--){const u=e[n];u.type==="text"&&!t&&Rc.test(u.content)&&(u.content=u.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),u.type==="link_open"&&u.info==="auto"&&t--,u.type==="link_close"&&u.info==="auto"&&t++}}function k1(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(m1.test(e.tokens[t].content)&&w1(e.tokens[t].children),Rc.test(e.tokens[t].content)&&v1(e.tokens[t].children))}const C1=/['"]/,To=/['"]/g,Mo="";function Su(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function A1(e,t){let n;const u=[];for(let s=0;s<e.length;s++){const r=e[s],i=e[s].level;for(n=u.length-1;n>=0&&!(u[n].level<=i);n--);if(u.length=n+1,r.type!=="text")continue;let o=r.content,a=0,c=o.length;e:for(;a<c;){To.lastIndex=a;const l=To.exec(o);if(!l)break;let f=!0,h=!0;a=l.index+1;const d=l[0]==="'";let p=32;if(l.index-1>=0)p=o.charCodeAt(l.index-1);else for(n=s-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(a<c)b=o.charCodeAt(a);else for(n=s+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const x=du(p)||fu(String.fromCharCode(p)),v=du(b)||fu(String.fromCharCode(b)),m=lu(p),k=lu(b);if(k?f=!1:v&&(m||x||(f=!1)),m?h=!1:x&&(k||v||(h=!1)),b===34&&l[0]==='"'&&p>=48&&p<=57&&(h=f=!1),f&&h&&(f=x,h=v),!f&&!h){d&&(r.content=Su(r.content,l.index,Mo));continue}if(h)for(n=u.length-1;n>=0;n--){let y=u[n];if(u[n].level<i)break;if(y.single===d&&u[n].level===i){y=u[n];let E,C;d?(E=t.md.options.quotes[2],C=t.md.options.quotes[3]):(E=t.md.options.quotes[0],C=t.md.options.quotes[1]),r.content=Su(r.content,l.index,C),e[y.token].content=Su(e[y.token].content,y.pos,E),a+=C.length-1,y.token===s&&(a+=E.length-1),o=r.content,c=o.length,u.length=n;continue e}}f?u.push({token:s,pos:l.index,single:d,level:i}):h&&d&&(r.content=Su(r.content,l.index,Mo))}}}function E1(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!C1.test(e.tokens[t].content)||A1(e.tokens[t].children,e)}function D1(e){let t,n;const u=e.tokens,s=u.length;for(let r=0;r<s;r++){if(u[r].type!=="inline")continue;const i=u[r].children,o=i.length;for(t=0;t<o;t++)i[t].type==="text_special"&&(i[t].type="text");for(t=n=0;t<o;t++)i[t].type==="text"&&t+1<o&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}}const ts=[["normalize",f1],["block",d1],["inline",h1],["linkify",g1],["replacements",k1],["smartquotes",E1],["text_join",D1]];function gi(){this.ruler=new qe;for(let e=0;e<ts.length;e++)this.ruler.push(ts[e][0],ts[e][1])}gi.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,u=t.length;n<u;n++)t[n](e)};gi.prototype.State=Ic;function wt(e,t,n,u){this.src=e,this.md=t,this.env=n,this.tokens=u,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let r=0,i=0,o=0,a=0,c=s.length,l=!1;i<c;i++){const f=s.charCodeAt(i);if(!l)if(fe(f)){o++,f===9?a+=4-a%4:a++;continue}else l=!0;(f===10||i===c-1)&&(f!==10&&i++,this.bMarks.push(r),this.eMarks.push(i),this.tShift.push(o),this.sCount.push(a),this.bsCount.push(0),l=!1,o=0,a=0,r=i+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}wt.prototype.push=function(e,t,n){const u=new ut(e,t,n);return u.block=!0,n<0&&this.level--,u.level=this.level,n>0&&this.level++,this.tokens.push(u),u};wt.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};wt.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};wt.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const u=this.src.charCodeAt(t);if(!fe(u))break}return t};wt.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!fe(this.src.charCodeAt(--t)))return t+1;return t};wt.prototype.skipChars=function(t,n){for(let u=this.src.length;t<u&&this.src.charCodeAt(t)===n;t++);return t};wt.prototype.skipCharsBack=function(t,n,u){if(t<=u)return t;for(;t>u;)if(n!==this.src.charCodeAt(--t))return t+1;return t};wt.prototype.getLines=function(t,n,u,s){if(t>=n)return"";const r=new Array(n-t);for(let i=0,o=t;o<n;o++,i++){let a=0;const c=this.bMarks[o];let l=c,f;for(o+1<n||s?f=this.eMarks[o]+1:f=this.eMarks[o];l<f&&a<u;){const h=this.src.charCodeAt(l);if(fe(h))h===9?a+=4-(a+this.bsCount[o])%4:a++;else if(l-c<this.tShift[o])a++;else break;l++}a>u?r[i]=new Array(a-u+1).join(" ")+this.src.slice(l,f):r[i]=this.src.slice(l,f)}return r.join("")};wt.prototype.Token=ut;const S1=65536;function ns(e,t){const n=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];return e.src.slice(n,u)}function Oo(e){const t=[],n=e.length;let u=0,s=e.charCodeAt(u),r=!1,i=0,o="";for(;u<n;)s===124&&(r?(o+=e.substring(i,u-1),i=u):(t.push(o+e.substring(i,u)),o="",i=u+1)),r=s===92,u++,s=e.charCodeAt(u);return t.push(o+e.substring(i)),t}function F1(e,t,n,u){if(t+2>n)return!1;let s=t+1;if(e.sCount[s]<e.blkIndent||e.sCount[s]-e.blkIndent>=4)return!1;let r=e.bMarks[s]+e.tShift[s];if(r>=e.eMarks[s])return!1;const i=e.src.charCodeAt(r++);if(i!==124&&i!==45&&i!==58||r>=e.eMarks[s])return!1;const o=e.src.charCodeAt(r++);if(o!==124&&o!==45&&o!==58&&!fe(o)||i===45&&fe(o))return!1;for(;r<e.eMarks[s];){const y=e.src.charCodeAt(r);if(y!==124&&y!==45&&y!==58&&!fe(y))return!1;r++}let a=ns(e,t+1),c=a.split("|");const l=[];for(let y=0;y<c.length;y++){const E=c[y].trim();if(!E){if(y===0||y===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(E))return!1;E.charCodeAt(E.length-1)===58?l.push(E.charCodeAt(0)===58?"center":"right"):E.charCodeAt(0)===58?l.push("left"):l.push("")}if(a=ns(e,t).trim(),a.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=Oo(a),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const f=c.length;if(f===0||f!==l.length)return!1;if(u)return!0;const h=e.parentType;e.parentType="table";const d=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),b=[t,0];p.map=b;const x=e.push("thead_open","thead",1);x.map=[t,t+1];const v=e.push("tr_open","tr",1);v.map=[t,t+1];for(let y=0;y<c.length;y++){const E=e.push("th_open","th",1);l[y]&&(E.attrs=[["style","text-align:"+l[y]]]);const C=e.push("inline","",0);C.content=c[y].trim(),C.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let m,k=0;for(s=t+2;s<n&&!(e.sCount[s]<e.blkIndent);s++){let y=!1;for(let C=0,D=d.length;C<D;C++)if(d[C](e,s,n,!0)){y=!0;break}if(y||(a=ns(e,s).trim(),!a)||e.sCount[s]-e.blkIndent>=4||(c=Oo(a),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),k+=f-c.length,k>S1))break;if(s===t+2){const C=e.push("tbody_open","tbody",1);C.map=m=[t+2,0]}const E=e.push("tr_open","tr",1);E.map=[s,s+1];for(let C=0;C<f;C++){const D=e.push("td_open","td",1);l[C]&&(D.attrs=[["style","text-align:"+l[C]]]);const O=e.push("inline","",0);O.content=c[C]?c[C].trim():"",O.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return m&&(e.push("tbody_close","tbody",-1),m[1]=s),e.push("table_close","table",-1),b[1]=s,e.parentType=h,e.line=s,!0}function I1(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let u=t+1,s=u;for(;u<n;){if(e.isEmpty(u)){u++;continue}if(e.sCount[u]-e.blkIndent>=4){u++,s=u;continue}break}e.line=s;const r=e.push("code_block","code",0);return r.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,r.map=[t,e.line],!0}function R1(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||s+3>r)return!1;const i=e.src.charCodeAt(s);if(i!==126&&i!==96)return!1;let o=s;s=e.skipChars(s,i);let a=s-o;if(a<3)return!1;const c=e.src.slice(o,s),l=e.src.slice(s,r);if(i===96&&l.indexOf(String.fromCharCode(i))>=0)return!1;if(u)return!0;let f=t,h=!1;for(;f++,!(f>=n||(s=o=e.bMarks[f]+e.tShift[f],r=e.eMarks[f],s<r&&e.sCount[f]<e.blkIndent));)if(e.src.charCodeAt(s)===i&&!(e.sCount[f]-e.blkIndent>=4)&&(s=e.skipChars(s,i),!(s-o<a)&&(s=e.skipSpaces(s),!(s<r)))){h=!0;break}a=e.sCount[t],e.line=f+(h?1:0);const d=e.push("fence","code",0);return d.info=l,d.content=e.getLines(t+1,f,a,!0),d.markup=c,d.map=[t,e.line],!0}function T1(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];const i=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==62)return!1;if(u)return!0;const o=[],a=[],c=[],l=[],f=e.md.block.ruler.getRules("blockquote"),h=e.parentType;e.parentType="blockquote";let d=!1,p;for(p=t;p<n;p++){const k=e.sCount[p]<e.blkIndent;if(s=e.bMarks[p]+e.tShift[p],r=e.eMarks[p],s>=r)break;if(e.src.charCodeAt(s++)===62&&!k){let E=e.sCount[p]+1,C,D;e.src.charCodeAt(s)===32?(s++,E++,D=!1,C=!0):e.src.charCodeAt(s)===9?(C=!0,(e.bsCount[p]+E)%4===3?(s++,E++,D=!1):D=!0):C=!1;let O=E;for(o.push(e.bMarks[p]),e.bMarks[p]=s;s<r;){const $=e.src.charCodeAt(s);if(fe($))$===9?O+=4-(O+e.bsCount[p]+(D?1:0))%4:O++;else break;s++}d=s>=r,a.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(C?1:0),c.push(e.sCount[p]),e.sCount[p]=O-E,l.push(e.tShift[p]),e.tShift[p]=s-e.bMarks[p];continue}if(d)break;let y=!1;for(let E=0,C=f.length;E<C;E++)if(f[E](e,p,n,!0)){y=!0;break}if(y){e.lineMax=p,e.blkIndent!==0&&(o.push(e.bMarks[p]),a.push(e.bsCount[p]),l.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}o.push(e.bMarks[p]),a.push(e.bsCount[p]),l.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}const b=e.blkIndent;e.blkIndent=0;const x=e.push("blockquote_open","blockquote",1);x.markup=">";const v=[t,0];x.map=v,e.md.block.tokenize(e,t,p);const m=e.push("blockquote_close","blockquote",-1);m.markup=">",e.lineMax=i,e.parentType=h,v[1]=e.line;for(let k=0;k<l.length;k++)e.bMarks[k+t]=o[k],e.tShift[k+t]=l[k],e.sCount[k+t]=c[k],e.bsCount[k+t]=a[k];return e.blkIndent=b,!0}function M1(e,t,n,u){const s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==95)return!1;let o=1;for(;r<s;){const c=e.src.charCodeAt(r++);if(c!==i&&!fe(c))return!1;c===i&&o++}if(o<3)return!1;if(u)return!0;e.line=t+1;const a=e.push("hr","hr",0);return a.map=[t,e.line],a.markup=Array(o+1).join(String.fromCharCode(i)),!0}function Po(e,t){const n=e.eMarks[t];let u=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(u++);if(s!==42&&s!==45&&s!==43)return-1;if(u<n){const r=e.src.charCodeAt(u);if(!fe(r))return-1}return u}function $o(e,t){const n=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];let s=n;if(s+1>=u)return-1;let r=e.src.charCodeAt(s++);if(r<48||r>57)return-1;for(;;){if(s>=u)return-1;if(r=e.src.charCodeAt(s++),r>=48&&r<=57){if(s-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return s<u&&(r=e.src.charCodeAt(s),!fe(r))?-1:s}function O1(e,t){const n=e.level+2;for(let u=t+2,s=e.tokens.length-2;u<s;u++)e.tokens[u].level===n&&e.tokens[u].type==="paragraph_open"&&(e.tokens[u+2].hidden=!0,e.tokens[u].hidden=!0,u+=2)}function P1(e,t,n,u){let s,r,i,o,a=t,c=!0;if(e.sCount[a]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[a]-e.listIndent>=4&&e.sCount[a]<e.blkIndent)return!1;let l=!1;u&&e.parentType==="paragraph"&&e.sCount[a]>=e.blkIndent&&(l=!0);let f,h,d;if((d=$o(e,a))>=0){if(f=!0,i=e.bMarks[a]+e.tShift[a],h=Number(e.src.slice(i,d-1)),l&&h!==1)return!1}else if((d=Po(e,a))>=0)f=!1;else return!1;if(l&&e.skipSpaces(d)>=e.eMarks[a])return!1;if(u)return!0;const p=e.src.charCodeAt(d-1),b=e.tokens.length;f?(o=e.push("ordered_list_open","ol",1),h!==1&&(o.attrs=[["start",h]])):o=e.push("bullet_list_open","ul",1);const x=[a,0];o.map=x,o.markup=String.fromCharCode(p);let v=!1;const m=e.md.block.ruler.getRules("list"),k=e.parentType;for(e.parentType="list";a<n;){r=d,s=e.eMarks[a];const y=e.sCount[a]+d-(e.bMarks[a]+e.tShift[a]);let E=y;for(;r<s;){const he=e.src.charCodeAt(r);if(he===9)E+=4-(E+e.bsCount[a])%4;else if(he===32)E++;else break;r++}const C=r;let D;C>=s?D=1:D=E-y,D>4&&(D=1);const O=y+D;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(p);const $=[a,0];o.map=$,f&&(o.info=e.src.slice(i,d-1));const L=e.tight,U=e.tShift[a],W=e.sCount[a],ee=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=O,e.tight=!0,e.tShift[a]=C-e.bMarks[a],e.sCount[a]=E,C>=s&&e.isEmpty(a+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,a,n,!0),(!e.tight||v)&&(c=!1),v=e.line-a>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=ee,e.tShift[a]=U,e.sCount[a]=W,e.tight=L,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(p),a=e.line,$[1]=a,a>=n||e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)break;let Y=!1;for(let he=0,te=m.length;he<te;he++)if(m[he](e,a,n,!0)){Y=!0;break}if(Y)break;if(f){if(d=$o(e,a),d<0)break;i=e.bMarks[a]+e.tShift[a]}else if(d=Po(e,a),d<0)break;if(p!==e.src.charCodeAt(d-1))break}return f?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(p),x[1]=a,e.line=a,e.parentType=k,c&&O1(e,b),!0}function $1(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t],i=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==91)return!1;function o(m){const k=e.lineMax;if(m>=k||e.isEmpty(m))return null;let y=!1;if(e.sCount[m]-e.blkIndent>3&&(y=!0),e.sCount[m]<0&&(y=!0),!y){const D=e.md.block.ruler.getRules("reference"),O=e.parentType;e.parentType="reference";let $=!1;for(let L=0,U=D.length;L<U;L++)if(D[L](e,m,k,!0)){$=!0;break}if(e.parentType=O,$)return null}const E=e.bMarks[m]+e.tShift[m],C=e.eMarks[m];return e.src.slice(E,C+1)}let a=e.src.slice(s,r+1);r=a.length;let c=-1;for(s=1;s<r;s++){const m=a.charCodeAt(s);if(m===91)return!1;if(m===93){c=s;break}else if(m===10){const k=o(i);k!==null&&(a+=k,r=a.length,i++)}else if(m===92&&(s++,s<r&&a.charCodeAt(s)===10)){const k=o(i);k!==null&&(a+=k,r=a.length,i++)}}if(c<0||a.charCodeAt(c+1)!==58)return!1;for(s=c+2;s<r;s++){const m=a.charCodeAt(s);if(m===10){const k=o(i);k!==null&&(a+=k,r=a.length,i++)}else if(!fe(m))break}const l=e.md.helpers.parseLinkDestination(a,s,r);if(!l.ok)return!1;const f=e.md.normalizeLink(l.str);if(!e.md.validateLink(f))return!1;s=l.pos;const h=s,d=i,p=s;for(;s<r;s++){const m=a.charCodeAt(s);if(m===10){const k=o(i);k!==null&&(a+=k,r=a.length,i++)}else if(!fe(m))break}let b=e.md.helpers.parseLinkTitle(a,s,r);for(;b.can_continue;){const m=o(i);if(m===null)break;a+=m,s=r,r=a.length,i++,b=e.md.helpers.parseLinkTitle(a,s,r,b)}let x;for(s<r&&p!==s&&b.ok?(x=b.str,s=b.pos):(x="",s=h,i=d);s<r;){const m=a.charCodeAt(s);if(!fe(m))break;s++}if(s<r&&a.charCodeAt(s)!==10&&x)for(x="",s=h,i=d;s<r;){const m=a.charCodeAt(s);if(!fe(m))break;s++}if(s<r&&a.charCodeAt(s)!==10)return!1;const v=Fr(a.slice(1,c));return v?(u||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[v]>"u"&&(e.env.references[v]={title:x,href:f}),e.line=i),!0):!1}const L1=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],B1="[a-zA-Z_:][a-zA-Z0-9:._-]*",N1="[^\"'=<>`\\x00-\\x20]+",q1="'[^']*'",j1='"[^"]*"',U1="(?:"+N1+"|"+q1+"|"+j1+")",z1="(?:\\s+"+B1+"(?:\\s*=\\s*"+U1+")?)",Tc="<[A-Za-z][A-Za-z0-9\\-]*"+z1+"*\\s*\\/?>",Mc="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",H1="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",W1="<[?][\\s\\S]*?[?]>",V1="<![A-Za-z][^>]*>",K1="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",J1=new RegExp("^(?:"+Tc+"|"+Mc+"|"+H1+"|"+W1+"|"+V1+"|"+K1+")"),Z1=new RegExp("^(?:"+Tc+"|"+Mc+")"),sn=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+L1.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Z1.source+"\\s*$"),/^$/,!1]];function G1(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(s)!==60)return!1;let i=e.src.slice(s,r),o=0;for(;o<sn.length&&!sn[o][0].test(i);o++);if(o===sn.length)return!1;if(u)return sn[o][2];let a=t+1;if(!sn[o][1].test(i)){for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(s=e.bMarks[a]+e.tShift[a],r=e.eMarks[a],i=e.src.slice(s,r),sn[o][1].test(i)){i.length!==0&&a++;break}}e.line=a;const c=e.push("html_block","",0);return c.map=[t,a],c.content=e.getLines(t,a,e.blkIndent,!0),!0}function X1(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.src.charCodeAt(s);if(i!==35||s>=r)return!1;let o=1;for(i=e.src.charCodeAt(++s);i===35&&s<r&&o<=6;)o++,i=e.src.charCodeAt(++s);if(o>6||s<r&&!fe(i))return!1;if(u)return!0;r=e.skipSpacesBack(r,s);const a=e.skipCharsBack(r,35,s);a>s&&fe(e.src.charCodeAt(a-1))&&(r=a),e.line=t+1;const c=e.push("heading_open","h"+String(o),1);c.markup="########".slice(0,o),c.map=[t,e.line];const l=e.push("inline","",0);l.content=e.src.slice(s,r).trim(),l.map=[t,e.line],l.children=[];const f=e.push("heading_close","h"+String(o),-1);return f.markup="########".slice(0,o),!0}function Q1(e,t,n){const u=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const s=e.parentType;e.parentType="paragraph";let r=0,i,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let d=e.bMarks[o]+e.tShift[o];const p=e.eMarks[o];if(d<p&&(i=e.src.charCodeAt(d),(i===45||i===61)&&(d=e.skipChars(d,i),d=e.skipSpaces(d),d>=p))){r=i===61?1:2;break}}if(e.sCount[o]<0)continue;let h=!1;for(let d=0,p=u.length;d<p;d++)if(u[d](e,o,n,!0)){h=!0;break}if(h)break}if(!r)return!1;const a=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const c=e.push("heading_open","h"+String(r),1);c.markup=String.fromCharCode(i),c.map=[t,e.line];const l=e.push("inline","",0);l.content=a,l.map=[t,e.line-1],l.children=[];const f=e.push("heading_close","h"+String(r),-1);return f.markup=String.fromCharCode(i),e.parentType=s,!0}function Y1(e,t,n){const u=e.md.block.ruler.getRules("paragraph"),s=e.parentType;let r=t+1;for(e.parentType="paragraph";r<n&&!e.isEmpty(r);r++){if(e.sCount[r]-e.blkIndent>3||e.sCount[r]<0)continue;let c=!1;for(let l=0,f=u.length;l<f;l++)if(u[l](e,r,n,!0)){c=!0;break}if(c)break}const i=e.getLines(t,r,e.blkIndent,!1).trim();e.line=r;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const a=e.push("inline","",0);return a.content=i,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=s,!0}const Fu=[["table",F1,["paragraph","reference"]],["code",I1],["fence",R1,["paragraph","reference","blockquote","list"]],["blockquote",T1,["paragraph","reference","blockquote","list"]],["hr",M1,["paragraph","reference","blockquote","list"]],["list",P1,["paragraph","reference","blockquote"]],["reference",$1],["html_block",G1,["paragraph","reference","blockquote"]],["heading",X1,["paragraph","reference","blockquote"]],["lheading",Q1],["paragraph",Y1]];function Ir(){this.ruler=new qe;for(let e=0;e<Fu.length;e++)this.ruler.push(Fu[e][0],Fu[e][1],{alt:(Fu[e][2]||[]).slice()})}Ir.prototype.tokenize=function(e,t,n){const u=this.ruler.getRules(""),s=u.length,r=e.md.options.maxNesting;let i=t,o=!1;for(;i<n&&(e.line=i=e.skipEmptyLines(i),!(i>=n||e.sCount[i]<e.blkIndent));){if(e.level>=r){e.line=n;break}const a=e.line;let c=!1;for(let l=0;l<s;l++)if(c=u[l](e,i,n,!1),c){if(a>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),i=e.line,i<n&&e.isEmpty(i)&&(o=!0,i++,e.line=i)}};Ir.prototype.parse=function(e,t,n,u){if(!e)return;const s=new this.State(e,t,n,u);this.tokenize(s,s.line,s.lineMax)};Ir.prototype.State=wt;function xu(e,t,n,u){this.src=e,this.env=n,this.md=t,this.tokens=u,this.tokens_meta=Array(u.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}xu.prototype.pushPending=function(){const e=new ut("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};xu.prototype.push=function(e,t,n){this.pending&&this.pushPending();const u=new ut(e,t,n);let s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),u.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(u),this.tokens_meta.push(s),u};xu.prototype.scanDelims=function(e,t){const n=this.posMax,u=this.src.charCodeAt(e),s=e>0?this.src.charCodeAt(e-1):32;let r=e;for(;r<n&&this.src.charCodeAt(r)===u;)r++;const i=r-e,o=r<n?this.src.charCodeAt(r):32,a=du(s)||fu(String.fromCharCode(s)),c=du(o)||fu(String.fromCharCode(o)),l=lu(s),f=lu(o),h=!f&&(!c||l||a),d=!l&&(!a||f||c);return{can_open:h&&(t||!d||a),can_close:d&&(t||!h||c),length:i}};xu.prototype.Token=ut;function ep(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function tp(e,t){let n=e.pos;for(;n<e.posMax&&!ep(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const np=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function up(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,u=e.posMax;if(n+3>u||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const s=e.pending.match(np);if(!s)return!1;const r=s[1],i=e.md.linkify.matchAtStart(e.src.slice(n-r.length));if(!i)return!1;let o=i.url;if(o.length<=r.length)return!1;o=o.replace(/\*+$/,"");const a=e.md.normalizeLink(o);if(!e.md.validateLink(a))return!1;if(!t){e.pending=e.pending.slice(0,-r.length);const c=e.push("link_open","a",1);c.attrs=[["href",a]],c.markup="linkify",c.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(o);const f=e.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return e.pos+=o.length-r.length,!0}function rp(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const u=e.pending.length-1,s=e.posMax;if(!t)if(u>=0&&e.pending.charCodeAt(u)===32)if(u>=1&&e.pending.charCodeAt(u-1)===32){let r=u-1;for(;r>=1&&e.pending.charCodeAt(r-1)===32;)r--;e.pending=e.pending.slice(0,r),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<s&&fe(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const mi=[];for(let e=0;e<256;e++)mi.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){mi[e.charCodeAt(0)]=1});function sp(e,t){let n=e.pos;const u=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=u))return!1;let s=e.src.charCodeAt(n);if(s===10){for(t||e.push("hardbreak","br",0),n++;n<u&&(s=e.src.charCodeAt(n),!!fe(s));)n++;return e.pos=n,!0}let r=e.src[n];if(s>=55296&&s<=56319&&n+1<u){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(r+=e.src[n+1],n++)}const i="\\"+r;if(!t){const o=e.push("text_special","",0);s<256&&mi[s]!==0?o.content=r:o.content=i,o.markup=i,o.info="escape"}return e.pos=n+1,!0}function ip(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const s=n;n++;const r=e.posMax;for(;n<r&&e.src.charCodeAt(n)===96;)n++;const i=e.src.slice(s,n),o=i.length;if(e.backticksScanned&&(e.backticks[o]||0)<=s)return t||(e.pending+=i),e.pos+=o,!0;let a=n,c;for(;(c=e.src.indexOf("`",a))!==-1;){for(a=c+1;a<r&&e.src.charCodeAt(a)===96;)a++;const l=a-c;if(l===o){if(!t){const f=e.push("code_inline","code",0);f.markup=i,f.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=a,!0}e.backticks[l]=c}return e.backticksScanned=!0,t||(e.pending+=i),e.pos+=o,!0}function op(e,t){const n=e.pos,u=e.src.charCodeAt(n);if(t||u!==126)return!1;const s=e.scanDelims(e.pos,!0);let r=s.length;const i=String.fromCharCode(u);if(r<2)return!1;let o;r%2&&(o=e.push("text","",0),o.content=i,r--);for(let a=0;a<r;a+=2)o=e.push("text","",0),o.content=i+i,e.delimiters.push({marker:u,length:0,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return e.pos+=s.length,!0}function Lo(e,t){let n;const u=[],s=t.length;for(let r=0;r<s;r++){const i=t[r];if(i.marker!==126||i.end===-1)continue;const o=t[i.end];n=e.tokens[i.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&u.push(o.token-1)}for(;u.length;){const r=u.pop();let i=r+1;for(;i<e.tokens.length&&e.tokens[i].type==="s_close";)i++;i--,r!==i&&(n=e.tokens[i],e.tokens[i]=e.tokens[r],e.tokens[r]=n)}}function ap(e){const t=e.tokens_meta,n=e.tokens_meta.length;Lo(e,e.delimiters);for(let u=0;u<n;u++)t[u]&&t[u].delimiters&&Lo(e,t[u].delimiters)}const Oc={tokenize:op,postProcess:ap};function cp(e,t){const n=e.pos,u=e.src.charCodeAt(n);if(t||u!==95&&u!==42)return!1;const s=e.scanDelims(e.pos,u===42);for(let r=0;r<s.length;r++){const i=e.push("text","",0);i.content=String.fromCharCode(u),e.delimiters.push({marker:u,length:s.length,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return e.pos+=s.length,!0}function Bo(e,t){const n=t.length;for(let u=n-1;u>=0;u--){const s=t[u];if(s.marker!==95&&s.marker!==42||s.end===-1)continue;const r=t[s.end],i=u>0&&t[u-1].end===s.end+1&&t[u-1].marker===s.marker&&t[u-1].token===s.token-1&&t[s.end+1].token===r.token+1,o=String.fromCharCode(s.marker),a=e.tokens[s.token];a.type=i?"strong_open":"em_open",a.tag=i?"strong":"em",a.nesting=1,a.markup=i?o+o:o,a.content="";const c=e.tokens[r.token];c.type=i?"strong_close":"em_close",c.tag=i?"strong":"em",c.nesting=-1,c.markup=i?o+o:o,c.content="",i&&(e.tokens[t[u-1].token].content="",e.tokens[t[s.end+1].token].content="",u--)}}function lp(e){const t=e.tokens_meta,n=e.tokens_meta.length;Bo(e,e.delimiters);for(let u=0;u<n;u++)t[u]&&t[u].delimiters&&Bo(e,t[u].delimiters)}const Pc={tokenize:cp,postProcess:lp};function fp(e,t){let n,u,s,r,i="",o="",a=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const l=e.pos,f=e.posMax,h=e.pos+1,d=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(d<0)return!1;let p=d+1;if(p<f&&e.src.charCodeAt(p)===40){for(c=!1,p++;p<f&&(n=e.src.charCodeAt(p),!(!fe(n)&&n!==10));p++);if(p>=f)return!1;if(a=p,s=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),s.ok){for(i=e.md.normalizeLink(s.str),e.md.validateLink(i)?p=s.pos:i="",a=p;p<f&&(n=e.src.charCodeAt(p),!(!fe(n)&&n!==10));p++);if(s=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<f&&a!==p&&s.ok)for(o=s.str,p=s.pos;p<f&&(n=e.src.charCodeAt(p),!(!fe(n)&&n!==10));p++);}(p>=f||e.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof e.env.references>"u")return!1;if(p<f&&e.src.charCodeAt(p)===91?(a=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?u=e.src.slice(a,p++):p=d+1):p=d+1,u||(u=e.src.slice(h,d)),r=e.env.references[Fr(u)],!r)return e.pos=l,!1;i=r.href,o=r.title}if(!t){e.pos=h,e.posMax=d;const b=e.push("link_open","a",1),x=[["href",i]];b.attrs=x,o&&x.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=f,!0}function dp(e,t){let n,u,s,r,i,o,a,c,l="";const f=e.pos,h=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const d=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(r=p+1,r<h&&e.src.charCodeAt(r)===40){for(r++;r<h&&(n=e.src.charCodeAt(r),!(!fe(n)&&n!==10));r++);if(r>=h)return!1;for(c=r,o=e.md.helpers.parseLinkDestination(e.src,r,e.posMax),o.ok&&(l=e.md.normalizeLink(o.str),e.md.validateLink(l)?r=o.pos:l=""),c=r;r<h&&(n=e.src.charCodeAt(r),!(!fe(n)&&n!==10));r++);if(o=e.md.helpers.parseLinkTitle(e.src,r,e.posMax),r<h&&c!==r&&o.ok)for(a=o.str,r=o.pos;r<h&&(n=e.src.charCodeAt(r),!(!fe(n)&&n!==10));r++);else a="";if(r>=h||e.src.charCodeAt(r)!==41)return e.pos=f,!1;r++}else{if(typeof e.env.references>"u")return!1;if(r<h&&e.src.charCodeAt(r)===91?(c=r+1,r=e.md.helpers.parseLinkLabel(e,r),r>=0?s=e.src.slice(c,r++):r=p+1):r=p+1,s||(s=e.src.slice(d,p)),i=e.env.references[Fr(s)],!i)return e.pos=f,!1;l=i.href,a=i.title}if(!t){u=e.src.slice(d,p);const b=[];e.md.inline.parse(u,e.md,e.env,b);const x=e.push("image","img",0),v=[["src",l],["alt",""]];x.attrs=v,x.children=b,x.content=u,a&&v.push(["title",a])}return e.pos=r,e.posMax=h,!0}const hp=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,pp=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function bp(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const u=e.pos,s=e.posMax;for(;;){if(++n>=s)return!1;const i=e.src.charCodeAt(n);if(i===60)return!1;if(i===62)break}const r=e.src.slice(u+1,n);if(pp.test(r)){const i=e.md.normalizeLink(r);if(!e.md.validateLink(i))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",i]],o.markup="autolink",o.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(r);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=r.length+2,!0}if(hp.test(r)){const i=e.md.normalizeLink("mailto:"+r);if(!e.md.validateLink(i))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",i]],o.markup="autolink",o.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(r);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=r.length+2,!0}return!1}function gp(e){return/^<a[>\s]/i.test(e)}function mp(e){return/^<\/a\s*>/i.test(e)}function _p(e){const t=e|32;return t>=97&&t<=122}function xp(e,t){if(!e.md.options.html)return!1;const n=e.posMax,u=e.pos;if(e.src.charCodeAt(u)!==60||u+2>=n)return!1;const s=e.src.charCodeAt(u+1);if(s!==33&&s!==63&&s!==47&&!_p(s))return!1;const r=e.src.slice(u).match(J1);if(!r)return!1;if(!t){const i=e.push("html_inline","",0);i.content=r[0],gp(i.content)&&e.linkLevel++,mp(i.content)&&e.linkLevel--}return e.pos+=r[0].length,!0}const yp=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,wp=/^&([a-z][a-z0-9]{1,31});/i;function vp(e,t){const n=e.pos,u=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=u)return!1;if(e.src.charCodeAt(n+1)===35){const r=e.src.slice(n).match(yp);if(r){if(!t){const i=r[1][0].toLowerCase()==="x"?parseInt(r[1].slice(1),16):parseInt(r[1],10),o=e.push("text_special","",0);o.content=bi(i)?ir(i):ir(65533),o.markup=r[0],o.info="entity"}return e.pos+=r[0].length,!0}}else{const r=e.src.slice(n).match(wp);if(r){const i=Dc(r[0]);if(i!==r[0]){if(!t){const o=e.push("text_special","",0);o.content=i,o.markup=r[0],o.info="entity"}return e.pos+=r[0].length,!0}}}return!1}function No(e){const t={},n=e.length;if(!n)return;let u=0,s=-2;const r=[];for(let i=0;i<n;i++){const o=e[i];if(r.push(0),(e[u].marker!==o.marker||s!==o.token-1)&&(u=i),s=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const a=t[o.marker][(o.open?3:0)+o.length%3];let c=u-r[u]-1,l=c;for(;c>a;c-=r[c]+1){const f=e[c];if(f.marker===o.marker&&f.open&&f.end<0){let h=!1;if((f.close||o.open)&&(f.length+o.length)%3===0&&(f.length%3!==0||o.length%3!==0)&&(h=!0),!h){const d=c>0&&!e[c-1].open?r[c-1]+1:0;r[i]=i-c+d,r[c]=d,o.open=!1,f.end=i,f.close=!1,l=-1,s=-2;break}}}l!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=l)}}function kp(e){const t=e.tokens_meta,n=e.tokens_meta.length;No(e.delimiters);for(let u=0;u<n;u++)t[u]&&t[u].delimiters&&No(t[u].delimiters)}function Cp(e){let t,n,u=0;const s=e.tokens,r=e.tokens.length;for(t=n=0;t<r;t++)s[t].nesting<0&&u--,s[t].level=u,s[t].nesting>0&&u++,s[t].type==="text"&&t+1<r&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}const us=[["text",tp],["linkify",up],["newline",rp],["escape",sp],["backticks",ip],["strikethrough",Oc.tokenize],["emphasis",Pc.tokenize],["link",fp],["image",dp],["autolink",bp],["html_inline",xp],["entity",vp]],rs=[["balance_pairs",kp],["strikethrough",Oc.postProcess],["emphasis",Pc.postProcess],["fragments_join",Cp]];function yu(){this.ruler=new qe;for(let e=0;e<us.length;e++)this.ruler.push(us[e][0],us[e][1]);this.ruler2=new qe;for(let e=0;e<rs.length;e++)this.ruler2.push(rs[e][0],rs[e][1])}yu.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),u=n.length,s=e.md.options.maxNesting,r=e.cache;if(typeof r[t]<"u"){e.pos=r[t];return}let i=!1;if(e.level<s){for(let o=0;o<u;o++)if(e.level++,i=n[o](e,!0),e.level--,i){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;i||e.pos++,r[t]=e.pos};yu.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,u=e.posMax,s=e.md.options.maxNesting;for(;e.pos<u;){const r=e.pos;let i=!1;if(e.level<s){for(let o=0;o<n;o++)if(i=t[o](e,!1),i){if(r>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(i){if(e.pos>=u)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};yu.prototype.parse=function(e,t,n,u){const s=new this.State(e,t,n,u);this.tokenize(s);const r=this.ruler2.getRules(""),i=r.length;for(let o=0;o<i;o++)r[o](s)};yu.prototype.State=xu;function Ap(e){const t={};e=e||{},t.src_Any=vc.source,t.src_Cc=kc.source,t.src_Z=Ac.source,t.src_P=hi.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Fs(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(u){e[u]=n[u]})}),e}function Rr(e){return Object.prototype.toString.call(e)}function Ep(e){return Rr(e)==="[object String]"}function Dp(e){return Rr(e)==="[object Object]"}function Sp(e){return Rr(e)==="[object RegExp]"}function qo(e){return Rr(e)==="[object Function]"}function Fp(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const $c={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Ip(e){return Object.keys(e||{}).reduce(function(t,n){return t||$c.hasOwnProperty(n)},!1)}const Rp={"http:":{validate:function(e,t,n){const u=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(u)?u.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const u=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(u)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:u.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const u=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(u)?u.match(n.re.mailto)[0].length:0}}},Tp="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Mp="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Op(e){e.__index__=-1,e.__text_cache__=""}function Pp(e){return function(t,n){const u=t.slice(n);return e.test(u)?u.match(e)[0].length:0}}function jo(){return function(e,t){t.normalize(e)}}function or(e){const t=e.re=Ap(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Tp),n.push(t.src_xn),t.src_tlds=n.join("|");function u(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(u(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(u(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(u(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(u(t.tpl_host_fuzzy_test),"i");const s=[];e.__compiled__={};function r(o,a){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+a)}Object.keys(e.__schemas__).forEach(function(o){const a=e.__schemas__[o];if(a===null)return;const c={validate:null,link:null};if(e.__compiled__[o]=c,Dp(a)){Sp(a.validate)?c.validate=Pp(a.validate):qo(a.validate)?c.validate=a.validate:r(o,a),qo(a.normalize)?c.normalize=a.normalize:a.normalize?r(o,a):c.normalize=jo();return}if(Ep(a)){s.push(o);return}r(o,a)}),s.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:jo()};const i=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(Fp).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+i+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+i+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Op(e)}function $p(e,t){const n=e.__index__,u=e.__last_index__,s=e.__text_cache__.slice(n,u);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=u+t,this.raw=s,this.text=s,this.url=s}function Is(e,t){const n=new $p(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Je(e,t){if(!(this instanceof Je))return new Je(e,t);t||Ip(e)&&(t=e,e={}),this.__opts__=Fs({},$c,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Fs({},Rp,e),this.__compiled__={},this.__tlds__=Mp,this.__tlds_replaced__=!1,this.re={},or(this)}Je.prototype.add=function(t,n){return this.__schemas__[t]=n,or(this),this};Je.prototype.set=function(t){return this.__opts__=Fs(this.__opts__,t),this};Je.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,u,s,r,i,o,a,c,l;if(this.re.schema_test.test(t)){for(a=this.re.schema_search,a.lastIndex=0;(n=a.exec(t))!==null;)if(r=this.testSchemaAt(t,n[2],a.lastIndex),r){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(u=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(i=u.index+u[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=u.index+u[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=t.indexOf("@"),l>=0&&(s=t.match(this.re.email_fuzzy))!==null&&(i=s.index+s[1].length,o=s.index+s[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=o))),this.__index__>=0};Je.prototype.pretest=function(t){return this.re.pretest.test(t)};Je.prototype.testSchemaAt=function(t,n,u){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,u,this):0};Je.prototype.match=function(t){const n=[];let u=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Is(this,u)),u=this.__last_index__);let s=u?t.slice(u):t;for(;this.test(s);)n.push(Is(this,u)),s=s.slice(this.__last_index__),u+=this.__last_index__;return n.length?n:null};Je.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const u=this.testSchemaAt(t,n[2],n[0].length);return u?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+u,Is(this,0)):null};Je.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(u,s,r){return u!==r[s-1]}).reverse(),or(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,or(this),this)};Je.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Je.prototype.onCompile=function(){};const vn=2147483647,pt=36,_i=1,hu=26,Lp=38,Bp=700,Lc=72,Bc=128,Nc="-",Np=/^xn--/,qp=/[^\0-\x7F]/,jp=/[\x2E\u3002\uFF0E\uFF61]/g,Up={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ss=pt-_i,bt=Math.floor,is=String.fromCharCode;function Bt(e){throw new RangeError(Up[e])}function zp(e,t){const n=[];let u=e.length;for(;u--;)n[u]=t(e[u]);return n}function qc(e,t){const n=e.split("@");let u="";n.length>1&&(u=n[0]+"@",e=n[1]),e=e.replace(jp,".");const s=e.split("."),r=zp(s,t).join(".");return u+r}function jc(e){const t=[];let n=0;const u=e.length;for(;n<u;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<u){const r=e.charCodeAt(n++);(r&64512)==56320?t.push(((s&1023)<<10)+(r&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const Hp=e=>String.fromCodePoint(...e),Wp=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:pt},Uo=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Uc=function(e,t,n){let u=0;for(e=n?bt(e/Bp):e>>1,e+=bt(e/t);e>ss*hu>>1;u+=pt)e=bt(e/ss);return bt(u+(ss+1)*e/(e+Lp))},zc=function(e){const t=[],n=e.length;let u=0,s=Bc,r=Lc,i=e.lastIndexOf(Nc);i<0&&(i=0);for(let o=0;o<i;++o)e.charCodeAt(o)>=128&&Bt("not-basic"),t.push(e.charCodeAt(o));for(let o=i>0?i+1:0;o<n;){const a=u;for(let l=1,f=pt;;f+=pt){o>=n&&Bt("invalid-input");const h=Wp(e.charCodeAt(o++));h>=pt&&Bt("invalid-input"),h>bt((vn-u)/l)&&Bt("overflow"),u+=h*l;const d=f<=r?_i:f>=r+hu?hu:f-r;if(h<d)break;const p=pt-d;l>bt(vn/p)&&Bt("overflow"),l*=p}const c=t.length+1;r=Uc(u-a,c,a==0),bt(u/c)>vn-s&&Bt("overflow"),s+=bt(u/c),u%=c,t.splice(u++,0,s)}return String.fromCodePoint(...t)},Hc=function(e){const t=[];e=jc(e);const n=e.length;let u=Bc,s=0,r=Lc;for(const a of e)a<128&&t.push(is(a));const i=t.length;let o=i;for(i&&t.push(Nc);o<n;){let a=vn;for(const l of e)l>=u&&l<a&&(a=l);const c=o+1;a-u>bt((vn-s)/c)&&Bt("overflow"),s+=(a-u)*c,u=a;for(const l of e)if(l<u&&++s>vn&&Bt("overflow"),l===u){let f=s;for(let h=pt;;h+=pt){const d=h<=r?_i:h>=r+hu?hu:h-r;if(f<d)break;const p=f-d,b=pt-d;t.push(is(Uo(d+p%b,0))),f=bt(p/b)}t.push(is(Uo(f,0))),r=Uc(s,c,o===i),s=0,++o}++s,++u}return t.join("")},Vp=function(e){return qc(e,function(t){return Np.test(t)?zc(t.slice(4).toLowerCase()):t})},Kp=function(e){return qc(e,function(t){return qp.test(t)?"xn--"+Hc(t):t})},Wc={version:"2.3.1",ucs2:{decode:jc,encode:Hp},decode:zc,encode:Hc,toASCII:Kp,toUnicode:Vp},Jp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Zp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Gp={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Xp={default:Jp,zero:Zp,commonmark:Gp},Qp=/^(vbscript|javascript|file|data):/,Yp=/^data:image\/(gif|png|jpeg|webp);/;function e2(e){const t=e.trim().toLowerCase();return Qp.test(t)?Yp.test(t):!0}const Vc=["http:","https:","mailto:"];function t2(e){const t=di(e,!0);if(t.hostname&&(!t.protocol||Vc.indexOf(t.protocol)>=0))try{t.hostname=Wc.toASCII(t.hostname)}catch{}return _u(fi(t))}function n2(e){const t=di(e,!0);if(t.hostname&&(!t.protocol||Vc.indexOf(t.protocol)>=0))try{t.hostname=Wc.toUnicode(t.hostname)}catch{}return An(fi(t),An.defaultChars+"%")}function Qe(e,t){if(!(this instanceof Qe))return new Qe(e,t);t||pi(e)||(t=e||{},e="default"),this.inline=new yu,this.block=new Ir,this.core=new gi,this.renderer=new Sn,this.linkify=new Je,this.validateLink=e2,this.normalizeLink=t2,this.normalizeLinkText=n2,this.utils=r1,this.helpers=Sr({},a1),this.options={},this.configure(e),t&&this.set(t)}Qe.prototype.set=function(e){return Sr(this.options,e),this};Qe.prototype.configure=function(e){const t=this;if(pi(e)){const n=e;if(e=Xp[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Qe.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const u=e.filter(function(s){return n.indexOf(s)<0});if(u.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+u);return this};Qe.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const u=e.filter(function(s){return n.indexOf(s)<0});if(u.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+u);return this};Qe.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Qe.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Qe.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Qe.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Qe.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const u2={class:"flex flex-col min-w-0 bg-gray-900 h-full"},r2={class:"h-8 bg-gray-800 border-b border-gray-700 flex items-center px-3 text-xs text-gray-400 uppercase tracking-wider shrink-0"},s2=["innerHTML"],i2=Dn({__name:"MarkdownPreview",props:{content:{},currentLang:{}},setup(e){const t=e,n=_t(()=>mu[t.currentLang]),u=new Qe,s=_t(()=>u.render(t.content));return(r,i)=>(xe(),ke("div",u2,[N("div",r2,ye(n.value.preview),1),N("div",{class:"flex-1 overflow-auto p-8 prose prose-invert max-w-none prose-pre:bg-gray-800 prose-pre:border prose-pre:border-gray-700",innerHTML:s.value},null,8,s2)]))}});function J(e,t,n,u,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}function w(e,t,n,u){if(n==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?u:n==="a"?u.call(e):u?u.value:t.get(e)}let Kc=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return Kc=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,u=>(+u^n()&15>>+u/4).toString(16))};function Rs(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Ts=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class H extends Error{}class De extends H{constructor(t,n,u,s){super(`${De.makeMessage(t,n,u)}`),this.status=t,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const r=n;this.code=r?.code,this.param=r?.param,this.type=r?.type}static makeMessage(t,n,u){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):u;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,u,s){if(!t||!s)return new Tr({message:u,cause:Ts(n)});const r=n?.error;return t===400?new Jc(t,r,u,s):t===401?new Zc(t,r,u,s):t===403?new Gc(t,r,u,s):t===404?new Xc(t,r,u,s):t===409?new Qc(t,r,u,s):t===422?new Yc(t,r,u,s):t===429?new el(t,r,u,s):t>=500?new tl(t,r,u,s):new De(t,r,u,s)}}class Ge extends De{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Tr extends De{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class xi extends Tr{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Jc extends De{}class Zc extends De{}class Gc extends De{}class Xc extends De{}class Qc extends De{}class Yc extends De{}class el extends De{}class tl extends De{}class nl extends H{constructor(){super("Could not parse response content as the length limit was reached")}}class ul extends H{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Nn extends Error{constructor(t){super(t)}}const o2=/^[a-z][a-z0-9+.-]*:/i,a2=e=>o2.test(e);let Be=e=>(Be=Array.isArray,Be(e)),zo=Be;function rl(e){return typeof e!="object"?{}:e??{}}function c2(e){if(!e)return!0;for(const t in e)return!1;return!0}function l2(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function os(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}const f2=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new H(`${e} must be an integer`);if(t<0)throw new H(`${e} must be a positive integer`);return t},d2=e=>{try{return JSON.parse(e)}catch{return}},wu=e=>new Promise(t=>setTimeout(t,e)),hn="6.10.0",h2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function p2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const b2=()=>{const e=p2();if(e==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hn,"X-Stainless-OS":Wo(Deno.build.os),"X-Stainless-Arch":Ho(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(e==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hn,"X-Stainless-OS":Wo(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Ho(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=g2();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function g2(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const u=n.exec(navigator.userAgent);if(u){const s=u[1]||0,r=u[2]||0,i=u[3]||0;return{browser:t,version:`${s}.${r}.${i}`}}}return null}const Ho=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Wo=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Vo;const m2=()=>Vo??(Vo=b2());function _2(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function sl(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function il(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return sl({start(){},async pull(n){const{done:u,value:s}=await t.next();u?n.close():n.enqueue(s)},async cancel(){await t.return?.()}})}function ol(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function x2(e){if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await e[Symbol.asyncIterator]().return?.();return}const t=e.getReader(),n=t.cancel();t.releaseLock(),await n}const y2=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),al="RFC3986",cl=e=>String(e),Ko={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:cl},w2="RFC1738";let Ms=(e,t)=>(Ms=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Ms(e,t));const lt=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),as=1024,v2=(e,t,n,u,s)=>{if(e.length===0)return e;let r=e;if(typeof e=="symbol"?r=Symbol.prototype.toString.call(e):typeof e!="string"&&(r=String(e)),n==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<r.length;o+=as){const a=r.length>=as?r.slice(o,o+as):r,c=[];for(let l=0;l<a.length;++l){let f=a.charCodeAt(l);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===w2&&(f===40||f===41)){c[c.length]=a.charAt(l);continue}if(f<128){c[c.length]=lt[f];continue}if(f<2048){c[c.length]=lt[192|f>>6]+lt[128|f&63];continue}if(f<55296||f>=57344){c[c.length]=lt[224|f>>12]+lt[128|f>>6&63]+lt[128|f&63];continue}l+=1,f=65536+((f&1023)<<10|a.charCodeAt(l)&1023),c[c.length]=lt[240|f>>18]+lt[128|f>>12&63]+lt[128|f>>6&63]+lt[128|f&63]}i+=c.join("")}return i};function k2(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Jo(e,t){if(Be(e)){const n=[];for(let u=0;u<e.length;u+=1)n.push(t(e[u]));return n}return t(e)}const ll={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},fl=function(e,t){Array.prototype.push.apply(e,Be(t)?t:[t])};let Zo;const _e={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:v2,encodeValuesOnly:!1,format:al,formatter:cl,indices:!1,serializeDate(e){return(Zo??(Zo=Function.prototype.call.bind(Date.prototype.toISOString)))(e)},skipNulls:!1,strictNullHandling:!1};function C2(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const cs={};function dl(e,t,n,u,s,r,i,o,a,c,l,f,h,d,p,b,x,v){let m=e,k=v,y=0,E=!1;for(;(k=k.get(cs))!==void 0&&!E;){const L=k.get(e);if(y+=1,typeof L<"u"){if(L===y)throw new RangeError("Cyclic object value");E=!0}typeof k.get(cs)>"u"&&(y=0)}if(typeof c=="function"?m=c(t,m):m instanceof Date?m=h?.(m):n==="comma"&&Be(m)&&(m=Jo(m,function(L){return L instanceof Date?h?.(L):L})),m===null){if(r)return a&&!b?a(t,_e.encoder,x,"key",d):t;m=""}if(C2(m)||k2(m)){if(a){const L=b?t:a(t,_e.encoder,x,"key",d);return[p?.(L)+"="+p?.(a(m,_e.encoder,x,"value",d))]}return[p?.(t)+"="+p?.(String(m))]}const C=[];if(typeof m>"u")return C;let D;if(n==="comma"&&Be(m))b&&a&&(m=Jo(m,a)),D=[{value:m.length>0?m.join(",")||null:void 0}];else if(Be(c))D=c;else{const L=Object.keys(m);D=l?L.sort(l):L}const O=o?String(t).replace(/\./g,"%2E"):String(t),$=u&&Be(m)&&m.length===1?O+"[]":O;if(s&&Be(m)&&m.length===0)return $+"[]";for(let L=0;L<D.length;++L){const U=D[L],W=typeof U=="object"&&typeof U.value<"u"?U.value:m[U];if(i&&W===null)continue;const ee=f&&o?U.replace(/\./g,"%2E"):U,Y=Be(m)?typeof n=="function"?n($,ee):$:$+(f?"."+ee:"["+ee+"]");v.set(e,y);const he=new WeakMap;he.set(cs,v),fl(C,dl(W,Y,n,u,s,r,i,o,n==="comma"&&b&&Be(m)?null:a,c,l,f,h,d,p,b,x,he))}return C}function A2(e=_e){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||_e.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=al;if(typeof e.format<"u"){if(!Ms(Ko,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const u=Ko[n];let s=_e.filter;(typeof e.filter=="function"||Be(e.filter))&&(s=e.filter);let r;if(e.arrayFormat&&e.arrayFormat in ll?r=e.arrayFormat:"indices"in e?r=e.indices?"indices":"repeat":r=_e.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:_e.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:_e.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:_e.allowEmptyArrays,arrayFormat:r,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:_e.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?_e.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:_e.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:_e.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:_e.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:_e.encodeValuesOnly,filter:s,format:n,formatter:u,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:_e.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:_e.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:_e.strictNullHandling}}function E2(e,t={}){let n=e;const u=A2(t);let s,r;typeof u.filter=="function"?(r=u.filter,n=r("",n)):Be(u.filter)&&(r=u.filter,s=r);const i=[];if(typeof n!="object"||n===null)return"";const o=ll[u.arrayFormat],a=o==="comma"&&u.commaRoundTrip;s||(s=Object.keys(n)),u.sort&&s.sort(u.sort);const c=new WeakMap;for(let h=0;h<s.length;++h){const d=s[h];u.skipNulls&&n[d]===null||fl(i,dl(n[d],d,o,a,u.allowEmptyArrays,u.strictNullHandling,u.skipNulls,u.encodeDotInKeys,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,c))}const l=i.join(u.delimiter);let f=u.addQueryPrefix===!0?"?":"";return u.charsetSentinel&&(u.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),l.length>0?f+l:""}function D2(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let u=0;for(const s of e)n.set(s,u),u+=s.length;return n}let Go;function yi(e){let t;return(Go??(t=new globalThis.TextEncoder,Go=t.encode.bind(t)))(e)}let Xo;function Qo(e){let t;return(Xo??(t=new globalThis.TextDecoder,Xo=t.decode.bind(t)))(e)}var Ue,ze;class Mr{constructor(){Ue.set(this,void 0),ze.set(this,void 0),J(this,Ue,new Uint8Array),J(this,ze,null)}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?yi(t):t;J(this,Ue,D2([w(this,Ue,"f"),n]));const u=[];let s;for(;(s=S2(w(this,Ue,"f"),w(this,ze,"f")))!=null;){if(s.carriage&&w(this,ze,"f")==null){J(this,ze,s.index);continue}if(w(this,ze,"f")!=null&&(s.index!==w(this,ze,"f")+1||s.carriage)){u.push(Qo(w(this,Ue,"f").subarray(0,w(this,ze,"f")-1))),J(this,Ue,w(this,Ue,"f").subarray(w(this,ze,"f"))),J(this,ze,null);continue}const r=w(this,ze,"f")!==null?s.preceding-1:s.preceding,i=Qo(w(this,Ue,"f").subarray(0,r));u.push(i),J(this,Ue,w(this,Ue,"f").subarray(s.index)),J(this,ze,null)}return u}flush(){return w(this,Ue,"f").length?this.decode(`
`):[]}}Ue=new WeakMap,ze=new WeakMap;Mr.NEWLINE_CHARS=new Set([`
`,"\r"]);Mr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function S2(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function F2(e){for(let u=0;u<e.length-1;u++){if(e[u]===10&&e[u+1]===10||e[u]===13&&e[u+1]===13)return u+2;if(e[u]===13&&e[u+1]===10&&u+3<e.length&&e[u+2]===13&&e[u+3]===10)return u+4}return-1}const ar={off:0,error:200,warn:300,info:400,debug:500},Yo=(e,t,n)=>{if(e){if(l2(ar,e))return e;Ae(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(ar))}`)}};function qn(){}function Iu(e,t,n){return!t||ar[e]>ar[n]?qn:t[e].bind(t)}const I2={error:qn,warn:qn,info:qn,debug:qn};let ea=new WeakMap;function Ae(e){const t=e.logger,n=e.logLevel??"off";if(!t)return I2;const u=ea.get(t);if(u&&u[0]===n)return u[1];const s={error:Iu("error",t,n),warn:Iu("warn",t,n),info:Iu("info",t,n),debug:Iu("debug",t,n)};return ea.set(t,[n,s]),s}const Xt=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var Ln;class gt{constructor(t,n,u){this.iterator=t,Ln.set(this,void 0),this.controller=n,J(this,Ln,u)}static fromSSEResponse(t,n,u){let s=!1;const r=u?Ae(u):console;async function*i(){if(s)throw new H("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const a of R2(t,n))if(!o){if(a.data.startsWith("[DONE]")){o=!0;continue}if(a.event===null||!a.event.startsWith("thread.")){let c;try{c=JSON.parse(a.data)}catch(l){throw r.error("Could not parse message into JSON:",a.data),r.error("From chunk:",a.raw),l}if(c&&c.error)throw new De(void 0,c.error,void 0,t.headers);yield c}else{let c;try{c=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new De(void 0,c.error,c.message,void 0);yield{event:a.event,data:c}}}o=!0}catch(a){if(Rs(a))return;throw a}finally{o||n.abort()}}return new gt(i,n,u)}static fromReadableStream(t,n,u){let s=!1;async function*r(){const o=new Mr,a=ol(t);for await(const c of a)for(const l of o.decode(c))yield l;for(const c of o.flush())yield c}async function*i(){if(s)throw new H("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const a of r())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(Rs(a))return;throw a}finally{o||n.abort()}}return new gt(i,n,u)}[(Ln=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const t=[],n=[],u=this.iterator(),s=r=>({next:()=>{if(r.length===0){const i=u.next();t.push(i),n.push(i)}return r.shift()}});return[new gt(()=>s(t),this.controller,w(this,Ln,"f")),new gt(()=>s(n),this.controller,w(this,Ln,"f"))]}toReadableStream(){const t=this;let n;return sl({async start(){n=t[Symbol.asyncIterator]()},async pull(u){try{const{value:s,done:r}=await n.next();if(r)return u.close();const i=yi(JSON.stringify(s)+`
`);u.enqueue(i)}catch(s){u.error(s)}},async cancel(){await n.return?.()}})}}async function*R2(e,t){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new H("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new H("Attempted to iterate over a response with no body");const n=new M2,u=new Mr,s=ol(e.body);for await(const r of T2(s))for(const i of u.decode(r)){const o=n.decode(i);o&&(yield o)}for(const r of u.flush()){const i=n.decode(r);i&&(yield i)}}async function*T2(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const u=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?yi(n):n;let s=new Uint8Array(t.length+u.length);s.set(t),s.set(u,t.length),t=s;let r;for(;(r=F2(t))!==-1;)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}class M2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,u,s]=O2(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function O2(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function hl(e,t){const{response:n,requestLogID:u,retryOfRequestLogID:s,startTime:r}=t,i=await(async()=>{if(t.options.stream)return Ae(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):gt.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const a=n.headers.get("content-type")?.split(";")[0]?.trim();if(a?.includes("application/json")||a?.endsWith("+json")){const f=await n.json();return pl(f,n)}return await n.text()})();return Ae(e).debug(`[${u}] response parsed`,Xt({retryOfRequestLogID:s,url:n.url,status:n.status,body:i,durationMs:Date.now()-r})),i}function pl(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var jn;class Or extends Promise{constructor(t,n,u=hl){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=u,jn.set(this,void 0),J(this,jn,t)}_thenUnwrap(t){return new Or(w(this,jn,"f"),this.responsePromise,async(n,u)=>pl(t(await this.parseResponse(n,u),u),u.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(w(this,jn,"f"),t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}jn=new WeakMap;var Ru;class wi{constructor(t,n,u,s){Ru.set(this,void 0),J(this,Ru,t),this.options=s,this.response=n,this.body=u}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const t=this.nextPageRequestOptions();if(!t)throw new H("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await w(this,Ru,"f").requestAPIList(this.constructor,t)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Ru=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class P2 extends Or{constructor(t,n,u){super(t,n,async(s,r)=>new u(s,r.response,await hl(s,r),r.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}class Pr extends wi{constructor(t,n,u,s){super(t,n,u,s),this.data=u.data||[],this.object=u.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class ge extends wi{constructor(t,n,u,s){super(t,n,u,s),this.data=u.data||[],this.has_more=u.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.getPaginatedItems(),n=t[t.length-1]?.id;return n?{...this.options,query:{...rl(this.options.query),after:n}}:null}}class cr extends wi{constructor(t,n,u,s){super(t,n,u,s),this.data=u.data||[],this.has_more=u.has_more||!1,this.last_id=u.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.last_id;return t?{...this.options,query:{...rl(this.options.query),after:t}}:null}}const bl=()=>{if(typeof File>"u"){const{process:e}=globalThis,t=typeof e?.versions?.node=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function nu(e,t,n){return bl(),new File(e,t??"unknown_file",n)}function zu(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const vi=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",ta=async(e,t)=>Os(e.body)?{...e,body:await gl(e.body,t)}:e,un=async(e,t)=>({...e,body:await gl(e.body,t)}),na=new WeakMap;function $2(e){const t=typeof e=="function"?e:e.fetch,n=na.get(t);if(n)return n;const u=(async()=>{try{const s="Response"in t?t.Response:(await t("data:,")).constructor,r=new FormData;return r.toString()!==await new s(r).text()}catch{return!0}})();return na.set(t,u),u}const gl=async(e,t)=>{if(!await $2(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(([u,s])=>Ps(n,u,s))),n},ml=e=>e instanceof Blob&&"name"in e,L2=e=>typeof e=="object"&&e!==null&&(e instanceof Response||vi(e)||ml(e)),Os=e=>{if(L2(e))return!0;if(Array.isArray(e))return e.some(Os);if(e&&typeof e=="object"){for(const t in e)if(Os(e[t]))return!0}return!1},Ps=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(n instanceof Response)e.append(t,nu([await n.blob()],zu(n)));else if(vi(n))e.append(t,nu([await new Response(il(n)).blob()],zu(n)));else if(ml(n))e.append(t,n,zu(n));else if(Array.isArray(n))await Promise.all(n.map(u=>Ps(e,t+"[]",u)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([u,s])=>Ps(e,`${t}[${u}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},_l=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",B2=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&_l(e),N2=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function q2(e,t,n){if(bl(),e=await e,B2(e))return e instanceof File?e:nu([await e.arrayBuffer()],e.name);if(N2(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),nu(await $s(s),t,n)}const u=await $s(e);if(t||(t=zu(e)),!n?.type){const s=u.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof s=="string"&&(n={...n,type:s})}return nu(u,t,n)}async function $s(e){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(_l(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(vi(e))for await(const n of e)t.push(...await $s(n));else{const n=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${n?`; constructor: ${n}`:""}${j2(e)}`)}return t}function j2(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}class z{constructor(t){this._client=t}}function xl(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ua=Object.freeze(Object.create(null)),U2=(e=xl)=>function(n,...u){if(n.length===1)return n[0];let s=!1;const r=[],i=n.reduce((l,f,h)=>{/[?#]/.test(f)&&(s=!0);const d=u[h];let p=(s?encodeURIComponent:e)(""+d);return h!==u.length&&(d==null||typeof d=="object"&&d.toString===Object.getPrototypeOf(Object.getPrototypeOf(d.hasOwnProperty??ua)??ua)?.toString)&&(p=d+"",r.push({start:l.length+f.length,length:p.length,error:`Value of type ${Object.prototype.toString.call(d).slice(8,-1)} is not a valid path parameter`})),l+f+(h===u.length?"":p)},""),o=i.split(/[?#]/,1)[0],a=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=a.exec(o))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((l,f)=>l.start-f.start),r.length>0){let l=0;const f=r.reduce((h,d)=>{const p=" ".repeat(d.start-l),b="^".repeat(d.length);return l=d.start+d.length,h+p+b},"");throw new H(`Path parameters result in path with invalid segments:
${r.map(h=>h.error).join(`
`)}
${i}
${f}`)}return i},R=U2(xl);let yl=class extends z{list(t,n={},u){return this._client.getAPIList(R`/chat/completions/${t}/messages`,ge,{query:n,...u})}};function lr(e){return e!==void 0&&"function"in e&&e.function!==void 0}function ki(e){return e?.$brand==="auto-parseable-response-format"}function vu(e){return e?.$brand==="auto-parseable-tool"}function z2(e,t){return!t||!wl(t)?{...e,choices:e.choices.map(n=>(vl(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Ci(e,t)}function Ci(e,t){const n=e.choices.map(u=>{if(u.finish_reason==="length")throw new nl;if(u.finish_reason==="content_filter")throw new ul;return vl(u.message.tool_calls),{...u,message:{...u.message,...u.message.tool_calls?{tool_calls:u.message.tool_calls?.map(s=>W2(t,s))??void 0}:void 0,parsed:u.message.content&&!u.message.refusal?H2(t,u.message.content):null}}});return{...e,choices:n}}function H2(e,t){return e.response_format?.type!=="json_schema"?null:e.response_format?.type==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function W2(e,t){const n=e.tools?.find(u=>lr(u)&&u.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:vu(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}function V2(e,t){if(!e||!("tools"in e)||!e.tools)return!1;const n=e.tools?.find(u=>lr(u)&&u.function?.name===t.function.name);return lr(n)&&(vu(n)||n?.function.strict||!1)}function wl(e){return ki(e.response_format)?!0:e.tools?.some(t=>vu(t)||t.type==="function"&&t.function.strict===!0)??!1}function vl(e){for(const t of e||[])if(t.type!=="function")throw new H(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function K2(e){for(const t of e??[]){if(t.type!=="function")throw new H(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new H(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const fr=e=>e?.role==="assistant",kl=e=>e?.role==="tool";var Ls,Hu,Wu,Un,zn,Vu,Hn,Ct,Wn,dr,hr,pn,Cl;class Ai{constructor(){Ls.add(this),this.controller=new AbortController,Hu.set(this,void 0),Wu.set(this,()=>{}),Un.set(this,()=>{}),zn.set(this,void 0),Vu.set(this,()=>{}),Hn.set(this,()=>{}),Ct.set(this,{}),Wn.set(this,!1),dr.set(this,!1),hr.set(this,!1),pn.set(this,!1),J(this,Hu,new Promise((t,n)=>{J(this,Wu,t,"f"),J(this,Un,n,"f")})),J(this,zn,new Promise((t,n)=>{J(this,Vu,t,"f"),J(this,Hn,n,"f")})),w(this,Hu,"f").catch(()=>{}),w(this,zn,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},w(this,Ls,"m",Cl).bind(this))},0)}_connected(){this.ended||(w(this,Wu,"f").call(this),this._emit("connect"))}get ended(){return w(this,Wn,"f")}get errored(){return w(this,dr,"f")}get aborted(){return w(this,hr,"f")}abort(){this.controller.abort()}on(t,n){return(w(this,Ct,"f")[t]||(w(this,Ct,"f")[t]=[])).push({listener:n}),this}off(t,n){const u=w(this,Ct,"f")[t];if(!u)return this;const s=u.findIndex(r=>r.listener===n);return s>=0&&u.splice(s,1),this}once(t,n){return(w(this,Ct,"f")[t]||(w(this,Ct,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,u)=>{J(this,pn,!0),t!=="error"&&this.once("error",u),this.once(t,n)})}async done(){J(this,pn,!0),await w(this,zn,"f")}_emit(t,...n){if(w(this,Wn,"f"))return;t==="end"&&(J(this,Wn,!0),w(this,Vu,"f").call(this));const u=w(this,Ct,"f")[t];if(u&&(w(this,Ct,"f")[t]=u.filter(s=>!s.once),u.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!w(this,pn,"f")&&!u?.length&&Promise.reject(s),w(this,Un,"f").call(this,s),w(this,Hn,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!w(this,pn,"f")&&!u?.length&&Promise.reject(s),w(this,Un,"f").call(this,s),w(this,Hn,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Hu=new WeakMap,Wu=new WeakMap,Un=new WeakMap,zn=new WeakMap,Vu=new WeakMap,Hn=new WeakMap,Ct=new WeakMap,Wn=new WeakMap,dr=new WeakMap,hr=new WeakMap,pn=new WeakMap,Ls=new WeakSet,Cl=function(t){if(J(this,dr,!0),t instanceof Error&&t.name==="AbortError"&&(t=new Ge),t instanceof Ge)return J(this,hr,!0),this._emit("abort",t);if(t instanceof H)return this._emit("error",t);if(t instanceof Error){const n=new H(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new H(String(t)))};function J2(e){return typeof e.parse=="function"}var Te,Bs,pr,Ns,qs,js,Al,El;const Z2=10;class Dl extends Ai{constructor(){super(...arguments),Te.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=t.choices[0]?.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),kl(t)&&t.content)this._emit("functionToolCallResult",t.content);else if(fr(t)&&t.tool_calls)for(const u of t.tool_calls)u.type==="function"&&this._emit("functionToolCall",u.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new H("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),w(this,Te,"m",Bs).call(this)}async finalMessage(){return await this.done(),w(this,Te,"m",pr).call(this)}async finalFunctionToolCall(){return await this.done(),w(this,Te,"m",Ns).call(this)}async finalFunctionToolCallResult(){return await this.done(),w(this,Te,"m",qs).call(this)}async totalUsage(){return await this.done(),w(this,Te,"m",js).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=w(this,Te,"m",pr).call(this);n&&this._emit("finalMessage",n);const u=w(this,Te,"m",Bs).call(this);u&&this._emit("finalContent",u);const s=w(this,Te,"m",Ns).call(this);s&&this._emit("finalFunctionToolCall",s);const r=w(this,Te,"m",qs).call(this);r!=null&&this._emit("finalFunctionToolCallResult",r),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",w(this,Te,"m",js).call(this))}async _createChatCompletion(t,n,u){const s=u?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),w(this,Te,"m",Al).call(this,n);const r=await t.chat.completions.create({...n,stream:!1},{...u,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Ci(r,n))}async _runChatCompletion(t,n,u){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(t,n,u)}async _runTools(t,n,u){const s="tool",{tool_choice:r="auto",stream:i,...o}=n,a=typeof r!="string"&&r.type==="function"&&r?.function?.name,{maxChatCompletions:c=Z2}=u||{},l=n.tools.map(d=>{if(vu(d)){if(!d.$callback)throw new H("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:d.$callback,name:d.function.name,description:d.function.description||"",parameters:d.function.parameters,parse:d.$parseRaw,strict:!0}}}return d}),f={};for(const d of l)d.type==="function"&&(f[d.function.name||d.function.function.name]=d.function);const h="tools"in n?l.map(d=>d.type==="function"?{type:"function",function:{name:d.function.name||d.function.function.name,parameters:d.function.parameters,description:d.function.description,strict:d.function.strict}}:d):void 0;for(const d of n.messages)this._addMessage(d,!1);for(let d=0;d<c;++d){const b=(await this._createChatCompletion(t,{...o,tool_choice:r,tools:h,messages:[...this.messages]},u)).choices[0]?.message;if(!b)throw new H("missing message in ChatCompletion response");if(!b.tool_calls?.length)return;for(const x of b.tool_calls){if(x.type!=="function")continue;const v=x.id,{name:m,arguments:k}=x.function,y=f[m];if(y){if(a&&a!==m){const O=`Invalid tool_call: ${JSON.stringify(m)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:s,tool_call_id:v,content:O});continue}}else{const O=`Invalid tool_call: ${JSON.stringify(m)}. Available options are: ${Object.keys(f).map($=>JSON.stringify($)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:v,content:O});continue}let E;try{E=J2(y)?await y.parse(k):k}catch(O){const $=O instanceof Error?O.message:String(O);this._addMessage({role:s,tool_call_id:v,content:$});continue}const C=await y.function(E,this),D=w(this,Te,"m",El).call(this,C);if(this._addMessage({role:s,tool_call_id:v,content:D}),a)return}}}}Te=new WeakSet,Bs=function(){return w(this,Te,"m",pr).call(this).content??null},pr=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(fr(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new H("stream ended without producing a ChatCompletionMessage with role=assistant")},Ns=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(fr(n)&&n?.tool_calls?.length)return n.tool_calls.filter(u=>u.type==="function").at(-1)?.function}},qs=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(kl(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(u=>u.role==="assistant"&&u.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},js=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},Al=function(t){if(t.n!=null&&t.n>1)throw new H("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},El=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Ei extends Dl{static runTools(t,n,u){const s=new Ei,r={...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,r)),s}_addMessage(t,n=!0){super._addMessage(t,n),fr(t)&&t.content&&this._emit("content",t.content)}}const Sl=1,Fl=2,Il=4,Rl=8,Tl=16,Ml=32,Ol=64,Pl=128,$l=256,Ll=Pl|$l,Bl=Tl|Ml|Ll|Ol,Nl=Sl|Fl|Bl,ql=Il|Rl,G2=Nl|ql,ve={STR:Sl,NUM:Fl,ARR:Il,OBJ:Rl,NULL:Tl,BOOL:Ml,NAN:Ol,INFINITY:Pl,MINUS_INFINITY:$l,INF:Ll,SPECIAL:Bl,ATOM:Nl,COLLECTION:ql,ALL:G2};class X2 extends Error{}class Q2 extends Error{}function Y2(e,t=ve.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return eb(e.trim(),t)}const eb=(e,t)=>{const n=e.length;let u=0;const s=h=>{throw new X2(`${h} at position ${u}`)},r=h=>{throw new Q2(`${h} at position ${u}`)},i=()=>(f(),u>=n&&s("Unexpected end of input"),e[u]==='"'?o():e[u]==="{"?a():e[u]==="["?c():e.substring(u,u+4)==="null"||ve.NULL&t&&n-u<4&&"null".startsWith(e.substring(u))?(u+=4,null):e.substring(u,u+4)==="true"||ve.BOOL&t&&n-u<4&&"true".startsWith(e.substring(u))?(u+=4,!0):e.substring(u,u+5)==="false"||ve.BOOL&t&&n-u<5&&"false".startsWith(e.substring(u))?(u+=5,!1):e.substring(u,u+8)==="Infinity"||ve.INFINITY&t&&n-u<8&&"Infinity".startsWith(e.substring(u))?(u+=8,1/0):e.substring(u,u+9)==="-Infinity"||ve.MINUS_INFINITY&t&&1<n-u&&n-u<9&&"-Infinity".startsWith(e.substring(u))?(u+=9,-1/0):e.substring(u,u+3)==="NaN"||ve.NAN&t&&n-u<3&&"NaN".startsWith(e.substring(u))?(u+=3,NaN):l()),o=()=>{const h=u;let d=!1;for(u++;u<n&&(e[u]!=='"'||d&&e[u-1]==="\\");)d=e[u]==="\\"?!d:!1,u++;if(e.charAt(u)=='"')try{return JSON.parse(e.substring(h,++u-Number(d)))}catch(p){r(String(p))}else if(ve.STR&t)try{return JSON.parse(e.substring(h,u-Number(d))+'"')}catch{return JSON.parse(e.substring(h,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},a=()=>{u++,f();const h={};try{for(;e[u]!=="}";){if(f(),u>=n&&ve.OBJ&t)return h;const d=o();f(),u++;try{const p=i();Object.defineProperty(h,d,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(ve.OBJ&t)return h;throw p}f(),e[u]===","&&u++}}catch{if(ve.OBJ&t)return h;s("Expected '}' at end of object")}return u++,h},c=()=>{u++;const h=[];try{for(;e[u]!=="]";)h.push(i()),f(),e[u]===","&&u++}catch{if(ve.ARR&t)return h;s("Expected ']' at end of array")}return u++,h},l=()=>{if(u===0){e==="-"&&ve.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(d){if(ve.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}r(String(d))}}const h=u;for(e[u]==="-"&&u++;e[u]&&!",]}".includes(e[u]);)u++;u==n&&!(ve.NUM&t)&&s("Unterminated number literal");try{return JSON.parse(e.substring(h,u))}catch{e.substring(h,u)==="-"&&ve.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(h,e.lastIndexOf("e")))}catch(p){r(String(p))}}},f=()=>{for(;u<n&&` 
\r	`.includes(e[u]);)u++};return i()},ra=e=>Y2(e,ve.ALL^ve.NUM);var me,kt,on,Mt,ls,Tu,fs,ds,hs,Mu,ps,sa;class pu extends Dl{constructor(t){super(),me.add(this),kt.set(this,void 0),on.set(this,void 0),Mt.set(this,void 0),J(this,kt,t),J(this,on,[])}get currentChatCompletionSnapshot(){return w(this,Mt,"f")}static fromReadableStream(t){const n=new pu(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,u){const s=new pu(n);return s._run(()=>s._runChatCompletion(t,{...n,stream:!0},{...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(t,n,u){super._createChatCompletion;const s=u?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),w(this,me,"m",ls).call(this);const r=await t.chat.completions.create({...n,stream:!0},{...u,signal:this.controller.signal});this._connected();for await(const i of r)w(this,me,"m",fs).call(this,i);if(r.controller.signal?.aborted)throw new Ge;return this._addChatCompletion(w(this,me,"m",Mu).call(this))}async _fromReadableStream(t,n){const u=n?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort())),w(this,me,"m",ls).call(this),this._connected();const s=gt.fromReadableStream(t,this.controller);let r;for await(const i of s)r&&r!==i.id&&this._addChatCompletion(w(this,me,"m",Mu).call(this)),w(this,me,"m",fs).call(this,i),r=i.id;if(s.controller.signal?.aborted)throw new Ge;return this._addChatCompletion(w(this,me,"m",Mu).call(this))}[(kt=new WeakMap,on=new WeakMap,Mt=new WeakMap,me=new WeakSet,ls=function(){this.ended||J(this,Mt,void 0)},Tu=function(n){let u=w(this,on,"f")[n.index];return u||(u={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},w(this,on,"f")[n.index]=u,u)},fs=function(n){if(this.ended)return;const u=w(this,me,"m",sa).call(this,n);this._emit("chunk",n,u);for(const s of n.choices){const r=u.choices[s.index];s.delta.content!=null&&r.message?.role==="assistant"&&r.message?.content&&(this._emit("content",s.delta.content,r.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:r.message.content,parsed:r.message.parsed})),s.delta.refusal!=null&&r.message?.role==="assistant"&&r.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:r.message.refusal}),s.logprobs?.content!=null&&r.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:r.logprobs?.content??[]}),s.logprobs?.refusal!=null&&r.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:r.logprobs?.refusal??[]});const i=w(this,me,"m",Tu).call(this,r);r.finish_reason&&(w(this,me,"m",hs).call(this,r),i.current_tool_call_index!=null&&w(this,me,"m",ds).call(this,r,i.current_tool_call_index));for(const o of s.delta.tool_calls??[])i.current_tool_call_index!==o.index&&(w(this,me,"m",hs).call(this,r),i.current_tool_call_index!=null&&w(this,me,"m",ds).call(this,r,i.current_tool_call_index)),i.current_tool_call_index=o.index;for(const o of s.delta.tool_calls??[]){const a=r.message.tool_calls?.[o.index];a?.type&&(a?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:a.function?.name,index:o.index,arguments:a.function.arguments,parsed_arguments:a.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(a?.type,void 0))}}},ds=function(n,u){if(w(this,me,"m",Tu).call(this,n).done_tool_calls.has(u))return;const r=n.message.tool_calls?.[u];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if(r.type==="function"){const i=w(this,kt,"f")?.tools?.find(o=>lr(o)&&o.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:u,arguments:r.function.arguments,parsed_arguments:vu(i)?i.$parseRaw(r.function.arguments):i?.function.strict?JSON.parse(r.function.arguments):null})}else r.type},hs=function(n){const u=w(this,me,"m",Tu).call(this,n);if(n.message.content&&!u.content_done){u.content_done=!0;const s=w(this,me,"m",ps).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!u.refusal_done&&(u.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!u.logprobs_content_done&&(u.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!u.logprobs_refusal_done&&(u.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Mu=function(){if(this.ended)throw new H("stream has ended, this shouldn't happen");const n=w(this,Mt,"f");if(!n)throw new H("request ended without sending any chunks");return J(this,Mt,void 0),J(this,on,[]),tb(n,w(this,kt,"f"))},ps=function(){const n=w(this,kt,"f")?.response_format;return ki(n)?n:null},sa=function(n){var u,s,r,i;let o=w(this,Mt,"f");const{choices:a,...c}=n;o?Object.assign(o,c):o=J(this,Mt,{...c,choices:[]});for(const{delta:l,finish_reason:f,index:h,logprobs:d=null,...p}of n.choices){let b=o.choices[h];if(b||(b=o.choices[h]={finish_reason:f,index:h,message:{},logprobs:d,...p}),d)if(!b.logprobs)b.logprobs=Object.assign({},d);else{const{content:C,refusal:D,...O}=d;Object.assign(b.logprobs,O),C&&((u=b.logprobs).content??(u.content=[]),b.logprobs.content.push(...C)),D&&((s=b.logprobs).refusal??(s.refusal=[]),b.logprobs.refusal.push(...D))}if(f&&(b.finish_reason=f,w(this,kt,"f")&&wl(w(this,kt,"f")))){if(f==="length")throw new nl;if(f==="content_filter")throw new ul}if(Object.assign(b,p),!l)continue;const{content:x,refusal:v,function_call:m,role:k,tool_calls:y,...E}=l;if(Object.assign(b.message,E),v&&(b.message.refusal=(b.message.refusal||"")+v),k&&(b.message.role=k),m&&(b.message.function_call?(m.name&&(b.message.function_call.name=m.name),m.arguments&&((r=b.message.function_call).arguments??(r.arguments=""),b.message.function_call.arguments+=m.arguments)):b.message.function_call=m),x&&(b.message.content=(b.message.content||"")+x,!b.message.refusal&&w(this,me,"m",ps).call(this)&&(b.message.parsed=ra(b.message.content))),y){b.message.tool_calls||(b.message.tool_calls=[]);for(const{index:C,id:D,type:O,function:$,...L}of y){const U=(i=b.message.tool_calls)[C]??(i[C]={});Object.assign(U,L),D&&(U.id=D),O&&(U.type=O),$&&(U.function??(U.function={name:$.name??"",arguments:""})),$?.name&&(U.function.name=$.name),$?.arguments&&(U.function.arguments+=$.arguments,V2(w(this,kt,"f"),U)&&(U.function.parsed_arguments=ra(U.function.arguments)))}}}return o},Symbol.asyncIterator)](){const t=[],n=[];let u=!1;return this.on("chunk",s=>{const r=n.shift();r?r.resolve(s):t.push(s)}),this.on("end",()=>{u=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),this.on("error",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((r,i)=>n.push({resolve:r,reject:i})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new gt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function tb(e,t){const{id:n,choices:u,created:s,model:r,system_fingerprint:i,...o}=e,a={...o,id:n,choices:u.map(({message:c,finish_reason:l,index:f,logprobs:h,...d})=>{if(!l)throw new H(`missing finish_reason for choice ${f}`);const{content:p=null,function_call:b,tool_calls:x,...v}=c,m=c.role;if(!m)throw new H(`missing role for choice ${f}`);if(b){const{arguments:k,name:y}=b;if(k==null)throw new H(`missing function_call.arguments for choice ${f}`);if(!y)throw new H(`missing function_call.name for choice ${f}`);return{...d,message:{content:p,function_call:{arguments:k,name:y},role:m,refusal:c.refusal??null},finish_reason:l,index:f,logprobs:h}}return x?{...d,index:f,finish_reason:l,logprobs:h,message:{...v,role:m,content:p,refusal:c.refusal??null,tool_calls:x.map((k,y)=>{const{function:E,type:C,id:D,...O}=k,{arguments:$,name:L,...U}=E||{};if(D==null)throw new H(`missing choices[${f}].tool_calls[${y}].id
${Ou(e)}`);if(C==null)throw new H(`missing choices[${f}].tool_calls[${y}].type
${Ou(e)}`);if(L==null)throw new H(`missing choices[${f}].tool_calls[${y}].function.name
${Ou(e)}`);if($==null)throw new H(`missing choices[${f}].tool_calls[${y}].function.arguments
${Ou(e)}`);return{...O,id:D,type:C,function:{...U,name:L,arguments:$}}})}}:{...d,message:{...v,content:p,role:m,refusal:c.refusal??null},finish_reason:l,index:f,logprobs:h}}),created:s,model:r,object:"chat.completion",...i?{system_fingerprint:i}:{}};return z2(a,t)}function Ou(e){return JSON.stringify(e)}class br extends pu{static fromReadableStream(t){const n=new br(null);return n._run(()=>n._fromReadableStream(t)),n}static runTools(t,n,u){const s=new br(n),r={...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,r)),s}}let Di=class extends z{constructor(){super(...arguments),this.messages=new yl(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(R`/chat/completions/${t}`,n)}update(t,n,u){return this._client.post(R`/chat/completions/${t}`,{body:n,...u})}list(t={},n){return this._client.getAPIList("/chat/completions",ge,{query:t,...n})}delete(t,n){return this._client.delete(R`/chat/completions/${t}`,n)}parse(t,n){return K2(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(u=>Ci(u,t))}runTools(t,n){return t.stream?br.runTools(this._client,t,n):Ei.runTools(this._client,t,n)}stream(t,n){return pu.createChatCompletion(this._client,t,n)}};Di.Messages=yl;class Si extends z{constructor(){super(...arguments),this.completions=new Di(this._client)}}Si.Completions=Di;const jl=Symbol("brand.privateNullableHeaders");function*nb(e){if(!e)return;if(jl in e){const{values:u,nulls:s}=e;yield*u.entries();for(const r of s)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():zo(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let u of n){const s=u[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const r=zo(u[1])?u[1]:[u[1]];let i=!1;for(const o of r)o!==void 0&&(t&&!i&&(i=!0,yield[s,null]),yield[s,o])}}const j=e=>{const t=new Headers,n=new Set;for(const u of e){const s=new Set;for(const[r,i]of nb(u)){const o=r.toLowerCase();s.has(o)||(t.delete(r),s.add(o)),i===null?(t.delete(r),n.add(o)):(t.append(r,i),n.delete(o))}}return{[jl]:!0,values:t,nulls:n}};class Ul extends z{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:j([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class zl extends z{create(t,n){return this._client.post("/audio/transcriptions",un({body:t,...n,stream:t.stream??!1,__metadata:{model:t.model}},this._client))}}class Hl extends z{create(t,n){return this._client.post("/audio/translations",un({body:t,...n,__metadata:{model:t.model}},this._client))}}class ku extends z{constructor(){super(...arguments),this.transcriptions=new zl(this._client),this.translations=new Hl(this._client),this.speech=new Ul(this._client)}}ku.Transcriptions=zl;ku.Translations=Hl;ku.Speech=Ul;class Wl extends z{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(R`/batches/${t}`,n)}list(t={},n){return this._client.getAPIList("/batches",ge,{query:t,...n})}cancel(t,n){return this._client.post(R`/batches/${t}/cancel`,n)}}class Vl extends z{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(R`/assistants/${t}`,{...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,u){return this._client.post(R`/assistants/${t}`,{body:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t={},n){return this._client.getAPIList("/assistants",ge,{query:t,...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(R`/assistants/${t}`,{...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Kl=class extends z{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class Jl extends z{create(t,n){return this._client.post("/realtime/transcription_sessions",{body:t,...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let $r=class extends z{constructor(){super(...arguments),this.sessions=new Kl(this._client),this.transcriptionSessions=new Jl(this._client)}};$r.Sessions=Kl;$r.TranscriptionSessions=Jl;class Zl extends z{create(t,n){return this._client.post("/chatkit/sessions",{body:t,...n,headers:j([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(t,n){return this._client.post(R`/chatkit/sessions/${t}/cancel`,{...n,headers:j([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let Gl=class extends z{retrieve(t,n){return this._client.get(R`/chatkit/threads/${t}`,{...n,headers:j([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(t={},n){return this._client.getAPIList("/chatkit/threads",cr,{query:t,...n,headers:j([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(t,n){return this._client.delete(R`/chatkit/threads/${t}`,{...n,headers:j([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(t,n={},u){return this._client.getAPIList(R`/chatkit/threads/${t}/items`,cr,{query:n,...u,headers:j([{"OpenAI-Beta":"chatkit_beta=v1"},u?.headers])})}};class Lr extends z{constructor(){super(...arguments),this.sessions=new Zl(this._client),this.threads=new Gl(this._client)}}Lr.Sessions=Zl;Lr.Threads=Gl;class Xl extends z{create(t,n,u){return this._client.post(R`/threads/${t}/messages`,{body:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}retrieve(t,n,u){const{thread_id:s}=n;return this._client.get(R`/threads/${s}/messages/${t}`,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}update(t,n,u){const{thread_id:s,...r}=n;return this._client.post(R`/threads/${s}/messages/${t}`,{body:r,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t,n={},u){return this._client.getAPIList(R`/threads/${t}/messages`,ge,{query:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}delete(t,n,u){const{thread_id:s}=n;return this._client.delete(R`/threads/${s}/messages/${t}`,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}}class Ql extends z{retrieve(t,n,u){const{thread_id:s,run_id:r,...i}=n;return this._client.get(R`/threads/${s}/runs/${r}/steps/${t}`,{query:i,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t,n,u){const{thread_id:s,...r}=n;return this._client.getAPIList(R`/threads/${s}/runs/${t}/steps`,ge,{query:r,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}}const ub=e=>{if(typeof Buffer<"u"){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{const t=atob(e),n=t.length,u=new Uint8Array(n);for(let s=0;s<n;s++)u[s]=t.charCodeAt(s);return Array.from(new Float32Array(u.buffer))}};var rb={};const an=e=>{if(typeof globalThis.process<"u")return rb?.[e]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(e)?.trim()};var Ee,Yt,Us,dt,Ku,Ye,en,gn,Qt,gr,We,Ju,Zu,uu,Vn,Kn,ia,oa,aa,ca,la,fa,da;class ru extends Ai{constructor(){super(...arguments),Ee.add(this),Us.set(this,[]),dt.set(this,{}),Ku.set(this,{}),Ye.set(this,void 0),en.set(this,void 0),gn.set(this,void 0),Qt.set(this,void 0),gr.set(this,void 0),We.set(this,void 0),Ju.set(this,void 0),Zu.set(this,void 0),uu.set(this,void 0)}[(Us=new WeakMap,dt=new WeakMap,Ku=new WeakMap,Ye=new WeakMap,en=new WeakMap,gn=new WeakMap,Qt=new WeakMap,gr=new WeakMap,We=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,uu=new WeakMap,Ee=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let u=!1;return this.on("event",s=>{const r=n.shift();r?r.resolve(s):t.push(s)}),this.on("end",()=>{u=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),this.on("error",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((r,i)=>n.push({resolve:r,reject:i})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new Yt;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){const u=n?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=gt.fromReadableStream(t,this.controller);for await(const r of s)w(this,Ee,"m",Vn).call(this,r);if(s.controller.signal?.aborted)throw new Ge;return this._addRun(w(this,Ee,"m",Kn).call(this))}toReadableStream(){return new gt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,u,s){const r=new Yt;return r._run(()=>r._runToolAssistantStream(t,n,u,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createToolAssistantStream(t,n,u,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...u,stream:!0},o=await t.submitToolOutputs(n,i,{...s,signal:this.controller.signal});this._connected();for await(const a of o)w(this,Ee,"m",Vn).call(this,a);if(o.controller.signal?.aborted)throw new Ge;return this._addRun(w(this,Ee,"m",Kn).call(this))}static createThreadAssistantStream(t,n,u){const s=new Yt;return s._run(()=>s._threadAssistantStream(t,n,{...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(t,n,u,s){const r=new Yt;return r._run(()=>r._runAssistantStream(t,n,u,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}currentEvent(){return w(this,Ju,"f")}currentRun(){return w(this,Zu,"f")}currentMessageSnapshot(){return w(this,Ye,"f")}currentRunStepSnapshot(){return w(this,uu,"f")}async finalRunSteps(){return await this.done(),Object.values(w(this,dt,"f"))}async finalMessages(){return await this.done(),Object.values(w(this,Ku,"f"))}async finalRun(){if(await this.done(),!w(this,en,"f"))throw Error("Final run was not received.");return w(this,en,"f")}async _createThreadAssistantStream(t,n,u){const s=u?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const r={...n,stream:!0},i=await t.createAndRun(r,{...u,signal:this.controller.signal});this._connected();for await(const o of i)w(this,Ee,"m",Vn).call(this,o);if(i.controller.signal?.aborted)throw new Ge;return this._addRun(w(this,Ee,"m",Kn).call(this))}async _createAssistantStream(t,n,u,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...u,stream:!0},o=await t.create(n,i,{...s,signal:this.controller.signal});this._connected();for await(const a of o)w(this,Ee,"m",Vn).call(this,a);if(o.controller.signal?.aborted)throw new Ge;return this._addRun(w(this,Ee,"m",Kn).call(this))}static accumulateDelta(t,n){for(const[u,s]of Object.entries(n)){if(!t.hasOwnProperty(u)){t[u]=s;continue}let r=t[u];if(r==null){t[u]=s;continue}if(u==="index"||u==="type"){t[u]=s;continue}if(typeof r=="string"&&typeof s=="string")r+=s;else if(typeof r=="number"&&typeof s=="number")r+=s;else if(os(r)&&os(s))r=this.accumulateDelta(r,s);else if(Array.isArray(r)&&Array.isArray(s)){if(r.every(i=>typeof i=="string"||typeof i=="number")){r.push(...s);continue}for(const i of s){if(!os(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const a=r[o];a==null?r.push(i):r[o]=this.accumulateDelta(a,i)}continue}else throw Error(`Unhandled record type: ${u}, deltaValue: ${s}, accValue: ${r}`);t[u]=r}return t}_addRun(t){return t}async _threadAssistantStream(t,n,u){return await this._createThreadAssistantStream(n,t,u)}async _runAssistantStream(t,n,u,s){return await this._createAssistantStream(n,t,u,s)}async _runToolAssistantStream(t,n,u,s){return await this._createToolAssistantStream(n,t,u,s)}}Yt=ru,Vn=function(t){if(!this.ended)switch(J(this,Ju,t),w(this,Ee,"m",aa).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":w(this,Ee,"m",da).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":w(this,Ee,"m",oa).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":w(this,Ee,"m",ia).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Kn=function(){if(this.ended)throw new H("stream has ended, this shouldn't happen");if(!w(this,en,"f"))throw Error("Final run has not been received");return w(this,en,"f")},ia=function(t){const[n,u]=w(this,Ee,"m",la).call(this,t,w(this,Ye,"f"));J(this,Ye,n),w(this,Ku,"f")[n.id]=n;for(const s of u){const r=n.content[s.index];r?.type=="text"&&this._emit("textCreated",r.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const s of t.data.delta.content){if(s.type=="text"&&s.text){let r=s.text,i=n.content[s.index];if(i&&i.type=="text")this._emit("textDelta",r,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=w(this,gn,"f")){if(w(this,Qt,"f"))switch(w(this,Qt,"f").type){case"text":this._emit("textDone",w(this,Qt,"f").text,w(this,Ye,"f"));break;case"image_file":this._emit("imageFileDone",w(this,Qt,"f").image_file,w(this,Ye,"f"));break}J(this,gn,s.index)}J(this,Qt,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(w(this,gn,"f")!==void 0){const s=t.data.content[w(this,gn,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,w(this,Ye,"f"));break;case"text":this._emit("textDone",s.text,w(this,Ye,"f"));break}}w(this,Ye,"f")&&this._emit("messageDone",t.data),J(this,Ye,void 0)}},oa=function(t){const n=w(this,Ee,"m",ca).call(this,t);switch(J(this,uu,n),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const u=t.data.delta;if(u.step_details&&u.step_details.type=="tool_calls"&&u.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const r of u.step_details.tool_calls)r.index==w(this,gr,"f")?this._emit("toolCallDelta",r,n.step_details.tool_calls[r.index]):(w(this,We,"f")&&this._emit("toolCallDone",w(this,We,"f")),J(this,gr,r.index),J(this,We,n.step_details.tool_calls[r.index]),w(this,We,"f")&&this._emit("toolCallCreated",w(this,We,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":J(this,uu,void 0),t.data.step_details.type=="tool_calls"&&w(this,We,"f")&&(this._emit("toolCallDone",w(this,We,"f")),J(this,We,void 0)),this._emit("runStepDone",t.data,n);break}},aa=function(t){w(this,Us,"f").push(t),this._emit("event",t)},ca=function(t){switch(t.event){case"thread.run.step.created":return w(this,dt,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=w(this,dt,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let u=t.data;if(u.delta){const s=Yt.accumulateDelta(n,u.delta);w(this,dt,"f")[t.data.id]=s}return w(this,dt,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":w(this,dt,"f")[t.data.id]=t.data;break}if(w(this,dt,"f")[t.data.id])return w(this,dt,"f")[t.data.id];throw new Error("No snapshot available")},la=function(t,n){let u=[];switch(t.event){case"thread.message.created":return[t.data,u];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=t.data;if(s.delta.content)for(const r of s.delta.content)if(r.index in n.content){let i=n.content[r.index];n.content[r.index]=w(this,Ee,"m",fa).call(this,r,i)}else n.content[r.index]=r,u.push(r);return[n,u];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,u];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},fa=function(t,n){return Yt.accumulateDelta(n,t)},da=function(t){switch(J(this,Zu,t.data),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":J(this,en,t.data),w(this,We,"f")&&(this._emit("toolCallDone",w(this,We,"f")),J(this,We,void 0));break}};let Fi=class extends z{constructor(){super(...arguments),this.steps=new Ql(this._client)}create(t,n,u){const{include:s,...r}=n;return this._client.post(R`/threads/${t}/runs`,{query:{include:s},body:r,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers]),stream:n.stream??!1})}retrieve(t,n,u){const{thread_id:s}=n;return this._client.get(R`/threads/${s}/runs/${t}`,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}update(t,n,u){const{thread_id:s,...r}=n;return this._client.post(R`/threads/${s}/runs/${t}`,{body:r,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t,n={},u){return this._client.getAPIList(R`/threads/${t}/runs`,ge,{query:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}cancel(t,n,u){const{thread_id:s}=n;return this._client.post(R`/threads/${s}/runs/${t}/cancel`,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}async createAndPoll(t,n,u){const s=await this.create(t,n,u);return await this.poll(s.id,{thread_id:t},u)}createAndStream(t,n,u){return ru.createAssistantStream(t,this._client.beta.threads.runs,n,u)}async poll(t,n,u){const s=j([u?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":u?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:r,response:i}=await this.retrieve(t,n,{...u,headers:{...u?.headers,...s}}).withResponse();switch(r.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(u?.pollIntervalMs)o=u.pollIntervalMs;else{const a=i.headers.get("openai-poll-after-ms");if(a){const c=parseInt(a);isNaN(c)||(o=c)}}await wu(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return r}}}stream(t,n,u){return ru.createAssistantStream(t,this._client.beta.threads.runs,n,u)}submitToolOutputs(t,n,u){const{thread_id:s,...r}=n;return this._client.post(R`/threads/${s}/runs/${t}/submit_tool_outputs`,{body:r,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(t,n,u){const s=await this.submitToolOutputs(t,n,u);return await this.poll(s.id,n,u)}submitToolOutputsStream(t,n,u){return ru.createToolAssistantStream(t,this._client.beta.threads.runs,n,u)}};Fi.Steps=Ql;class Br extends z{constructor(){super(...arguments),this.runs=new Fi(this._client),this.messages=new Xl(this._client)}create(t={},n){return this._client.post("/threads",{body:t,...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(R`/threads/${t}`,{...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,u){return this._client.post(R`/threads/${t}`,{body:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}delete(t,n){return this._client.delete(R`/threads/${t}`,{...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async createAndRunPoll(t,n){const u=await this.createAndRun(t,n);return await this.runs.poll(u.id,{thread_id:u.thread_id},n)}createAndRunStream(t,n){return ru.createThreadAssistantStream(t,this._client.beta.threads,n)}}Br.Runs=Fi;Br.Messages=Xl;class Fn extends z{constructor(){super(...arguments),this.realtime=new $r(this._client),this.chatkit=new Lr(this._client),this.assistants=new Vl(this._client),this.threads=new Br(this._client)}}Fn.Realtime=$r;Fn.ChatKit=Lr;Fn.Assistants=Vl;Fn.Threads=Br;class Yl extends z{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class e0 extends z{retrieve(t,n,u){const{container_id:s}=n;return this._client.get(R`/containers/${s}/files/${t}/content`,{...u,headers:j([{Accept:"application/binary"},u?.headers]),__binaryResponse:!0})}}let Ii=class extends z{constructor(){super(...arguments),this.content=new e0(this._client)}create(t,n,u){return this._client.post(R`/containers/${t}/files`,un({body:n,...u},this._client))}retrieve(t,n,u){const{container_id:s}=n;return this._client.get(R`/containers/${s}/files/${t}`,u)}list(t,n={},u){return this._client.getAPIList(R`/containers/${t}/files`,ge,{query:n,...u})}delete(t,n,u){const{container_id:s}=n;return this._client.delete(R`/containers/${s}/files/${t}`,{...u,headers:j([{Accept:"*/*"},u?.headers])})}};Ii.Content=e0;class Ri extends z{constructor(){super(...arguments),this.files=new Ii(this._client)}create(t,n){return this._client.post("/containers",{body:t,...n})}retrieve(t,n){return this._client.get(R`/containers/${t}`,n)}list(t={},n){return this._client.getAPIList("/containers",ge,{query:t,...n})}delete(t,n){return this._client.delete(R`/containers/${t}`,{...n,headers:j([{Accept:"*/*"},n?.headers])})}}Ri.Files=Ii;class t0 extends z{create(t,n,u){const{include:s,...r}=n;return this._client.post(R`/conversations/${t}/items`,{query:{include:s},body:r,...u})}retrieve(t,n,u){const{conversation_id:s,...r}=n;return this._client.get(R`/conversations/${s}/items/${t}`,{query:r,...u})}list(t,n={},u){return this._client.getAPIList(R`/conversations/${t}/items`,cr,{query:n,...u})}delete(t,n,u){const{conversation_id:s}=n;return this._client.delete(R`/conversations/${s}/items/${t}`,u)}}class Ti extends z{constructor(){super(...arguments),this.items=new t0(this._client)}create(t={},n){return this._client.post("/conversations",{body:t,...n})}retrieve(t,n){return this._client.get(R`/conversations/${t}`,n)}update(t,n,u){return this._client.post(R`/conversations/${t}`,{body:n,...u})}delete(t,n){return this._client.delete(R`/conversations/${t}`,n)}}Ti.Items=t0;class n0 extends z{create(t,n){const u=!!t.encoding_format;let s=u?t.encoding_format:"base64";u&&Ae(this._client).debug("embeddings/user defined encoding_format:",t.encoding_format);const r=this._client.post("/embeddings",{body:{...t,encoding_format:s},...n});return u?r:(Ae(this._client).debug("embeddings/decoding base64 embeddings from base64"),r._thenUnwrap(i=>(i&&i.data&&i.data.forEach(o=>{const a=o.embedding;o.embedding=ub(a)}),i)))}}class u0 extends z{retrieve(t,n,u){const{eval_id:s,run_id:r}=n;return this._client.get(R`/evals/${s}/runs/${r}/output_items/${t}`,u)}list(t,n,u){const{eval_id:s,...r}=n;return this._client.getAPIList(R`/evals/${s}/runs/${t}/output_items`,ge,{query:r,...u})}}class Mi extends z{constructor(){super(...arguments),this.outputItems=new u0(this._client)}create(t,n,u){return this._client.post(R`/evals/${t}/runs`,{body:n,...u})}retrieve(t,n,u){const{eval_id:s}=n;return this._client.get(R`/evals/${s}/runs/${t}`,u)}list(t,n={},u){return this._client.getAPIList(R`/evals/${t}/runs`,ge,{query:n,...u})}delete(t,n,u){const{eval_id:s}=n;return this._client.delete(R`/evals/${s}/runs/${t}`,u)}cancel(t,n,u){const{eval_id:s}=n;return this._client.post(R`/evals/${s}/runs/${t}`,u)}}Mi.OutputItems=u0;class Oi extends z{constructor(){super(...arguments),this.runs=new Mi(this._client)}create(t,n){return this._client.post("/evals",{body:t,...n})}retrieve(t,n){return this._client.get(R`/evals/${t}`,n)}update(t,n,u){return this._client.post(R`/evals/${t}`,{body:n,...u})}list(t={},n){return this._client.getAPIList("/evals",ge,{query:t,...n})}delete(t,n){return this._client.delete(R`/evals/${t}`,n)}}Oi.Runs=Mi;let r0=class extends z{create(t,n){return this._client.post("/files",un({body:t,...n},this._client))}retrieve(t,n){return this._client.get(R`/files/${t}`,n)}list(t={},n){return this._client.getAPIList("/files",ge,{query:t,...n})}delete(t,n){return this._client.delete(R`/files/${t}`,n)}content(t,n){return this._client.get(R`/files/${t}/content`,{...n,headers:j([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:u=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),r=Date.now();let i=await this.retrieve(t);for(;!i.status||!s.has(i.status);)if(await wu(n),i=await this.retrieve(t),Date.now()-r>u)throw new xi({message:`Giving up on waiting for file ${t} to finish processing after ${u} milliseconds.`});return i}};class s0 extends z{}let i0=class extends z{run(t,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:t,...n})}validate(t,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:t,...n})}};class Pi extends z{constructor(){super(...arguments),this.graders=new i0(this._client)}}Pi.Graders=i0;class o0 extends z{create(t,n,u){return this._client.getAPIList(R`/fine_tuning/checkpoints/${t}/permissions`,Pr,{body:n,method:"post",...u})}retrieve(t,n={},u){return this._client.get(R`/fine_tuning/checkpoints/${t}/permissions`,{query:n,...u})}delete(t,n,u){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(R`/fine_tuning/checkpoints/${s}/permissions/${t}`,u)}}let $i=class extends z{constructor(){super(...arguments),this.permissions=new o0(this._client)}};$i.Permissions=o0;class a0 extends z{list(t,n={},u){return this._client.getAPIList(R`/fine_tuning/jobs/${t}/checkpoints`,ge,{query:n,...u})}}class Li extends z{constructor(){super(...arguments),this.checkpoints=new a0(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(R`/fine_tuning/jobs/${t}`,n)}list(t={},n){return this._client.getAPIList("/fine_tuning/jobs",ge,{query:t,...n})}cancel(t,n){return this._client.post(R`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},u){return this._client.getAPIList(R`/fine_tuning/jobs/${t}/events`,ge,{query:n,...u})}pause(t,n){return this._client.post(R`/fine_tuning/jobs/${t}/pause`,n)}resume(t,n){return this._client.post(R`/fine_tuning/jobs/${t}/resume`,n)}}Li.Checkpoints=a0;class In extends z{constructor(){super(...arguments),this.methods=new s0(this._client),this.jobs=new Li(this._client),this.checkpoints=new $i(this._client),this.alpha=new Pi(this._client)}}In.Methods=s0;In.Jobs=Li;In.Checkpoints=$i;In.Alpha=Pi;class c0 extends z{}class Bi extends z{constructor(){super(...arguments),this.graderModels=new c0(this._client)}}Bi.GraderModels=c0;class l0 extends z{createVariation(t,n){return this._client.post("/images/variations",un({body:t,...n},this._client))}edit(t,n){return this._client.post("/images/edits",un({body:t,...n,stream:t.stream??!1},this._client))}generate(t,n){return this._client.post("/images/generations",{body:t,...n,stream:t.stream??!1})}}class f0 extends z{retrieve(t,n){return this._client.get(R`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",Pr,t)}delete(t,n){return this._client.delete(R`/models/${t}`,n)}}class d0 extends z{create(t,n){return this._client.post("/moderations",{body:t,...n})}}class h0 extends z{accept(t,n,u){return this._client.post(R`/realtime/calls/${t}/accept`,{body:n,...u,headers:j([{Accept:"*/*"},u?.headers])})}hangup(t,n){return this._client.post(R`/realtime/calls/${t}/hangup`,{...n,headers:j([{Accept:"*/*"},n?.headers])})}refer(t,n,u){return this._client.post(R`/realtime/calls/${t}/refer`,{body:n,...u,headers:j([{Accept:"*/*"},u?.headers])})}reject(t,n={},u){return this._client.post(R`/realtime/calls/${t}/reject`,{body:n,...u,headers:j([{Accept:"*/*"},u?.headers])})}}class p0 extends z{create(t,n){return this._client.post("/realtime/client_secrets",{body:t,...n})}}class Nr extends z{constructor(){super(...arguments),this.clientSecrets=new p0(this._client),this.calls=new h0(this._client)}}Nr.ClientSecrets=p0;Nr.Calls=h0;function sb(e,t){return!t||!ob(t)?{...e,output_parsed:null,output:e.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(u=>({...u,parsed:null}))}:n)}:b0(e,t)}function b0(e,t){const n=e.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:lb(t,s)};if(s.type==="message"){const r=s.content.map(i=>i.type==="output_text"?{...i,parsed:ib(t,i.text)}:i);return{...s,content:r}}return s}),u=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||zs(u),Object.defineProperty(u,"output_parsed",{enumerable:!0,get(){for(const s of u.output)if(s.type==="message"){for(const r of s.content)if(r.type==="output_text"&&r.parsed!==null)return r.parsed}return null}}),u}function ib(e,t){return e.text?.format?.type!=="json_schema"?null:"$parseRaw"in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t)}function ob(e){return!!ki(e.text?.format)}function ab(e){return e?.$brand==="auto-parseable-tool"}function cb(e,t){return e.find(n=>n.type==="function"&&n.name===t)}function lb(e,t){const n=cb(e.tools??[],t.name);return{...t,...t,parsed_arguments:ab(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function zs(e){const t=[];for(const n of e.output)if(n.type==="message")for(const u of n.content)u.type==="output_text"&&t.push(u.text);e.output_text=t.join("")}var cn,Pu,Ot,$u,ha,pa,ba,ga;class Ni extends Ai{constructor(t){super(),cn.add(this),Pu.set(this,void 0),Ot.set(this,void 0),$u.set(this,void 0),J(this,Pu,t)}static createResponse(t,n,u){const s=new Ni(n);return s._run(()=>s._createOrRetrieveResponse(t,n,{...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(t,n,u){const s=u?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),w(this,cn,"m",ha).call(this);let r,i=null;"response_id"in n?(r=await t.responses.retrieve(n.response_id,{stream:!0},{...u,signal:this.controller.signal,stream:!0}),i=n.starting_after??null):r=await t.responses.create({...n,stream:!0},{...u,signal:this.controller.signal}),this._connected();for await(const o of r)w(this,cn,"m",pa).call(this,o,i);if(r.controller.signal?.aborted)throw new Ge;return w(this,cn,"m",ba).call(this)}[(Pu=new WeakMap,Ot=new WeakMap,$u=new WeakMap,cn=new WeakSet,ha=function(){this.ended||J(this,Ot,void 0)},pa=function(n,u){if(this.ended)return;const s=(i,o)=>{(u==null||o.sequence_number>u)&&this._emit(i,o)},r=w(this,cn,"m",ga).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new H(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new H(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new H(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new H(`missing output at index ${n.output_index}`);i.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:i.arguments});break}default:s(n.type,n);break}},ba=function(){if(this.ended)throw new H("stream has ended, this shouldn't happen");const n=w(this,Ot,"f");if(!n)throw new H("request ended without sending any events");J(this,Ot,void 0);const u=fb(n,w(this,Pu,"f"));return J(this,$u,u),u},ga=function(n){let u=w(this,Ot,"f");if(!u){if(n.type!=="response.created")throw new H(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return u=J(this,Ot,n.response),u}switch(n.type){case"response.output_item.added":{u.output.push(n.item);break}case"response.content_part.added":{const s=u.output[n.output_index];if(!s)throw new H(`missing output at index ${n.output_index}`);const r=s.type,i=n.part;r==="message"&&i.type!=="reasoning_text"?s.content.push(i):r==="reasoning"&&i.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(i));break}case"response.output_text.delta":{const s=u.output[n.output_index];if(!s)throw new H(`missing output at index ${n.output_index}`);if(s.type==="message"){const r=s.content[n.content_index];if(!r)throw new H(`missing content at index ${n.content_index}`);if(r.type!=="output_text")throw new H(`expected content to be 'output_text', got ${r.type}`);r.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=u.output[n.output_index];if(!s)throw new H(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=u.output[n.output_index];if(!s)throw new H(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const r=s.content?.[n.content_index];if(!r)throw new H(`missing content at index ${n.content_index}`);if(r.type!=="reasoning_text")throw new H(`expected content to be 'reasoning_text', got ${r.type}`);r.text+=n.delta}break}case"response.completed":{J(this,Ot,n.response);break}}return u},Symbol.asyncIterator)](){const t=[],n=[];let u=!1;return this.on("event",s=>{const r=n.shift();r?r.resolve(s):t.push(s)}),this.on("end",()=>{u=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),this.on("error",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((r,i)=>n.push({resolve:r,reject:i})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=w(this,$u,"f");if(!t)throw new H("stream ended without producing a ChatCompletion");return t}}function fb(e,t){return sb(e,t)}class g0 extends z{list(t,n={},u){return this._client.getAPIList(R`/responses/${t}/input_items`,ge,{query:n,...u})}}class m0 extends z{count(t={},n){return this._client.post("/responses/input_tokens",{body:t,...n})}}class qr extends z{constructor(){super(...arguments),this.inputItems=new g0(this._client),this.inputTokens=new m0(this._client)}create(t,n){return this._client.post("/responses",{body:t,...n,stream:t.stream??!1})._thenUnwrap(u=>("object"in u&&u.object==="response"&&zs(u),u))}retrieve(t,n={},u){return this._client.get(R`/responses/${t}`,{query:n,...u,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&zs(s),s))}delete(t,n){return this._client.delete(R`/responses/${t}`,{...n,headers:j([{Accept:"*/*"},n?.headers])})}parse(t,n){return this._client.responses.create(t,n)._thenUnwrap(u=>b0(u,t))}stream(t,n){return Ni.createResponse(this._client,t,n)}cancel(t,n){return this._client.post(R`/responses/${t}/cancel`,n)}compact(t={},n){return this._client.post("/responses/compact",{body:t,...n})}}qr.InputItems=g0;qr.InputTokens=m0;class _0 extends z{create(t,n,u){return this._client.post(R`/uploads/${t}/parts`,un({body:n,...u},this._client))}}class qi extends z{constructor(){super(...arguments),this.parts=new _0(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(R`/uploads/${t}/cancel`,n)}complete(t,n,u){return this._client.post(R`/uploads/${t}/complete`,{body:n,...u})}}qi.Parts=_0;const db=async e=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const u=[];for(const s of t)s.status==="fulfilled"&&u.push(s.value);return u};class x0 extends z{create(t,n,u){return this._client.post(R`/vector_stores/${t}/file_batches`,{body:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}retrieve(t,n,u){const{vector_store_id:s}=n;return this._client.get(R`/vector_stores/${s}/file_batches/${t}`,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}cancel(t,n,u){const{vector_store_id:s}=n;return this._client.post(R`/vector_stores/${s}/file_batches/${t}/cancel`,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}async createAndPoll(t,n,u){const s=await this.create(t,n);return await this.poll(t,s.id,u)}listFiles(t,n,u){const{vector_store_id:s,...r}=n;return this._client.getAPIList(R`/vector_stores/${s}/file_batches/${t}/files`,ge,{query:r,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}async poll(t,n,u){const s=j([u?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":u?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:r,response:i}=await this.retrieve(n,{vector_store_id:t},{...u,headers:s}).withResponse();switch(r.status){case"in_progress":let o=5e3;if(u?.pollIntervalMs)o=u.pollIntervalMs;else{const a=i.headers.get("openai-poll-after-ms");if(a){const c=parseInt(a);isNaN(c)||(o=c)}}await wu(o);break;case"failed":case"cancelled":case"completed":return r}}}async uploadAndPoll(t,{files:n,fileIds:u=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const r=s?.maxConcurrency??5,i=Math.min(r,n.length),o=this._client,a=n.values(),c=[...u];async function l(h){for(let d of h){const p=await o.files.create({file:d,purpose:"assistants"},s);c.push(p.id)}}const f=Array(i).fill(a).map(l);return await db(f),await this.createAndPoll(t,{file_ids:c})}}class y0 extends z{create(t,n,u){return this._client.post(R`/vector_stores/${t}/files`,{body:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}retrieve(t,n,u){const{vector_store_id:s}=n;return this._client.get(R`/vector_stores/${s}/files/${t}`,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}update(t,n,u){const{vector_store_id:s,...r}=n;return this._client.post(R`/vector_stores/${s}/files/${t}`,{body:r,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t,n={},u){return this._client.getAPIList(R`/vector_stores/${t}/files`,ge,{query:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}delete(t,n,u){const{vector_store_id:s}=n;return this._client.delete(R`/vector_stores/${s}/files/${t}`,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}async createAndPoll(t,n,u){const s=await this.create(t,n,u);return await this.poll(t,s.id,u)}async poll(t,n,u){const s=j([u?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":u?.pollIntervalMs?.toString()??void 0}]);for(;;){const r=await this.retrieve(n,{vector_store_id:t},{...u,headers:s}).withResponse(),i=r.data;switch(i.status){case"in_progress":let o=5e3;if(u?.pollIntervalMs)o=u.pollIntervalMs;else{const a=r.response.headers.get("openai-poll-after-ms");if(a){const c=parseInt(a);isNaN(c)||(o=c)}}await wu(o);break;case"failed":case"completed":return i}}}async upload(t,n,u){const s=await this._client.files.create({file:n,purpose:"assistants"},u);return this.create(t,{file_id:s.id},u)}async uploadAndPoll(t,n,u){const s=await this.upload(t,n,u);return await this.poll(t,s.id,u)}content(t,n,u){const{vector_store_id:s}=n;return this._client.getAPIList(R`/vector_stores/${s}/files/${t}/content`,Pr,{...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}}class jr extends z{constructor(){super(...arguments),this.files=new y0(this._client),this.fileBatches=new x0(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(R`/vector_stores/${t}`,{...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,u){return this._client.post(R`/vector_stores/${t}`,{body:n,...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t={},n){return this._client.getAPIList("/vector_stores",ge,{query:t,...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(R`/vector_stores/${t}`,{...n,headers:j([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(t,n,u){return this._client.getAPIList(R`/vector_stores/${t}/search`,Pr,{body:n,method:"post",...u,headers:j([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}}jr.Files=y0;jr.FileBatches=x0;class w0 extends z{create(t,n){return this._client.post("/videos",ta({body:t,...n},this._client))}retrieve(t,n){return this._client.get(R`/videos/${t}`,n)}list(t={},n){return this._client.getAPIList("/videos",cr,{query:t,...n})}delete(t,n){return this._client.delete(R`/videos/${t}`,n)}downloadContent(t,n={},u){return this._client.get(R`/videos/${t}/content`,{query:n,...u,headers:j([{Accept:"application/binary"},u?.headers]),__binaryResponse:!0})}remix(t,n,u){return this._client.post(R`/videos/${t}/remix`,ta({body:n,...u},this._client))}}var bn,v0,Gu;class k0 extends z{constructor(){super(...arguments),bn.add(this)}async unwrap(t,n,u=this._client.webhookSecret,s=300){return await this.verifySignature(t,n,u,s),JSON.parse(t)}async verifySignature(t,n,u=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");w(this,bn,"m",v0).call(this,u);const r=j([n]).values,i=w(this,bn,"m",Gu).call(this,r,"webhook-signature"),o=w(this,bn,"m",Gu).call(this,r,"webhook-timestamp"),a=w(this,bn,"m",Gu).call(this,r,"webhook-id"),c=parseInt(o,10);if(isNaN(c))throw new Nn("Invalid webhook timestamp format");const l=Math.floor(Date.now()/1e3);if(l-c>s)throw new Nn("Webhook timestamp is too old");if(c>l+s)throw new Nn("Webhook timestamp is too new");const f=i.split(" ").map(b=>b.startsWith("v1,")?b.substring(3):b),h=u.startsWith("whsec_")?Buffer.from(u.replace("whsec_",""),"base64"):Buffer.from(u,"utf-8"),d=a?`${a}.${o}.${t}`:`${o}.${t}`,p=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const b of f)try{const x=Buffer.from(b,"base64");if(await crypto.subtle.verify("HMAC",p,x,new TextEncoder().encode(d)))return}catch{continue}throw new Nn("The given webhook signature does not match the expected signature")}}bn=new WeakSet,v0=function(t){if(typeof t!="string"||t.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Gu=function(t,n){if(!t)throw new Error("Headers are required");const u=t.get(n);if(u==null)throw new Error(`Missing required header: ${n}`);return u};var Hs,ji,Xu,C0;class Q{constructor({baseURL:t=an("OPENAI_BASE_URL"),apiKey:n=an("OPENAI_API_KEY"),organization:u=an("OPENAI_ORG_ID")??null,project:s=an("OPENAI_PROJECT_ID")??null,webhookSecret:r=an("OPENAI_WEBHOOK_SECRET")??null,...i}={}){if(Hs.add(this),Xu.set(this,void 0),this.completions=new Yl(this),this.chat=new Si(this),this.embeddings=new n0(this),this.files=new r0(this),this.images=new l0(this),this.audio=new ku(this),this.moderations=new d0(this),this.models=new f0(this),this.fineTuning=new In(this),this.graders=new Bi(this),this.vectorStores=new jr(this),this.webhooks=new k0(this),this.beta=new Fn(this),this.batches=new Wl(this),this.uploads=new qi(this),this.responses=new qr(this),this.realtime=new Nr(this),this.conversations=new Ti(this),this.evals=new Oi(this),this.containers=new Ri(this),this.videos=new w0(this),n===void 0)throw new H("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:n,organization:u,project:s,webhookSecret:r,...i,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&h2())throw new H(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??ji.DEFAULT_TIMEOUT,this.logger=o.logger??console;const a="warn";this.logLevel=a,this.logLevel=Yo(o.logLevel,"ClientOptions.logLevel",this)??Yo(an("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??a,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??_2(),J(this,Xu,y2),this._options=o,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=u,this.project=s,this.webhookSecret=r}withOptions(t){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...t})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){}async authHeaders(t){return j([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(t){return E2(t,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${hn}`}defaultIdempotencyKey(){return`stainless-node-retry-${Kc()}`}makeStatusError(t,n,u,s){return De.generate(t,n,u,s)}async _callApiKey(){const t=this._options.apiKey;if(typeof t!="function")return!1;let n;try{n=await t()}catch(u){throw u instanceof H?u:new H(`Failed to get token from 'apiKey' function: ${u.message}`,{cause:u})}if(typeof n!="string"||!n)throw new H(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(t,n,u){const s=!w(this,Hs,"m",C0).call(this)&&u||this.baseURL,r=a2(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return c2(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(t){await this._callApiKey()}async prepareRequest(t,{url:n,options:u}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,u){return this.request(Promise.resolve(u).then(s=>({method:t,path:n,...s})))}request(t,n=null){return new Or(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,u){const s=await t,r=s.maxRetries??this.maxRetries;n==null&&(n=r),await this.prepareOptions(s);const{req:i,url:o,timeout:a}=await this.buildRequest(s,{retryCount:r-n});await this.prepareRequest(i,{url:o,options:s});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),l=u===void 0?"":`, retryOf: ${u}`,f=Date.now();if(Ae(this).debug(`[${c}] sending request`,Xt({retryOfRequestLogID:u,method:s.method,url:o,options:s,headers:i.headers})),s.signal?.aborted)throw new Ge;const h=new AbortController,d=await this.fetchWithTimeout(o,i,a,h).catch(Ts),p=Date.now();if(d instanceof globalThis.Error){const v=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new Ge;const m=Rs(d)||/timed? ?out/i.test(String(d)+("cause"in d?String(d.cause):""));if(n)return Ae(this).info(`[${c}] connection ${m?"timed out":"failed"} - ${v}`),Ae(this).debug(`[${c}] connection ${m?"timed out":"failed"} (${v})`,Xt({retryOfRequestLogID:u,url:o,durationMs:p-f,message:d.message})),this.retryRequest(s,n,u??c);throw Ae(this).info(`[${c}] connection ${m?"timed out":"failed"} - error; no more retries left`),Ae(this).debug(`[${c}] connection ${m?"timed out":"failed"} (error; no more retries left)`,Xt({retryOfRequestLogID:u,url:o,durationMs:p-f,message:d.message})),m?new xi:new Tr({cause:d})}const b=[...d.headers.entries()].filter(([v])=>v==="x-request-id").map(([v,m])=>", "+v+": "+JSON.stringify(m)).join(""),x=`[${c}${l}${b}] ${i.method} ${o} ${d.ok?"succeeded":"failed"} with status ${d.status} in ${p-f}ms`;if(!d.ok){const v=await this.shouldRetry(d);if(n&&v){const D=`retrying, ${n} attempts remaining`;return await x2(d.body),Ae(this).info(`${x} - ${D}`),Ae(this).debug(`[${c}] response error (${D})`,Xt({retryOfRequestLogID:u,url:d.url,status:d.status,headers:d.headers,durationMs:p-f})),this.retryRequest(s,n,u??c,d.headers)}const m=v?"error; no more retries left":"error; not retryable";Ae(this).info(`${x} - ${m}`);const k=await d.text().catch(D=>Ts(D).message),y=d2(k),E=y?void 0:k;throw Ae(this).debug(`[${c}] response error (${m})`,Xt({retryOfRequestLogID:u,url:d.url,status:d.status,headers:d.headers,message:E,durationMs:Date.now()-f})),this.makeStatusError(d.status,y,E,d.headers)}return Ae(this).info(x),Ae(this).debug(`[${c}] response start`,Xt({retryOfRequestLogID:u,url:d.url,status:d.status,headers:d.headers,durationMs:p-f})),{response:d,options:s,controller:h,requestLogID:c,retryOfRequestLogID:u,startTime:f}}getAPIList(t,n,u){return this.requestAPIList(n,{method:"get",path:t,...u})}requestAPIList(t,n){const u=this.makeRequest(n,null,void 0);return new P2(this,u,t)}async fetchWithTimeout(t,n,u,s){const{signal:r,method:i,...o}=n||{};r&&r.addEventListener("abort",()=>s.abort());const a=setTimeout(()=>s.abort(),u),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,l={signal:s.signal,...c?{duplex:"half"}:{},method:"GET",...o};i&&(l.method=i.toUpperCase());try{return await this.fetch.call(void 0,t,l)}finally{clearTimeout(a)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,u,s){let r;const i=s?.get("retry-after-ms");if(i){const a=parseFloat(i);Number.isNaN(a)||(r=a)}const o=s?.get("retry-after");if(o&&!r){const a=parseFloat(o);Number.isNaN(a)?r=Date.parse(o)-Date.now():r=a*1e3}if(!(r&&0<=r&&r<60*1e3)){const a=t.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,a)}return await wu(r),this.makeRequest(t,n-1,u)}calculateDefaultRetryTimeoutMillis(t,n){const r=n-t,i=Math.min(.5*Math.pow(2,r),8),o=1-Math.random()*.25;return i*o*1e3}async buildRequest(t,{retryCount:n=0}={}){const u={...t},{method:s,path:r,query:i,defaultBaseURL:o}=u,a=this.buildURL(r,i,o);"timeout"in u&&f2("timeout",u.timeout),u.timeout=u.timeout??this.timeout;const{bodyHeaders:c,body:l}=this.buildBody({options:u}),f=await this.buildHeaders({options:t,method:s,bodyHeaders:c,retryCount:n});return{req:{method:s,headers:f,...u.signal&&{signal:u.signal},...globalThis.ReadableStream&&l instanceof globalThis.ReadableStream&&{duplex:"half"},...l&&{body:l},...this.fetchOptions??{},...u.fetchOptions??{}},url:a,timeout:u.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:u,retryCount:s}){let r={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);const i=j([r,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{},...m2(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(t),this._options.defaultHeaders,u,t.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const u=j([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&u.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:il(t)}:w(this,Xu,"f").call(this,{body:t,headers:u})}}ji=Q,Xu=new WeakMap,Hs=new WeakSet,C0=function(){return this.baseURL!=="https://api.openai.com/v1"};Q.OpenAI=ji;Q.DEFAULT_TIMEOUT=6e5;Q.OpenAIError=H;Q.APIError=De;Q.APIConnectionError=Tr;Q.APIConnectionTimeoutError=xi;Q.APIUserAbortError=Ge;Q.NotFoundError=Xc;Q.ConflictError=Qc;Q.RateLimitError=el;Q.BadRequestError=Jc;Q.AuthenticationError=Zc;Q.InternalServerError=tl;Q.PermissionDeniedError=Gc;Q.UnprocessableEntityError=Yc;Q.InvalidWebhookSignatureError=Nn;Q.toFile=q2;Q.Completions=Yl;Q.Chat=Si;Q.Embeddings=n0;Q.Files=r0;Q.Images=l0;Q.Audio=ku;Q.Moderations=d0;Q.Models=f0;Q.FineTuning=In;Q.Graders=Bi;Q.VectorStores=jr;Q.Webhooks=k0;Q.Beta=Fn;Q.Batches=Wl;Q.Uploads=qi;Q.Responses=qr;Q.Realtime=Nr;Q.Conversations=Ti;Q.Evals=Oi;Q.Containers=Ri;Q.Videos=w0;function hb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bs={exports:{}},ma;function pb(){return ma||(ma=1,(function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,u=1,s=0;t.Diff=function(r,i){return[r,i]},t.prototype.diff_main=function(r,i,o,a){typeof a>"u"&&(this.Diff_Timeout<=0?a=Number.MAX_VALUE:a=new Date().getTime()+this.Diff_Timeout*1e3);var c=a;if(r==null||i==null)throw new Error("Null input. (diff_main)");if(r==i)return r?[new t.Diff(s,r)]:[];typeof o>"u"&&(o=!0);var l=o,f=this.diff_commonPrefix(r,i),h=r.substring(0,f);r=r.substring(f),i=i.substring(f),f=this.diff_commonSuffix(r,i);var d=r.substring(r.length-f);r=r.substring(0,r.length-f),i=i.substring(0,i.length-f);var p=this.diff_compute_(r,i,l,c);return h&&p.unshift(new t.Diff(s,h)),d&&p.push(new t.Diff(s,d)),this.diff_cleanupMerge(p),p},t.prototype.diff_compute_=function(r,i,o,a){var c;if(!r)return[new t.Diff(u,i)];if(!i)return[new t.Diff(n,r)];var l=r.length>i.length?r:i,f=r.length>i.length?i:r,h=l.indexOf(f);if(h!=-1)return c=[new t.Diff(u,l.substring(0,h)),new t.Diff(s,f),new t.Diff(u,l.substring(h+f.length))],r.length>i.length&&(c[0][0]=c[2][0]=n),c;if(f.length==1)return[new t.Diff(n,r),new t.Diff(u,i)];var d=this.diff_halfMatch_(r,i);if(d){var p=d[0],b=d[1],x=d[2],v=d[3],m=d[4],k=this.diff_main(p,x,o,a),y=this.diff_main(b,v,o,a);return k.concat([new t.Diff(s,m)],y)}return o&&r.length>100&&i.length>100?this.diff_lineMode_(r,i,a):this.diff_bisect_(r,i,a)},t.prototype.diff_lineMode_=function(r,i,o){var a=this.diff_linesToChars_(r,i);r=a.chars1,i=a.chars2;var c=a.lineArray,l=this.diff_main(r,i,!1,o);this.diff_charsToLines_(l,c),this.diff_cleanupSemantic(l),l.push(new t.Diff(s,""));for(var f=0,h=0,d=0,p="",b="";f<l.length;){switch(l[f][0]){case u:d++,b+=l[f][1];break;case n:h++,p+=l[f][1];break;case s:if(h>=1&&d>=1){l.splice(f-h-d,h+d),f=f-h-d;for(var x=this.diff_main(p,b,!1,o),v=x.length-1;v>=0;v--)l.splice(f,0,x[v]);f=f+x.length}d=0,h=0,p="",b="";break}f++}return l.pop(),l},t.prototype.diff_bisect_=function(r,i,o){for(var a=r.length,c=i.length,l=Math.ceil((a+c)/2),f=l,h=2*l,d=new Array(h),p=new Array(h),b=0;b<h;b++)d[b]=-1,p[b]=-1;d[f+1]=0,p[f+1]=0;for(var x=a-c,v=x%2!=0,m=0,k=0,y=0,E=0,C=0;C<l&&!(new Date().getTime()>o);C++){for(var D=-C+m;D<=C-k;D+=2){var O=f+D,$;D==-C||D!=C&&d[O-1]<d[O+1]?$=d[O+1]:$=d[O-1]+1;for(var L=$-D;$<a&&L<c&&r.charAt($)==i.charAt(L);)$++,L++;if(d[O]=$,$>a)k+=2;else if(L>c)m+=2;else if(v){var U=f+x-D;if(U>=0&&U<h&&p[U]!=-1){var W=a-p[U];if($>=W)return this.diff_bisectSplit_(r,i,$,L,o)}}}for(var ee=-C+y;ee<=C-E;ee+=2){var U=f+ee,W;ee==-C||ee!=C&&p[U-1]<p[U+1]?W=p[U+1]:W=p[U-1]+1;for(var Y=W-ee;W<a&&Y<c&&r.charAt(a-W-1)==i.charAt(c-Y-1);)W++,Y++;if(p[U]=W,W>a)E+=2;else if(Y>c)y+=2;else if(!v){var O=f+x-ee;if(O>=0&&O<h&&d[O]!=-1){var $=d[O],L=f+$-O;if(W=a-W,$>=W)return this.diff_bisectSplit_(r,i,$,L,o)}}}}return[new t.Diff(n,r),new t.Diff(u,i)]},t.prototype.diff_bisectSplit_=function(r,i,o,a,c){var l=r.substring(0,o),f=i.substring(0,a),h=r.substring(o),d=i.substring(a),p=this.diff_main(l,f,!1,c),b=this.diff_main(h,d,!1,c);return p.concat(b)},t.prototype.diff_linesToChars_=function(r,i){var o=[],a={};o[0]="";function c(d){for(var p="",b=0,x=-1,v=o.length;x<d.length-1;){x=d.indexOf(`
`,b),x==-1&&(x=d.length-1);var m=d.substring(b,x+1);(a.hasOwnProperty?a.hasOwnProperty(m):a[m]!==void 0)?p+=String.fromCharCode(a[m]):(v==l&&(m=d.substring(b),x=d.length),p+=String.fromCharCode(v),a[m]=v,o[v++]=m),b=x+1}return p}var l=4e4,f=c(r);l=65535;var h=c(i);return{chars1:f,chars2:h,lineArray:o}},t.prototype.diff_charsToLines_=function(r,i){for(var o=0;o<r.length;o++){for(var a=r[o][1],c=[],l=0;l<a.length;l++)c[l]=i[a.charCodeAt(l)];r[o][1]=c.join("")}},t.prototype.diff_commonPrefix=function(r,i){if(!r||!i||r.charAt(0)!=i.charAt(0))return 0;for(var o=0,a=Math.min(r.length,i.length),c=a,l=0;o<c;)r.substring(l,c)==i.substring(l,c)?(o=c,l=o):a=c,c=Math.floor((a-o)/2+o);return c},t.prototype.diff_commonSuffix=function(r,i){if(!r||!i||r.charAt(r.length-1)!=i.charAt(i.length-1))return 0;for(var o=0,a=Math.min(r.length,i.length),c=a,l=0;o<c;)r.substring(r.length-c,r.length-l)==i.substring(i.length-c,i.length-l)?(o=c,l=o):a=c,c=Math.floor((a-o)/2+o);return c},t.prototype.diff_commonOverlap_=function(r,i){var o=r.length,a=i.length;if(o==0||a==0)return 0;o>a?r=r.substring(o-a):o<a&&(i=i.substring(0,o));var c=Math.min(o,a);if(r==i)return c;for(var l=0,f=1;;){var h=r.substring(c-f),d=i.indexOf(h);if(d==-1)return l;f+=d,(d==0||r.substring(c-f)==i.substring(0,f))&&(l=f,f++)}},t.prototype.diff_halfMatch_=function(r,i){if(this.Diff_Timeout<=0)return null;var o=r.length>i.length?r:i,a=r.length>i.length?i:r;if(o.length<4||a.length*2<o.length)return null;var c=this;function l(k,y,E){for(var C=k.substring(E,E+Math.floor(k.length/4)),D=-1,O="",$,L,U,W;(D=y.indexOf(C,D+1))!=-1;){var ee=c.diff_commonPrefix(k.substring(E),y.substring(D)),Y=c.diff_commonSuffix(k.substring(0,E),y.substring(0,D));O.length<Y+ee&&(O=y.substring(D-Y,D)+y.substring(D,D+ee),$=k.substring(0,E-Y),L=k.substring(E+ee),U=y.substring(0,D-Y),W=y.substring(D+ee))}return O.length*2>=k.length?[$,L,U,W,O]:null}var f=l(o,a,Math.ceil(o.length/4)),h=l(o,a,Math.ceil(o.length/2)),d;if(!f&&!h)return null;h?f?d=f[4].length>h[4].length?f:h:d=h:d=f;var p,b,x,v;r.length>i.length?(p=d[0],b=d[1],x=d[2],v=d[3]):(x=d[0],v=d[1],p=d[2],b=d[3]);var m=d[4];return[p,b,x,v,m]},t.prototype.diff_cleanupSemantic=function(r){for(var i=!1,o=[],a=0,c=null,l=0,f=0,h=0,d=0,p=0;l<r.length;)r[l][0]==s?(o[a++]=l,f=d,h=p,d=0,p=0,c=r[l][1]):(r[l][0]==u?d+=r[l][1].length:p+=r[l][1].length,c&&c.length<=Math.max(f,h)&&c.length<=Math.max(d,p)&&(r.splice(o[a-1],0,new t.Diff(n,c)),r[o[a-1]+1][0]=u,a--,a--,l=a>0?o[a-1]:-1,f=0,h=0,d=0,p=0,c=null,i=!0)),l++;for(i&&this.diff_cleanupMerge(r),this.diff_cleanupSemanticLossless(r),l=1;l<r.length;){if(r[l-1][0]==n&&r[l][0]==u){var b=r[l-1][1],x=r[l][1],v=this.diff_commonOverlap_(b,x),m=this.diff_commonOverlap_(x,b);v>=m?(v>=b.length/2||v>=x.length/2)&&(r.splice(l,0,new t.Diff(s,x.substring(0,v))),r[l-1][1]=b.substring(0,b.length-v),r[l+1][1]=x.substring(v),l++):(m>=b.length/2||m>=x.length/2)&&(r.splice(l,0,new t.Diff(s,b.substring(0,m))),r[l-1][0]=u,r[l-1][1]=x.substring(0,x.length-m),r[l+1][0]=n,r[l+1][1]=b.substring(m),l++),l++}l++}},t.prototype.diff_cleanupSemanticLossless=function(r){function i(m,k){if(!m||!k)return 6;var y=m.charAt(m.length-1),E=k.charAt(0),C=y.match(t.nonAlphaNumericRegex_),D=E.match(t.nonAlphaNumericRegex_),O=C&&y.match(t.whitespaceRegex_),$=D&&E.match(t.whitespaceRegex_),L=O&&y.match(t.linebreakRegex_),U=$&&E.match(t.linebreakRegex_),W=L&&m.match(t.blanklineEndRegex_),ee=U&&k.match(t.blanklineStartRegex_);return W||ee?5:L||U?4:C&&!O&&$?3:O||$?2:C||D?1:0}for(var o=1;o<r.length-1;){if(r[o-1][0]==s&&r[o+1][0]==s){var a=r[o-1][1],c=r[o][1],l=r[o+1][1],f=this.diff_commonSuffix(a,c);if(f){var h=c.substring(c.length-f);a=a.substring(0,a.length-f),c=h+c.substring(0,c.length-f),l=h+l}for(var d=a,p=c,b=l,x=i(a,c)+i(c,l);c.charAt(0)===l.charAt(0);){a+=c.charAt(0),c=c.substring(1)+l.charAt(0),l=l.substring(1);var v=i(a,c)+i(c,l);v>=x&&(x=v,d=a,p=c,b=l)}r[o-1][1]!=d&&(d?r[o-1][1]=d:(r.splice(o-1,1),o--),r[o][1]=p,b?r[o+1][1]=b:(r.splice(o+1,1),o--))}o++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(r){for(var i=!1,o=[],a=0,c=null,l=0,f=!1,h=!1,d=!1,p=!1;l<r.length;)r[l][0]==s?(r[l][1].length<this.Diff_EditCost&&(d||p)?(o[a++]=l,f=d,h=p,c=r[l][1]):(a=0,c=null),d=p=!1):(r[l][0]==n?p=!0:d=!0,c&&(f&&h&&d&&p||c.length<this.Diff_EditCost/2&&f+h+d+p==3)&&(r.splice(o[a-1],0,new t.Diff(n,c)),r[o[a-1]+1][0]=u,a--,c=null,f&&h?(d=p=!0,a=0):(a--,l=a>0?o[a-1]:-1,d=p=!1),i=!0)),l++;i&&this.diff_cleanupMerge(r)},t.prototype.diff_cleanupMerge=function(r){r.push(new t.Diff(s,""));for(var i=0,o=0,a=0,c="",l="",f;i<r.length;)switch(r[i][0]){case u:a++,l+=r[i][1],i++;break;case n:o++,c+=r[i][1],i++;break;case s:o+a>1?(o!==0&&a!==0&&(f=this.diff_commonPrefix(l,c),f!==0&&(i-o-a>0&&r[i-o-a-1][0]==s?r[i-o-a-1][1]+=l.substring(0,f):(r.splice(0,0,new t.Diff(s,l.substring(0,f))),i++),l=l.substring(f),c=c.substring(f)),f=this.diff_commonSuffix(l,c),f!==0&&(r[i][1]=l.substring(l.length-f)+r[i][1],l=l.substring(0,l.length-f),c=c.substring(0,c.length-f))),i-=o+a,r.splice(i,o+a),c.length&&(r.splice(i,0,new t.Diff(n,c)),i++),l.length&&(r.splice(i,0,new t.Diff(u,l)),i++),i++):i!==0&&r[i-1][0]==s?(r[i-1][1]+=r[i][1],r.splice(i,1)):i++,a=0,o=0,c="",l="";break}r[r.length-1][1]===""&&r.pop();var h=!1;for(i=1;i<r.length-1;)r[i-1][0]==s&&r[i+1][0]==s&&(r[i][1].substring(r[i][1].length-r[i-1][1].length)==r[i-1][1]?(r[i][1]=r[i-1][1]+r[i][1].substring(0,r[i][1].length-r[i-1][1].length),r[i+1][1]=r[i-1][1]+r[i+1][1],r.splice(i-1,1),h=!0):r[i][1].substring(0,r[i+1][1].length)==r[i+1][1]&&(r[i-1][1]+=r[i+1][1],r[i][1]=r[i][1].substring(r[i+1][1].length)+r[i+1][1],r.splice(i+1,1),h=!0)),i++;h&&this.diff_cleanupMerge(r)},t.prototype.diff_xIndex=function(r,i){var o=0,a=0,c=0,l=0,f;for(f=0;f<r.length&&(r[f][0]!==u&&(o+=r[f][1].length),r[f][0]!==n&&(a+=r[f][1].length),!(o>i));f++)c=o,l=a;return r.length!=f&&r[f][0]===n?l:l+(i-c)},t.prototype.diff_prettyHtml=function(r){for(var i=[],o=/&/g,a=/</g,c=/>/g,l=/\n/g,f=0;f<r.length;f++){var h=r[f][0],d=r[f][1],p=d.replace(o,"&amp;").replace(a,"&lt;").replace(c,"&gt;").replace(l,"&para;<br>");switch(h){case u:i[f]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case n:i[f]='<del style="background:#ffe6e6;">'+p+"</del>";break;case s:i[f]="<span>"+p+"</span>";break}}return i.join("")},t.prototype.diff_text1=function(r){for(var i=[],o=0;o<r.length;o++)r[o][0]!==u&&(i[o]=r[o][1]);return i.join("")},t.prototype.diff_text2=function(r){for(var i=[],o=0;o<r.length;o++)r[o][0]!==n&&(i[o]=r[o][1]);return i.join("")},t.prototype.diff_levenshtein=function(r){for(var i=0,o=0,a=0,c=0;c<r.length;c++){var l=r[c][0],f=r[c][1];switch(l){case u:o+=f.length;break;case n:a+=f.length;break;case s:i+=Math.max(o,a),o=0,a=0;break}}return i+=Math.max(o,a),i},t.prototype.diff_toDelta=function(r){for(var i=[],o=0;o<r.length;o++)switch(r[o][0]){case u:i[o]="+"+encodeURI(r[o][1]);break;case n:i[o]="-"+r[o][1].length;break;case s:i[o]="="+r[o][1].length;break}return i.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(r,i){for(var o=[],a=0,c=0,l=i.split(/\t/g),f=0;f<l.length;f++){var h=l[f].substring(1);switch(l[f].charAt(0)){case"+":try{o[a++]=new t.Diff(u,decodeURI(h))}catch{throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var d=parseInt(h,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+h);var p=r.substring(c,c+=d);l[f].charAt(0)=="="?o[a++]=new t.Diff(s,p):o[a++]=new t.Diff(n,p);break;default:if(l[f])throw new Error("Invalid diff operation in diff_fromDelta: "+l[f])}}if(c!=r.length)throw new Error("Delta length ("+c+") does not equal source text length ("+r.length+").");return o},t.prototype.match_main=function(r,i,o){if(r==null||i==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,r.length)),r==i?0:r.length?r.substring(o,o+i.length)==i?o:this.match_bitap_(r,i,o):-1},t.prototype.match_bitap_=function(r,i,o){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var a=this.match_alphabet_(i),c=this;function l($,L){var U=$/i.length,W=Math.abs(o-L);return c.Match_Distance?U+W/c.Match_Distance:W?1:U}var f=this.Match_Threshold,h=r.indexOf(i,o);h!=-1&&(f=Math.min(l(0,h),f),h=r.lastIndexOf(i,o+i.length),h!=-1&&(f=Math.min(l(0,h),f)));var d=1<<i.length-1;h=-1;for(var p,b,x=i.length+r.length,v,m=0;m<i.length;m++){for(p=0,b=x;p<b;)l(m,o+b)<=f?p=b:x=b,b=Math.floor((x-p)/2+p);x=b;var k=Math.max(1,o-b+1),y=Math.min(o+b,r.length)+i.length,E=Array(y+2);E[y+1]=(1<<m)-1;for(var C=y;C>=k;C--){var D=a[r.charAt(C-1)];if(m===0?E[C]=(E[C+1]<<1|1)&D:E[C]=(E[C+1]<<1|1)&D|((v[C+1]|v[C])<<1|1)|v[C+1],E[C]&d){var O=l(m,C-1);if(O<=f)if(f=O,h=C-1,h>o)k=Math.max(1,2*o-h);else break}}if(l(m+1,o)>f)break;v=E}return h},t.prototype.match_alphabet_=function(r){for(var i={},o=0;o<r.length;o++)i[r.charAt(o)]=0;for(var o=0;o<r.length;o++)i[r.charAt(o)]|=1<<r.length-o-1;return i},t.prototype.patch_addContext_=function(r,i){if(i.length!=0){if(r.start2===null)throw Error("patch not initialized");for(var o=i.substring(r.start2,r.start2+r.length1),a=0;i.indexOf(o)!=i.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)a+=this.Patch_Margin,o=i.substring(r.start2-a,r.start2+r.length1+a);a+=this.Patch_Margin;var c=i.substring(r.start2-a,r.start2);c&&r.diffs.unshift(new t.Diff(s,c));var l=i.substring(r.start2+r.length1,r.start2+r.length1+a);l&&r.diffs.push(new t.Diff(s,l)),r.start1-=c.length,r.start2-=c.length,r.length1+=c.length+l.length,r.length2+=c.length+l.length}},t.prototype.patch_make=function(r,i,o){var a,c;if(typeof r=="string"&&typeof i=="string"&&typeof o>"u")a=r,c=this.diff_main(a,i,!0),c.length>2&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(r&&typeof r=="object"&&typeof i>"u"&&typeof o>"u")c=r,a=this.diff_text1(c);else if(typeof r=="string"&&i&&typeof i=="object"&&typeof o>"u")a=r,c=i;else if(typeof r=="string"&&typeof i=="string"&&o&&typeof o=="object")a=r,c=o;else throw new Error("Unknown call format to patch_make.");if(c.length===0)return[];for(var l=[],f=new t.patch_obj,h=0,d=0,p=0,b=a,x=a,v=0;v<c.length;v++){var m=c[v][0],k=c[v][1];switch(!h&&m!==s&&(f.start1=d,f.start2=p),m){case u:f.diffs[h++]=c[v],f.length2+=k.length,x=x.substring(0,p)+k+x.substring(p);break;case n:f.length1+=k.length,f.diffs[h++]=c[v],x=x.substring(0,p)+x.substring(p+k.length);break;case s:k.length<=2*this.Patch_Margin&&h&&c.length!=v+1?(f.diffs[h++]=c[v],f.length1+=k.length,f.length2+=k.length):k.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(f,b),l.push(f),f=new t.patch_obj,h=0,b=x,d=p);break}m!==u&&(d+=k.length),m!==n&&(p+=k.length)}return h&&(this.patch_addContext_(f,b),l.push(f)),l},t.prototype.patch_deepCopy=function(r){for(var i=[],o=0;o<r.length;o++){var a=r[o],c=new t.patch_obj;c.diffs=[];for(var l=0;l<a.diffs.length;l++)c.diffs[l]=new t.Diff(a.diffs[l][0],a.diffs[l][1]);c.start1=a.start1,c.start2=a.start2,c.length1=a.length1,c.length2=a.length2,i[o]=c}return i},t.prototype.patch_apply=function(r,i){if(r.length==0)return[i,[]];r=this.patch_deepCopy(r);var o=this.patch_addPadding(r);i=o+i+o,this.patch_splitMax(r);for(var a=0,c=[],l=0;l<r.length;l++){var f=r[l].start2+a,h=this.diff_text1(r[l].diffs),d,p=-1;if(h.length>this.Match_MaxBits?(d=this.match_main(i,h.substring(0,this.Match_MaxBits),f),d!=-1&&(p=this.match_main(i,h.substring(h.length-this.Match_MaxBits),f+h.length-this.Match_MaxBits),(p==-1||d>=p)&&(d=-1))):d=this.match_main(i,h,f),d==-1)c[l]=!1,a-=r[l].length2-r[l].length1;else{c[l]=!0,a=d-f;var b;if(p==-1?b=i.substring(d,d+h.length):b=i.substring(d,p+this.Match_MaxBits),h==b)i=i.substring(0,d)+this.diff_text2(r[l].diffs)+i.substring(d+h.length);else{var x=this.diff_main(h,b,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(x)/h.length>this.Patch_DeleteThreshold)c[l]=!1;else{this.diff_cleanupSemanticLossless(x);for(var v=0,m,k=0;k<r[l].diffs.length;k++){var y=r[l].diffs[k];y[0]!==s&&(m=this.diff_xIndex(x,v)),y[0]===u?i=i.substring(0,d+m)+y[1]+i.substring(d+m):y[0]===n&&(i=i.substring(0,d+m)+i.substring(d+this.diff_xIndex(x,v+y[1].length))),y[0]!==n&&(v+=y[1].length)}}}}}return i=i.substring(o.length,i.length-o.length),[i,c]},t.prototype.patch_addPadding=function(r){for(var i=this.Patch_Margin,o="",a=1;a<=i;a++)o+=String.fromCharCode(a);for(var a=0;a<r.length;a++)r[a].start1+=i,r[a].start2+=i;var c=r[0],l=c.diffs;if(l.length==0||l[0][0]!=s)l.unshift(new t.Diff(s,o)),c.start1-=i,c.start2-=i,c.length1+=i,c.length2+=i;else if(i>l[0][1].length){var f=i-l[0][1].length;l[0][1]=o.substring(l[0][1].length)+l[0][1],c.start1-=f,c.start2-=f,c.length1+=f,c.length2+=f}if(c=r[r.length-1],l=c.diffs,l.length==0||l[l.length-1][0]!=s)l.push(new t.Diff(s,o)),c.length1+=i,c.length2+=i;else if(i>l[l.length-1][1].length){var f=i-l[l.length-1][1].length;l[l.length-1][1]+=o.substring(0,f),c.length1+=f,c.length2+=f}return o},t.prototype.patch_splitMax=function(r){for(var i=this.Match_MaxBits,o=0;o<r.length;o++)if(!(r[o].length1<=i)){var a=r[o];r.splice(o--,1);for(var c=a.start1,l=a.start2,f="";a.diffs.length!==0;){var h=new t.patch_obj,d=!0;for(h.start1=c-f.length,h.start2=l-f.length,f!==""&&(h.length1=h.length2=f.length,h.diffs.push(new t.Diff(s,f)));a.diffs.length!==0&&h.length1<i-this.Patch_Margin;){var p=a.diffs[0][0],b=a.diffs[0][1];p===u?(h.length2+=b.length,l+=b.length,h.diffs.push(a.diffs.shift()),d=!1):p===n&&h.diffs.length==1&&h.diffs[0][0]==s&&b.length>2*i?(h.length1+=b.length,c+=b.length,d=!1,h.diffs.push(new t.Diff(p,b)),a.diffs.shift()):(b=b.substring(0,i-h.length1-this.Patch_Margin),h.length1+=b.length,c+=b.length,p===s?(h.length2+=b.length,l+=b.length):d=!1,h.diffs.push(new t.Diff(p,b)),b==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(b.length))}f=this.diff_text2(h.diffs),f=f.substring(f.length-this.Patch_Margin);var x=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);x!==""&&(h.length1+=x.length,h.length2+=x.length,h.diffs.length!==0&&h.diffs[h.diffs.length-1][0]===s?h.diffs[h.diffs.length-1][1]+=x:h.diffs.push(new t.Diff(s,x))),d||r.splice(++o,0,h)}}},t.prototype.patch_toText=function(r){for(var i=[],o=0;o<r.length;o++)i[o]=r[o];return i.join("")},t.prototype.patch_fromText=function(r){var i=[];if(!r)return i;for(var o=r.split(`
`),a=0,c=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<o.length;){var l=o[a].match(c);if(!l)throw new Error("Invalid patch string: "+o[a]);var f=new t.patch_obj;for(i.push(f),f.start1=parseInt(l[1],10),l[2]===""?(f.start1--,f.length1=1):l[2]=="0"?f.length1=0:(f.start1--,f.length1=parseInt(l[2],10)),f.start2=parseInt(l[3],10),l[4]===""?(f.start2--,f.length2=1):l[4]=="0"?f.length2=0:(f.start2--,f.length2=parseInt(l[4],10)),a++;a<o.length;){var h=o[a].charAt(0);try{var d=decodeURI(o[a].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+d)}if(h=="-")f.diffs.push(new t.Diff(n,d));else if(h=="+")f.diffs.push(new t.Diff(u,d));else if(h==" ")f.diffs.push(new t.Diff(s,d));else{if(h=="@")break;if(h!=="")throw new Error('Invalid patch mode "'+h+'" in: '+d)}a++}}return i},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var r,i;this.length1===0?r=this.start1+",0":this.length1==1?r=this.start1+1:r=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var o=["@@ -"+r+" +"+i+` @@
`],a,c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case u:a="+";break;case n:a="-";break;case s:a=" ";break}o[c+1]=a+encodeURI(this.diffs[c][1])+`
`}return o.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=u,e.exports.DIFF_EQUAL=s})(bs)),bs.exports}var bb=pb();const gb=hb(bb),mb={class:"text-xs text-purple-400 font-bold uppercase tracking-wider flex items-center gap-1"},_b={class:"flex items-center gap-1"},xb=["title"],yb={key:0,class:"text-xs"},wb={class:"font-mono text-gray-400 whitespace-pre-wrap break-all bg-gray-900/50 p-1 rounded"},vb={key:0,class:"whitespace-pre-wrap"},kb={key:1,class:"space-y-2 w-full"},Cb={class:"font-bold text-purple-300 mb-1 flex items-center gap-1"},Ab={class:"font-mono text-gray-400 whitespace-pre-wrap break-all bg-gray-900/50 p-1 rounded"},Eb={class:"text-[10px] text-gray-500 mt-1"},Db={key:0,class:"self-start text-gray-500 text-xs animate-pulse"},Sb={class:"p-3 border-t border-gray-700 bg-gray-800"},Fb={key:0,class:"mb-2 px-2 py-1 bg-gray-700/50 rounded border-l-2 border-purple-500 flex items-center justify-between group"},Ib={class:"flex items-center gap-2 overflow-hidden"},Rb={class:"text-xs text-gray-300 truncate"},Tb={class:"relative chat-input"},Mb=["placeholder","onKeydown"],Ob=["disabled"],Pb=Dn({__name:"AIChatWindow",props:{show:{type:Boolean},currentLang:{},settings:{},selectedText:{},markdownContent:{}},emits:["update:show","update:selectedText","update:markdownContent","update:diffHighlights","openSettings"],setup(e,{emit:t}){const n=e,u=t,s=_t(()=>mu[n.currentLang]),r=pe([{role:"assistant",content:"Hello! I am your AI assistant. How can I help you with your Markdown today?"}]),i=pe(""),o=pe(!1),a=pe({x:window.innerWidth-380,y:80}),c=pe(!1),l=pe({x:0,y:0}),f=pe(null),h=_t(()=>n.selectedText?n.selectedText.length>50?n.selectedText.substring(0,50)+"...":n.selectedText:""),d=()=>{r.value=[]},p=(E,C)=>{const D=new gb;D.Match_Distance=1e5,D.Match_Threshold=.5;let O=E;const $=[],L=C.split(`
`),U=[];let W=0;for(;W<L.length;){if(L[W].includes("<<<<<<< SEARCH")){const ee=W;let Y=-1,he=-1;for(let te=ee+1;te<L.length;te++)if(L[te].includes("=======")){Y=te;break}if(Y!==-1){for(let te=Y+1;te<L.length;te++)if(L[te].includes(">>>>>>> REPLACE")){he=te;break}}if(Y!==-1&&he!==-1){const te=L.slice(ee+1,Y).join(`
`),re=L.slice(Y+1,he).join(`
`);U.push({search:te,replace:re}),W=he+1;continue}}W++}for(const ee of U){const Y=D.patch_make(ee.search,ee.replace),[he,te]=D.patch_apply(Y,O);if(te.some(re=>re)){const re=D.diff_main(O,he);D.diff_cleanupSemantic(re);let ue=0;for(const[rt,Tt]of re)rt===0?ue+=Tt.length:rt===1&&($.push({start:ue,end:ue+Tt.length}),ue+=Tt.length);O=he}else console.warn("Failed to apply block:",ee.search)}return{content:O,ranges:$}},b=E=>{if(E.type==="function")try{const C=JSON.parse(E.function.arguments);if(E.function.name==="edit"&&C.diff){const D=/=======\s*([\s\S]*?)\s*>>>>>>> REPLACE/.exec(C.diff),O=D?D[1].trim():C.diff;return O.length>150?O.substring(0,150)+"...":O}return JSON.stringify(C)}catch{return E.function.arguments}},x=async()=>{if(!i.value.trim()||o.value)return;if(u("update:diffHighlights",[]),!n.settings.apiKey){alert(s.value.noKeyWarning),u("openSettings");return}let E=`You are a helpful Markdown editor assistant. You help the user write, edit, and improve their markdown content. The markdown has the following content,
`;E+=`

Full Content:
<BEGIN_FILES>
${n.markdownContent}
<END_FILES>`,n.selectedText&&(E+=`

Response based on user selected part:
\`\`\`
${n.selectedText}
\`\`\``),r.value.push({role:"user",content:i.value}),i.value="",await y(),o.value=!0;try{const C=new Q({baseURL:n.settings.apiUrl,apiKey:n.settings.apiKey,dangerouslyAllowBrowser:!0}),D=[{type:"function",function:{name:"edit",description:`Edit the markdown content. Use the following format for the \`diff\` argument:
<<<<<<< SEARCH
[exact content to find]
=======
[new content]
>>>>>>> REPLACE`,parameters:{type:"object",properties:{diff:{type:"string",description:"The search/replace block."}},required:["diff"]}}}],$=(await C.chat.completions.create({messages:[{role:"system",content:E},...r.value.map(L=>({role:L.role,content:L.content,tool_calls:L.tool_calls,tool_call_id:L.tool_call_id,name:L.name}))],model:n.settings.model,tools:D,tool_choice:"auto"})).choices[0]?.message;if($.tool_calls){r.value.push({role:"assistant",content:$.content,tool_calls:$.tool_calls}),await y();for(const W of $.tool_calls)if(W.type==="function"&&W.function.name==="edit"){const ee=JSON.parse(W.function.arguments),{content:Y,ranges:he}=p(n.markdownContent,ee.diff);let te="";Y!==n.markdownContent?(u("update:markdownContent",Y),u("update:diffHighlights",he),te="Successfully applied edit."):te="Failed to apply edit. Search block not found.",r.value.push({role:"tool",tool_call_id:W.id,name:W.function.name,content:te}),await y()}const U=(await C.chat.completions.create({messages:[{role:"system",content:"You are a helpful Markdown editor assistant."},...r.value.map(W=>({role:W.role,content:W.content,tool_calls:W.tool_calls,tool_call_id:W.tool_call_id,name:W.name}))],model:n.settings.model,tools:D})).choices[0]?.message?.content;U&&(r.value.push({role:"assistant",content:U}),await y())}else{const L=$.content??"No response";r.value.push({role:"assistant",content:L}),await y()}}catch(C){console.error(C),r.value.push({role:"assistant",content:`Error: ${C.message}`}),await y()}finally{o.value=!1}},v=E=>{c.value=!0,l.value={x:E.clientX-a.value.x,y:E.clientY-a.value.y},window.addEventListener("mousemove",m),window.addEventListener("mouseup",k)},m=E=>{c.value&&(a.value={x:E.clientX-l.value.x,y:E.clientY-l.value.y})},k=()=>{c.value=!1,window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",k)},y=async()=>{f.value&&(await Ha(),f.value.scrollTop=f.value.scrollHeight)};return ii(()=>{window.innerWidth<1e3&&(a.value={x:20,y:80})}),oi(()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",k)}),(E,C)=>e.show?(xe(),ke("div",{key:0,class:"fixed flex flex-col bg-gray-850 border border-gray-700 rounded-xl shadow-2xl z-50 overflow-hidden",style:wr({left:a.value.x+"px",top:a.value.y+"px",width:"360px",height:"600px"})},[N("div",{class:"h-10 bg-gray-800 border-b border-gray-700 flex items-center justify-between px-3 cursor-move select-none",onMousedown:v},[N("span",mb,[C[3]||(C[3]=N("span",{class:"material-icons text-sm"},"auto_awesome",-1)),tu(" "+ye(s.value.chat),1)]),N("div",_b,[N("button",{class:"text-gray-500 hover:text-gray-300 p-1",title:s.value.clear,onClick:d},[...C[4]||(C[4]=[N("span",{class:"material-icons text-sm"},"delete_sweep",-1)])],8,xb),N("button",{class:"text-gray-500 hover:text-gray-300 p-1",onClick:C[0]||(C[0]=D=>u("update:show",!1))},[...C[5]||(C[5]=[N("span",{class:"material-icons text-sm"},"close",-1)])])])],32),N("div",{ref_key:"chatMessagesRef",ref:f,class:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-900/95"},[(xe(!0),ke(Ve,null,ws(r.value,(D,O)=>(xe(),ke("div",{key:O,class:et(["flex flex-col max-w-[90%]",D.role==="user"?"self-end items-end":"self-start items-start"])},[N("div",{class:et(["px-3 py-2 rounded-lg text-sm shadow-sm",D.role==="user"?"bg-purple-600 text-white rounded-br-none":"bg-gray-700 text-gray-200 rounded-bl-none"])},[D.role==="tool"?(xe(),ke("div",yb,[C[6]||(C[6]=N("div",{class:"font-bold text-green-500 flex items-center gap-1"},[N("span",{class:"material-icons text-[10px]"},"swap_horiz"),tu(" result ")],-1)),N("div",wb,ye(D.content),1)])):(xe(),ke(Ve,{key:1},[D.content?(xe(),ke("div",vb,ye(D.content),1)):fn("",!0),D.tool_calls?(xe(),ke("div",kb,[(xe(!0),ke(Ve,null,ws(D.tool_calls,($,L)=>(xe(),ke("div",{key:L,class:"text-xs"},[N("div",Cb,[C[7]||(C[7]=N("span",{class:"material-icons text-[10px]"},"terminal",-1)),tu(" "+ye($.function.name),1)]),N("div",Ab,ye(b($)),1)]))),128))])):fn("",!0)],64))],2),N("span",Eb,ye(D.role==="user"?"You":"AI"),1)],2))),128)),o.value?(xe(),ke("div",Db," Thinking... ")):fn("",!0)],512),N("div",Sb,[e.selectedText?(xe(),ke("div",Fb,[N("div",Ib,[C[8]||(C[8]=N("span",{class:"material-icons text-xs text-purple-400"},"format_quote",-1)),N("span",Rb,ye(h.value),1)]),N("button",{class:"text-gray-500 hover:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",onClick:C[1]||(C[1]=D=>u("update:selectedText",""))},[...C[9]||(C[9]=[N("span",{class:"material-icons text-xs"},"close",-1)])])])):fn("",!0),N("div",Tb,[yn(N("textarea",{"onUpdate:modelValue":C[2]||(C[2]=D=>i.value=D),placeholder:s.value.placeholder,class:"w-full bg-gray-900 border border-gray-700 rounded-lg p-2 text-sm text-white focus:border-purple-500 outline-none resize-none h-20",onKeydown:Kd(Wd(x,["ctrl"]),["enter"])},null,40,Mb),[[Uu,i.value]]),N("button",{disabled:o.value||!i.value.trim(),class:"absolute bottom-2 right-2 p-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",onClick:x},[...C[10]||(C[10]=[N("span",{class:"material-icons text-sm"},"send",-1)])],8,Ob)])])],4)):fn("",!0)}}),$b={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] backdrop-blur-sm"},Lb={class:"bg-gray-800 border border-gray-700 rounded-xl w-96 shadow-2xl p-6"},Bb={class:"text-xl font-bold mb-4 flex items-center gap-2"},Nb={class:"space-y-4"},qb={class:"block text-xs text-gray-400 mb-1"},jb={class:"block text-xs text-gray-400 mb-1"},Ub={class:"block text-xs text-gray-400 mb-1"},zb={class:"flex justify-end gap-2 mt-6"},Hb=Dn({__name:"SettingsModal",props:{show:{type:Boolean},settings:{},currentLang:{}},emits:["update:show","save"],setup(e,{emit:t}){const n=e,u=t,s=_t(()=>mu[n.currentLang]),r=pe({...n.settings});Nu(()=>n.settings,o=>{r.value={...o}},{deep:!0});const i=()=>{u("save",r.value)};return(o,a)=>e.show?(xe(),ke("div",$b,[N("div",Lb,[N("h2",Bb,[a[4]||(a[4]=N("span",{class:"material-icons text-gray-400"},"settings",-1)),tu(" "+ye(s.value.settingsTitle),1)]),N("div",Nb,[N("div",null,[N("label",qb,ye(s.value.apiUrl),1),yn(N("input",{"onUpdate:modelValue":a[0]||(a[0]=c=>r.value.apiUrl=c),type:"text",class:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm text-white focus:border-purple-500 outline-none"},null,512),[[Uu,r.value.apiUrl]])]),N("div",null,[N("label",jb,ye(s.value.apiKey),1),yn(N("input",{"onUpdate:modelValue":a[1]||(a[1]=c=>r.value.apiKey=c),type:"password",class:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm text-white focus:border-purple-500 outline-none",placeholder:"sk-..."},null,512),[[Uu,r.value.apiKey]])]),N("div",null,[N("label",Ub,ye(s.value.model),1),yn(N("input",{"onUpdate:modelValue":a[2]||(a[2]=c=>r.value.model=c),type:"text",class:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm text-white focus:border-purple-500 outline-none"},null,512),[[Uu,r.value.model]])])]),N("div",zb,[N("button",{class:"px-4 py-2 rounded text-sm text-gray-300 hover:bg-gray-700 transition-colors",onClick:a[3]||(a[3]=c=>u("update:show",!1))},ye(s.value.cancel),1),N("button",{class:"px-4 py-2 rounded text-sm bg-purple-600 text-white hover:bg-purple-500 transition-colors",onClick:i},ye(s.value.save),1)])])])):fn("",!0)}}),Wb={class:"h-screen w-screen bg-gray-900 text-gray-100 flex flex-col overflow-hidden font-sans"},Vb={class:"flex-1 flex overflow-hidden relative"},Kb=Dn({__name:"App",setup(e){const t={apiUrl:"https://api.openai.com/v1",apiKey:"",model:"gpt-4.1-nano-2025-04-14"},n=pe(`# Welcome to VibeMarkdown

Select this paragraph and ask the AI to rewrite it to be more exciting.

## Features
- **Split View**: Edit and preview side-by-side.
- **AI Collaboration**: Chat with AI to brainstorm.
- **Live Editing**: Ask the AI to "Fix the spelling" or "Add a conclusion".
- **Contextual Context**: Highlight text to ask specific questions about it.

## Try it out
1. Highlight the code block below.
2. Ask "What does this code do?"

\`\`\`javascript
function helloWorld() {
  console.log("Hello Vibe!");
}
\`\`\`
`),u=pe({...t}),s=pe(!1),r=pe("en"),i=pe("split"),o=pe(!0),a=pe(""),c=pe([]),l=()=>{r.value=r.value==="en"?"zh":"en"},f=()=>{const p=localStorage.getItem("vibe-settings");if(p)try{const b=JSON.parse(p);u.value={...t,...b}}catch(b){console.error("Failed to load settings",b)}},h=p=>{u.value=p,localStorage.setItem("vibe-settings",JSON.stringify(u.value)),s.value=!1},d=p=>{a.value=p};return ii(()=>{f()}),(p,b)=>(xe(),ke("div",Wb,[Ne(lh,{"view-mode":i.value,"onUpdate:viewMode":b[0]||(b[0]=x=>i.value=x),"show-chat":o.value,"onUpdate:showChat":b[1]||(b[1]=x=>o.value=x),"current-lang":r.value,onToggleLanguage:l,onOpenSettings:b[2]||(b[2]=x=>s.value=!0)},null,8,["view-mode","show-chat","current-lang"]),N("div",Vb,[yn(N("div",{class:et(i.value==="split"?"w-1/2":"w-full")},[Ne(mh,{"model-value":n.value,"current-lang":r.value,"diff-highlights":c.value,"onUpdate:modelValue":b[3]||(b[3]=x=>{n.value=x,c.value=[]}),onSelectionChange:d},null,8,["model-value","current-lang","diff-highlights"])],2),[[fo,i.value!=="preview"]]),yn(N("div",{class:et(i.value==="split"?"w-1/2":"w-full")},[Ne(i2,{content:n.value,"current-lang":r.value},null,8,["content","current-lang"])],2),[[fo,i.value!=="editor"]]),Ne(Pb,{show:o.value,"onUpdate:show":b[4]||(b[4]=x=>o.value=x),"selected-text":a.value,"onUpdate:selectedText":b[5]||(b[5]=x=>a.value=x),"markdown-content":n.value,"onUpdate:markdownContent":b[6]||(b[6]=x=>n.value=x),"diff-highlights":c.value,"onUpdate:diffHighlights":b[7]||(b[7]=x=>c.value=x),"current-lang":r.value,settings:u.value,onOpenSettings:b[8]||(b[8]=x=>s.value=!0)},null,8,["show","selected-text","markdown-content","diff-highlights","current-lang","settings"])]),Ne(Hb,{show:s.value,"onUpdate:show":b[9]||(b[9]=x=>s.value=x),settings:u.value,"current-lang":r.value,onSave:h},null,8,["show","settings","current-lang"])]))}});Gd(Kb).mount("#app");
