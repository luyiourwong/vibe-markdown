(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function Ji(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const de={},Yn=[],jt=()=>{},Ll=()=>!1,as=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Xi=e=>e.startsWith("onUpdate:"),qe=Object.assign,Zi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ud=Object.prototype.hasOwnProperty,pe=(e,t)=>ud.call(e,t),te=Array.isArray,Qn=e=>ls(e)==="[object Map]",Nl=e=>ls(e)==="[object Set]",ne=e=>typeof e=="function",De=e=>typeof e=="string",An=e=>typeof e=="symbol",ve=e=>e!==null&&typeof e=="object",$l=e=>(ve(e)||ne(e))&&ne(e.then)&&ne(e.catch),Bl=Object.prototype.toString,ls=e=>Bl.call(e),rd=e=>ls(e).slice(8,-1),Ul=e=>ls(e)==="[object Object]",Yi=e=>De(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mu=Ji(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cs=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},sd=/-\w/g,un=cs(e=>e.replace(sd,t=>t.slice(1).toUpperCase())),id=/\B([A-Z])/g,an=cs(e=>e.replace(id,"-$1").toLowerCase()),Hl=cs(e=>e.charAt(0).toUpperCase()+e.slice(1)),$s=cs(e=>e?`on${Hl(e)}`:""),at=(e,t)=>!Object.is(e,t),Sr=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},zl=(e,t,n,u=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:u,value:n})},Qi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let sa;const fs=()=>sa||(sa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ds(e){if(te(e)){const t={};for(let n=0;n<e.length;n++){const u=e[n],s=De(u)?cd(u):ds(u);if(s)for(const r in s)t[r]=s[r]}return t}else if(De(e)||ve(e))return e}const od=/;(?![^(]*\))/g,ad=/:([^]+)/,ld=/\/\*[^]*?\*\//g;function cd(e){const t={};return e.replace(ld,"").split(od).forEach(n=>{if(n){const u=n.split(ad);u.length>1&&(t[u[0].trim()]=u[1].trim())}}),t}function St(e){let t="";if(De(e))t=e;else if(te(e))for(let n=0;n<e.length;n++){const u=St(e[n]);u&&(t+=u+" ")}else if(ve(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const fd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dd=Ji(fd);function jl(e){return!!e||e===""}const ql=e=>!!(e&&e.__v_isRef===!0),Ce=e=>De(e)?e:e==null?"":te(e)||ve(e)&&(e.toString===Bl||!ne(e.toString))?ql(e)?Ce(e.value):JSON.stringify(e,Wl,2):String(e),Wl=(e,t)=>ql(t)?Wl(e,t.value):Qn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[u,s],r)=>(n[Bs(u,r)+" =>"]=s,n),{})}:Nl(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Bs(n))}:An(t)?Bs(t):ve(t)&&!te(t)&&!Ul(t)?String(t):t,Bs=(e,t="")=>{var n;return An(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let it;class hd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=it,!t&&it&&(this.index=(it.scopes||(it.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=it;try{return it=this,t()}finally{it=n}}}on(){++this._on===1&&(this.prevScope=it,it=this)}off(){this._on>0&&--this._on===0&&(it=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,u;for(n=0,u=this.effects.length;n<u;n++)this.effects[n].stop();for(this.effects.length=0,n=0,u=this.cleanups.length;n<u;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,u=this.scopes.length;n<u;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function pd(){return it}let _e;const Us=new WeakSet;class Vl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,it&&it.active&&it.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Us.has(this)&&(Us.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ia(this),Jl(this);const t=_e,n=Dt;_e=this,Dt=!0;try{return this.fn()}finally{Xl(this),_e=t,Dt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)no(t);this.deps=this.depsTail=void 0,ia(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Us.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){bi(this)&&this.run()}get dirty(){return bi(this)}}let Kl=0,Ou,Pu;function Gl(e,t=!1){if(e.flags|=8,t){e.next=Pu,Pu=e;return}e.next=Ou,Ou=e}function eo(){Kl++}function to(){if(--Kl>0)return;if(Pu){let t=Pu;for(Pu=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ou;){let t=Ou;for(Ou=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(u){e||(e=u)}t=n}}if(e)throw e}function Jl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Xl(e){let t,n=e.depsTail,u=n;for(;u;){const s=u.prevDep;u.version===-1?(u===n&&(n=s),no(u),md(u)):t=u,u.dep.activeLink=u.prevActiveLink,u.prevActiveLink=void 0,u=s}e.deps=t,e.depsTail=n}function bi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Zl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Zl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Wu)||(e.globalVersion=Wu,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!bi(e))))return;e.flags|=2;const t=e.dep,n=_e,u=Dt;_e=e,Dt=!0;try{Jl(e);const s=e.fn(e._value);(t.version===0||at(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{_e=n,Dt=u,Xl(e),e.flags&=-3}}function no(e,t=!1){const{dep:n,prevSub:u,nextSub:s}=e;if(u&&(u.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=u,e.nextSub=void 0),n.subs===e&&(n.subs=u,!u&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)no(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function md(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Dt=!0;const Yl=[];function rn(){Yl.push(Dt),Dt=!1}function sn(){const e=Yl.pop();Dt=e===void 0?!0:e}function ia(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=_e;_e=void 0;try{t()}finally{_e=n}}}let Wu=0;class gd{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hs{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!_e||!Dt||_e===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==_e)n=this.activeLink=new gd(_e,this),_e.deps?(n.prevDep=_e.depsTail,_e.depsTail.nextDep=n,_e.depsTail=n):_e.deps=_e.depsTail=n,Ql(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const u=n.nextDep;u.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=u),n.prevDep=_e.depsTail,n.nextDep=void 0,_e.depsTail.nextDep=n,_e.depsTail=n,_e.deps===n&&(_e.deps=u)}return n}trigger(t){this.version++,Wu++,this.notify(t)}notify(t){eo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{to()}}}function Ql(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let u=t.deps;u;u=u.nextDep)Ql(u)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const _i=new WeakMap,Mn=Symbol(""),xi=Symbol(""),Vu=Symbol("");function Ge(e,t,n){if(Dt&&_e){let u=_i.get(e);u||_i.set(e,u=new Map);let s=u.get(n);s||(u.set(n,s=new hs),s.map=u,s.key=n),s.track()}}function tn(e,t,n,u,s,r){const i=_i.get(e);if(!i){Wu++;return}const o=a=>{a&&a.trigger()};if(eo(),t==="clear")i.forEach(o);else{const a=te(e),l=a&&Yi(n);if(a&&n==="length"){const c=Number(u);i.forEach((f,h)=>{(h==="length"||h===Vu||!An(h)&&h>=c)&&o(f)})}else switch((n!==void 0||i.has(void 0))&&o(i.get(n)),l&&o(i.get(Vu)),t){case"add":a?l&&o(i.get("length")):(o(i.get(Mn)),Qn(e)&&o(i.get(xi)));break;case"delete":a||(o(i.get(Mn)),Qn(e)&&o(i.get(xi)));break;case"set":Qn(e)&&o(i.get(Mn));break}}to()}function Un(e){const t=he(e);return t===e?t:(Ge(t,"iterate",Vu),wt(e)?t:t.map(Tt))}function ps(e){return Ge(e=he(e),"iterate",Vu),e}function hn(e,t){return on(e)?On(e)?ru(Tt(t)):ru(t):Tt(t)}const bd={__proto__:null,[Symbol.iterator](){return Hs(this,Symbol.iterator,e=>hn(this,e))},concat(...e){return Un(this).concat(...e.map(t=>te(t)?Un(t):t))},entries(){return Hs(this,"entries",e=>(e[1]=hn(this,e[1]),e))},every(e,t){return Zt(this,"every",e,t,void 0,arguments)},filter(e,t){return Zt(this,"filter",e,t,n=>n.map(u=>hn(this,u)),arguments)},find(e,t){return Zt(this,"find",e,t,n=>hn(this,n),arguments)},findIndex(e,t){return Zt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Zt(this,"findLast",e,t,n=>hn(this,n),arguments)},findLastIndex(e,t){return Zt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Zt(this,"forEach",e,t,void 0,arguments)},includes(...e){return zs(this,"includes",e)},indexOf(...e){return zs(this,"indexOf",e)},join(e){return Un(this).join(e)},lastIndexOf(...e){return zs(this,"lastIndexOf",e)},map(e,t){return Zt(this,"map",e,t,void 0,arguments)},pop(){return pu(this,"pop")},push(...e){return pu(this,"push",e)},reduce(e,...t){return oa(this,"reduce",e,t)},reduceRight(e,...t){return oa(this,"reduceRight",e,t)},shift(){return pu(this,"shift")},some(e,t){return Zt(this,"some",e,t,void 0,arguments)},splice(...e){return pu(this,"splice",e)},toReversed(){return Un(this).toReversed()},toSorted(e){return Un(this).toSorted(e)},toSpliced(...e){return Un(this).toSpliced(...e)},unshift(...e){return pu(this,"unshift",e)},values(){return Hs(this,"values",e=>hn(this,e))}};function Hs(e,t,n){const u=ps(e),s=u[t]();return u!==e&&!wt(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=n(r.value)),r}),s}const _d=Array.prototype;function Zt(e,t,n,u,s,r){const i=ps(e),o=i!==e&&!wt(e),a=i[t];if(a!==_d[t]){const f=a.apply(e,r);return o?Tt(f):f}let l=n;i!==e&&(o?l=function(f,h){return n.call(this,hn(e,f),h,e)}:n.length>2&&(l=function(f,h){return n.call(this,f,h,e)}));const c=a.call(i,l,u);return o&&s?s(c):c}function oa(e,t,n,u){const s=ps(e);let r=n;return s!==e&&(wt(e)?n.length>3&&(r=function(i,o,a){return n.call(this,i,o,a,e)}):r=function(i,o,a){return n.call(this,i,hn(e,o),a,e)}),s[t](r,...u)}function zs(e,t,n){const u=he(e);Ge(u,"iterate",Vu);const s=u[t](...n);return(s===-1||s===!1)&&io(n[0])?(n[0]=he(n[0]),u[t](...n)):s}function pu(e,t,n=[]){rn(),eo();const u=he(e)[t].apply(e,n);return to(),sn(),u}const xd=Ji("__proto__,__v_isRef,__isVue"),ec=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(An));function yd(e){An(e)||(e=String(e));const t=he(this);return Ge(t,"has",e),t.hasOwnProperty(e)}class tc{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,u){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return u===(s?r?Fd:sc:r?rc:uc).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(u)?t:void 0;const i=te(t);if(!s){let a;if(i&&(a=bd[n]))return a;if(n==="hasOwnProperty")return yd}const o=Reflect.get(t,n,Je(t)?t:u);if((An(n)?ec.has(n):xd(n))||(s||Ge(t,"get",n),r))return o;if(Je(o)){const a=i&&Yi(n)?o:o.value;return s&&ve(a)?wi(a):a}return ve(o)?s?wi(o):ro(o):o}}class nc extends tc{constructor(t=!1){super(!1,t)}set(t,n,u,s){let r=t[n];const i=te(t)&&Yi(n);if(!this._isShallow){const l=on(r);if(!wt(u)&&!on(u)&&(r=he(r),u=he(u)),!i&&Je(r)&&!Je(u))return l||(r.value=u),!0}const o=i?Number(n)<t.length:pe(t,n),a=Reflect.set(t,n,u,Je(t)?t:s);return t===he(s)&&(o?at(u,r)&&tn(t,"set",n,u):tn(t,"add",n,u)),a}deleteProperty(t,n){const u=pe(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&u&&tn(t,"delete",n,void 0),s}has(t,n){const u=Reflect.has(t,n);return(!An(n)||!ec.has(n))&&Ge(t,"has",n),u}ownKeys(t){return Ge(t,"iterate",te(t)?"length":Mn),Reflect.ownKeys(t)}}class wd extends tc{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const vd=new nc,Ad=new wd,Ed=new nc(!0);const yi=e=>e,hr=e=>Reflect.getPrototypeOf(e);function Cd(e,t,n){return function(...u){const s=this.__v_raw,r=he(s),i=Qn(r),o=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,l=s[e](...u),c=n?yi:t?ru:Tt;return!t&&Ge(r,"iterate",a?xi:Mn),{next(){const{value:f,done:h}=l.next();return h?{value:f,done:h}:{value:o?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function pr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kd(e,t){const n={get(s){const r=this.__v_raw,i=he(r),o=he(s);e||(at(s,o)&&Ge(i,"get",s),Ge(i,"get",o));const{has:a}=hr(i),l=t?yi:e?ru:Tt;if(a.call(i,s))return l(r.get(s));if(a.call(i,o))return l(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!e&&Ge(he(s),"iterate",Mn),s.size},has(s){const r=this.__v_raw,i=he(r),o=he(s);return e||(at(s,o)&&Ge(i,"has",s),Ge(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=he(o),l=t?yi:e?ru:Tt;return!e&&Ge(a,"iterate",Mn),o.forEach((c,f)=>s.call(r,l(c),l(f),i))}};return qe(n,e?{add:pr("add"),set:pr("set"),delete:pr("delete"),clear:pr("clear")}:{add(s){!t&&!wt(s)&&!on(s)&&(s=he(s));const r=he(this);return hr(r).has.call(r,s)||(r.add(s),tn(r,"add",s,s)),this},set(s,r){!t&&!wt(r)&&!on(r)&&(r=he(r));const i=he(this),{has:o,get:a}=hr(i);let l=o.call(i,s);l||(s=he(s),l=o.call(i,s));const c=a.call(i,s);return i.set(s,r),l?at(r,c)&&tn(i,"set",s,r):tn(i,"add",s,r),this},delete(s){const r=he(this),{has:i,get:o}=hr(r);let a=i.call(r,s);a||(s=he(s),a=i.call(r,s)),o&&o.call(r,s);const l=r.delete(s);return a&&tn(r,"delete",s,void 0),l},clear(){const s=he(this),r=s.size!==0,i=s.clear();return r&&tn(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Cd(s,e,t)}),n}function uo(e,t){const n=kd(e,t);return(u,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?u:Reflect.get(pe(n,s)&&s in u?n:u,s,r)}const Sd={get:uo(!1,!1)},Dd={get:uo(!1,!0)},Td={get:uo(!0,!1)};const uc=new WeakMap,rc=new WeakMap,sc=new WeakMap,Fd=new WeakMap;function Rd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Id(e){return e.__v_skip||!Object.isExtensible(e)?0:Rd(rd(e))}function ro(e){return on(e)?e:so(e,!1,vd,Sd,uc)}function Md(e){return so(e,!1,Ed,Dd,rc)}function wi(e){return so(e,!0,Ad,Td,sc)}function so(e,t,n,u,s){if(!ve(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Id(e);if(r===0)return e;const i=s.get(e);if(i)return i;const o=new Proxy(e,r===2?u:n);return s.set(e,o),o}function On(e){return on(e)?On(e.__v_raw):!!(e&&e.__v_isReactive)}function on(e){return!!(e&&e.__v_isReadonly)}function wt(e){return!!(e&&e.__v_isShallow)}function io(e){return e?!!e.__v_raw:!1}function he(e){const t=e&&e.__v_raw;return t?he(t):e}function Od(e){return!pe(e,"__v_skip")&&Object.isExtensible(e)&&zl(e,"__v_skip",!0),e}const Tt=e=>ve(e)?ro(e):e,ru=e=>ve(e)?wi(e):e;function Je(e){return e?e.__v_isRef===!0:!1}function Se(e){return Pd(e,!1)}function Pd(e,t){return Je(e)?e:new Ld(e,t)}class Ld{constructor(t,n){this.dep=new hs,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:he(t),this._value=n?t:Tt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,u=this.__v_isShallow||wt(t)||on(t);t=u?t:he(t),at(t,n)&&(this._rawValue=t,this._value=u?t:Tt(t),this.dep.trigger())}}function Nd(e){return Je(e)?e.value:e}const $d={get:(e,t,n)=>t==="__v_raw"?e:Nd(Reflect.get(e,t,n)),set:(e,t,n,u)=>{const s=e[t];return Je(s)&&!Je(n)?(s.value=n,!0):Reflect.set(e,t,n,u)}};function ic(e){return On(e)?e:new Proxy(e,$d)}class Bd{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new hs,{get:u,set:s}=t(n.track.bind(n),n.trigger.bind(n));this._get=u,this._set=s}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Ud(e){return new Bd(e)}class Hd{constructor(t,n,u){this.fn=t,this.setter=n,this._value=void 0,this.dep=new hs(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=u}notify(){if(this.flags|=16,!(this.flags&8)&&_e!==this)return Gl(this,!0),!0}get value(){const t=this.dep.track();return Zl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function zd(e,t,n=!1){let u,s;return ne(e)?u=e:(u=e.get,s=e.set),new Hd(u,s,n)}const mr={},zr=new WeakMap;let Dn;function jd(e,t=!1,n=Dn){if(n){let u=zr.get(n);u||zr.set(n,u=[]),u.push(e)}}function qd(e,t,n=de){const{immediate:u,deep:s,once:r,scheduler:i,augmentJob:o,call:a}=n,l=y=>s?y:wt(y)||s===!1||s===0?nn(y,1):nn(y);let c,f,h,d,p=!1,m=!1;if(Je(e)?(f=()=>e.value,p=wt(e)):On(e)?(f=()=>l(e),p=!0):te(e)?(m=!0,p=e.some(y=>On(y)||wt(y)),f=()=>e.map(y=>{if(Je(y))return y.value;if(On(y))return l(y);if(ne(y))return a?a(y,2):y()})):ne(e)?t?f=a?()=>a(e,2):e:f=()=>{if(h){rn();try{h()}finally{sn()}}const y=Dn;Dn=c;try{return a?a(e,3,[d]):e(d)}finally{Dn=y}}:f=jt,t&&s){const y=f,k=s===!0?1/0:s;f=()=>nn(y(),k)}const w=pd(),A=()=>{c.stop(),w&&w.active&&Zi(w.effects,c)};if(r&&t){const y=t;t=(...k)=>{y(...k),A()}}let x=m?new Array(e.length).fill(mr):mr;const E=y=>{if(!(!(c.flags&1)||!c.dirty&&!y))if(t){const k=c.run();if(s||p||(m?k.some((T,O)=>at(T,x[O])):at(k,x))){h&&h();const T=Dn;Dn=c;try{const O=[k,x===mr?void 0:m&&x[0]===mr?[]:x,d];x=k,a?a(t,3,O):t(...O)}finally{Dn=T}}}else c.run()};return o&&o(E),c=new Vl(f),c.scheduler=i?()=>i(E,!1):E,d=y=>jd(y,!1,c),h=c.onStop=()=>{const y=zr.get(c);if(y){if(a)a(y,4);else for(const k of y)k();zr.delete(c)}},t?u?E(!0):x=c.run():i?i(E.bind(null,!0),!0):c.run(),A.pause=c.pause.bind(c),A.resume=c.resume.bind(c),A.stop=A,A}function nn(e,t=1/0,n){if(t<=0||!ve(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Je(e))nn(e.value,t,n);else if(te(e))for(let u=0;u<e.length;u++)nn(e[u],t,n);else if(Nl(e)||Qn(e))e.forEach(u=>{nn(u,t,n)});else if(Ul(e)){for(const u in e)nn(e[u],t,n);for(const u of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,u)&&nn(e[u],t,n)}return e}function tr(e,t,n,u){try{return u?e(...u):e()}catch(s){ms(s,t,n)}}function Wt(e,t,n,u){if(ne(e)){const s=tr(e,t,n,u);return s&&$l(s)&&s.catch(r=>{ms(r,t,n)}),s}if(te(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Wt(e[r],t,n,u));return s}}function ms(e,t,n,u=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||de;if(t){let o=t.parent;const a=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const c=o.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,a,l)===!1)return}o=o.parent}if(r){rn(),tr(r,null,10,[e,a,l]),sn();return}}Wd(e,n,s,u,i)}function Wd(e,t,n,u=!0,s=!1){if(s)throw e;console.error(e)}const Qe=[];let Nt=-1;const eu=[];let pn=null,Wn=0;const oc=Promise.resolve();let jr=null;function ac(e){const t=jr||oc;return e?t.then(this?e.bind(this):e):t}function Vd(e){let t=Nt+1,n=Qe.length;for(;t<n;){const u=t+n>>>1,s=Qe[u],r=Ku(s);r<e||r===e&&s.flags&2?t=u+1:n=u}return t}function oo(e){if(!(e.flags&1)){const t=Ku(e),n=Qe[Qe.length-1];!n||!(e.flags&2)&&t>=Ku(n)?Qe.push(e):Qe.splice(Vd(t),0,e),e.flags|=1,lc()}}function lc(){jr||(jr=oc.then(fc))}function Kd(e){te(e)?eu.push(...e):pn&&e.id===-1?pn.splice(Wn+1,0,e):e.flags&1||(eu.push(e),e.flags|=1),lc()}function aa(e,t,n=Nt+1){for(;n<Qe.length;n++){const u=Qe[n];if(u&&u.flags&2){if(e&&u.id!==e.uid)continue;Qe.splice(n,1),n--,u.flags&4&&(u.flags&=-2),u(),u.flags&4||(u.flags&=-2)}}}function cc(e){if(eu.length){const t=[...new Set(eu)].sort((n,u)=>Ku(n)-Ku(u));if(eu.length=0,pn){pn.push(...t);return}for(pn=t,Wn=0;Wn<pn.length;Wn++){const n=pn[Wn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}pn=null,Wn=0}}const Ku=e=>e.id==null?e.flags&2?-1:1/0:e.id;function fc(e){try{for(Nt=0;Nt<Qe.length;Nt++){const t=Qe[Nt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),tr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Nt<Qe.length;Nt++){const t=Qe[Nt];t&&(t.flags&=-2)}Nt=-1,Qe.length=0,cc(),jr=null,(Qe.length||eu.length)&&fc()}}let xt=null,dc=null;function qr(e){const t=xt;return xt=e,dc=e&&e.type.__scopeId||null,t}function Gd(e,t=xt,n){if(!t||e._n)return e;const u=(...s)=>{u._d&&ba(-1);const r=qr(t);let i;try{i=e(...s)}finally{qr(r),u._d&&ba(1)}return i};return u._n=!0,u._c=!0,u._d=!0,u}function tu(e,t){if(xt===null)return e;const n=xs(xt),u=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,i,o,a=de]=t[s];r&&(ne(r)&&(r={mounted:r,updated:r}),r.deep&&nn(i),u.push({dir:r,instance:n,value:i,oldValue:void 0,arg:o,modifiers:a}))}return e}function kn(e,t,n,u){const s=e.dirs,r=t&&t.dirs;for(let i=0;i<s.length;i++){const o=s[i];r&&(o.oldValue=r[i].value);let a=o.dir[u];a&&(rn(),Wt(a,n,8,[e.el,o,e,t]),sn())}}const Jd=Symbol("_vte"),Xd=e=>e.__isTeleport,Zd=Symbol("_leaveCb");function ao(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ao(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function au(e,t){return ne(e)?qe({name:e.name},t,{setup:e}):e}function hc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Wr=new WeakMap;function Lu(e,t,n,u,s=!1){if(te(e)){e.forEach((p,m)=>Lu(p,t&&(te(t)?t[m]:t),n,u,s));return}if(Nu(u)&&!s){u.shapeFlag&512&&u.type.__asyncResolved&&u.component.subTree.component&&Lu(e,t,n,u.component.subTree);return}const r=u.shapeFlag&4?xs(u.component):u.el,i=s?null:r,{i:o,r:a}=e,l=t&&t.r,c=o.refs===de?o.refs={}:o.refs,f=o.setupState,h=he(f),d=f===de?Ll:p=>pe(h,p);if(l!=null&&l!==a){if(la(t),De(l))c[l]=null,d(l)&&(f[l]=null);else if(Je(l)){l.value=null;const p=t;p.k&&(c[p.k]=null)}}if(ne(a))tr(a,o,12,[i,c]);else{const p=De(a),m=Je(a);if(p||m){const w=()=>{if(e.f){const A=p?d(a)?f[a]:c[a]:a.value;if(s)te(A)&&Zi(A,r);else if(te(A))A.includes(r)||A.push(r);else if(p)c[a]=[r],d(a)&&(f[a]=c[a]);else{const x=[r];a.value=x,e.k&&(c[e.k]=x)}}else p?(c[a]=i,d(a)&&(f[a]=i)):m&&(a.value=i,e.k&&(c[e.k]=i))};if(i){const A=()=>{w(),Wr.delete(e)};A.id=-1,Wr.set(e,A),pt(A,n)}else la(e),w()}}}function la(e){const t=Wr.get(e);t&&(t.flags|=8,Wr.delete(e))}fs().requestIdleCallback;fs().cancelIdleCallback;const Nu=e=>!!e.type.__asyncLoader,pc=e=>e.type.__isKeepAlive;function Yd(e,t){mc(e,"a",t)}function Qd(e,t){mc(e,"da",t)}function mc(e,t,n=et){const u=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(gs(t,u,n),n){let s=n.parent;for(;s&&s.parent;)pc(s.parent.vnode)&&eh(u,t,n,s),s=s.parent}}function eh(e,t,n,u){const s=gs(t,e,u,!0);co(()=>{Zi(u[t],s)},n)}function gs(e,t,n=et,u=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{rn();const o=nr(n),a=Wt(t,n,e,i);return o(),sn(),a});return u?s.unshift(r):s.push(r),r}}const ln=e=>(t,n=et)=>{(!Ju||e==="sp")&&gs(e,(...u)=>t(...u),n)},th=ln("bm"),lo=ln("m"),nh=ln("bu"),uh=ln("u"),rh=ln("bum"),co=ln("um"),sh=ln("sp"),ih=ln("rtg"),oh=ln("rtc");function ah(e,t=et){gs("ec",e,t)}const lh=Symbol.for("v-ndc");function vi(e,t,n,u){let s;const r=n,i=te(e);if(i||De(e)){const o=i&&On(e);let a=!1,l=!1;o&&(a=!wt(e),l=on(e),e=ps(e)),s=new Array(e.length);for(let c=0,f=e.length;c<f;c++)s[c]=t(a?l?ru(Tt(e[c])):Tt(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,r)}else if(ve(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,r));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,r)}}else s=[];return s}const Ai=e=>e?Nc(e)?xs(e):Ai(e.parent):null,$u=qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ai(e.parent),$root:e=>Ai(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>bc(e),$forceUpdate:e=>e.f||(e.f=()=>{oo(e.update)}),$nextTick:e=>e.n||(e.n=ac.bind(e.proxy)),$watch:e=>vh.bind(e)}),js=(e,t)=>e!==de&&!e.__isScriptSetup&&pe(e,t),ch={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:u,data:s,props:r,accessCache:i,type:o,appContext:a}=e;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return u[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(js(u,t))return i[t]=1,u[t];if(s!==de&&pe(s,t))return i[t]=2,s[t];if(pe(r,t))return i[t]=3,r[t];if(n!==de&&pe(n,t))return i[t]=4,n[t];Ei&&(i[t]=0)}}const l=$u[t];let c,f;if(l)return t==="$attrs"&&Ge(e.attrs,"get",""),l(e);if((c=o.__cssModules)&&(c=c[t]))return c;if(n!==de&&pe(n,t))return i[t]=4,n[t];if(f=a.config.globalProperties,pe(f,t))return f[t]},set({_:e},t,n){const{data:u,setupState:s,ctx:r}=e;return js(s,t)?(s[t]=n,!0):u!==de&&pe(u,t)?(u[t]=n,!0):pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:u,appContext:s,props:r,type:i}},o){let a;return!!(n[o]||e!==de&&o[0]!=="$"&&pe(e,o)||js(t,o)||pe(r,o)||pe(u,o)||pe($u,o)||pe(s.config.globalProperties,o)||(a=i.__cssModules)&&a[o])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:pe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Vr(e){return te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function yn(e,t){return!e||!t?e||t:te(e)&&te(t)?e.concat(t):qe({},Vr(e),Vr(t))}let Ei=!0;function fh(e){const t=bc(e),n=e.proxy,u=e.ctx;Ei=!1,t.beforeCreate&&ca(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:i,watch:o,provide:a,inject:l,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:m,deactivated:w,beforeDestroy:A,beforeUnmount:x,destroyed:E,unmounted:y,render:k,renderTracked:T,renderTriggered:O,errorCaptured:N,serverPrefetch:F,expose:$,inheritAttrs:z,components:K,directives:Q,filters:me}=t;if(l&&dh(l,u,null),i)for(const oe in i){const se=i[oe];ne(se)&&(u[oe]=se.bind(n))}if(s){const oe=s.call(n,n);ve(oe)&&(e.data=ro(oe))}if(Ei=!0,r)for(const oe in r){const se=r[oe],be=ne(se)?se.bind(n,n):ne(se.get)?se.get.bind(n,n):jt,ut=!ne(se)&&ne(se.set)?se.set.bind(n):jt,fe=qt({get:be,set:ut});Object.defineProperty(u,oe,{enumerable:!0,configurable:!0,get:()=>fe.value,set:Ve=>fe.value=Ve})}if(o)for(const oe in o)gc(o[oe],u,n,oe);if(a){const oe=ne(a)?a.call(n):a;Reflect.ownKeys(oe).forEach(se=>{_h(se,oe[se])})}c&&ca(c,e,"c");function ge(oe,se){te(se)?se.forEach(be=>oe(be.bind(n))):se&&oe(se.bind(n))}if(ge(th,f),ge(lo,h),ge(nh,d),ge(uh,p),ge(Yd,m),ge(Qd,w),ge(ah,N),ge(oh,T),ge(ih,O),ge(rh,x),ge(co,y),ge(sh,F),te($))if($.length){const oe=e.exposed||(e.exposed={});$.forEach(se=>{Object.defineProperty(oe,se,{get:()=>n[se],set:be=>n[se]=be,enumerable:!0})})}else e.exposed||(e.exposed={});k&&e.render===jt&&(e.render=k),z!=null&&(e.inheritAttrs=z),K&&(e.components=K),Q&&(e.directives=Q),F&&hc(e)}function dh(e,t,n=jt){te(e)&&(e=Ci(e));for(const u in e){const s=e[u];let r;ve(s)?"default"in s?r=Dr(s.from||u,s.default,!0):r=Dr(s.from||u):r=Dr(s),Je(r)?Object.defineProperty(t,u,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[u]=r}}function ca(e,t,n){Wt(te(e)?e.map(u=>u.bind(t.proxy)):e.bind(t.proxy),t,n)}function gc(e,t,n,u){let s=u.includes(".")?xc(n,u):()=>n[u];if(De(e)){const r=t[e];ne(r)&&Bu(s,r)}else if(ne(e))Bu(s,e.bind(n));else if(ve(e))if(te(e))e.forEach(r=>gc(r,t,n,u));else{const r=ne(e.handler)?e.handler.bind(n):t[e.handler];ne(r)&&Bu(s,r,e)}}function bc(e){const t=e.type,{mixins:n,extends:u}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,o=r.get(t);let a;return o?a=o:!s.length&&!n&&!u?a=t:(a={},s.length&&s.forEach(l=>Kr(a,l,i,!0)),Kr(a,t,i)),ve(t)&&r.set(t,a),a}function Kr(e,t,n,u=!1){const{mixins:s,extends:r}=t;r&&Kr(e,r,n,!0),s&&s.forEach(i=>Kr(e,i,n,!0));for(const i in t)if(!(u&&i==="expose")){const o=hh[i]||n&&n[i];e[i]=o?o(e[i],t[i]):t[i]}return e}const hh={data:fa,props:da,emits:da,methods:Au,computed:Au,beforeCreate:Ze,created:Ze,beforeMount:Ze,mounted:Ze,beforeUpdate:Ze,updated:Ze,beforeDestroy:Ze,beforeUnmount:Ze,destroyed:Ze,unmounted:Ze,activated:Ze,deactivated:Ze,errorCaptured:Ze,serverPrefetch:Ze,components:Au,directives:Au,watch:mh,provide:fa,inject:ph};function fa(e,t){return t?e?function(){return qe(ne(e)?e.call(this,this):e,ne(t)?t.call(this,this):t)}:t:e}function ph(e,t){return Au(Ci(e),Ci(t))}function Ci(e){if(te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ze(e,t){return e?[...new Set([].concat(e,t))]:t}function Au(e,t){return e?qe(Object.create(null),e,t):t}function da(e,t){return e?te(e)&&te(t)?[...new Set([...e,...t])]:qe(Object.create(null),Vr(e),Vr(t??{})):t}function mh(e,t){if(!e)return t;if(!t)return e;const n=qe(Object.create(null),e);for(const u in t)n[u]=Ze(e[u],t[u]);return n}function _c(){return{app:null,config:{isNativeTag:Ll,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gh=0;function bh(e,t){return function(u,s=null){ne(u)||(u=qe({},u)),s!=null&&!ve(s)&&(s=null);const r=_c(),i=new WeakSet,o=[];let a=!1;const l=r.app={_uid:gh++,_component:u,_props:s,_container:null,_context:r,_instance:null,version:Qh,get config(){return r.config},set config(c){},use(c,...f){return i.has(c)||(c&&ne(c.install)?(i.add(c),c.install(l,...f)):ne(c)&&(i.add(c),c(l,...f))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,f){return f?(r.components[c]=f,l):r.components[c]},directive(c,f){return f?(r.directives[c]=f,l):r.directives[c]},mount(c,f,h){if(!a){const d=l._ceVNode||lt(u,s);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(d,c,h),a=!0,l._container=c,c.__vue_app__=l,xs(d.component)}},onUnmount(c){o.push(c)},unmount(){a&&(Wt(o,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(c,f){return r.provides[c]=f,l},runWithContext(c){const f=nu;nu=l;try{return c()}finally{nu=f}}};return l}}let nu=null;function _h(e,t){if(et){let n=et.provides;const u=et.parent&&et.parent.provides;u===n&&(n=et.provides=Object.create(u)),n[e]=t}}function Dr(e,t,n=!1){const u=Lc();if(u||nu){let s=nu?nu._context.provides:u?u.parent==null||u.ce?u.vnode.appContext&&u.vnode.appContext.provides:u.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ne(t)?t.call(u&&u.proxy):t}}const xh=Symbol.for("v-scx"),yh=()=>Dr(xh);function wh(e,t){return fo(e,null,{flush:"sync"})}function Bu(e,t,n){return fo(e,t,n)}function fo(e,t,n=de){const{immediate:u,deep:s,flush:r,once:i}=n,o=qe({},n),a=t&&u||!t&&r!=="post";let l;if(Ju){if(r==="sync"){const d=yh();l=d.__watcherHandles||(d.__watcherHandles=[])}else if(!a){const d=()=>{};return d.stop=jt,d.resume=jt,d.pause=jt,d}}const c=et;o.call=(d,p,m)=>Wt(d,c,p,m);let f=!1;r==="post"?o.scheduler=d=>{pt(d,c&&c.suspense)}:r!=="sync"&&(f=!0,o.scheduler=(d,p)=>{p?d():oo(d)}),o.augmentJob=d=>{t&&(d.flags|=4),f&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const h=qd(e,t,o);return Ju&&(l?l.push(h):a&&h()),h}function vh(e,t,n){const u=this.proxy,s=De(e)?e.includes(".")?xc(u,e):()=>u[e]:e.bind(u,u);let r;ne(t)?r=t:(r=t.handler,n=t);const i=nr(this),o=fo(s,r.bind(u),n);return i(),o}function xc(e,t){const n=t.split(".");return()=>{let u=e;for(let s=0;s<n.length&&u;s++)u=u[n[s]];return u}}function _n(e,t,n=de){const u=Lc(),s=un(t),r=an(t),i=yc(e,s),o=Ud((a,l)=>{let c,f=de,h;return wh(()=>{const d=e[s];at(c,d)&&(c=d,l())}),{get(){return a(),n.get?n.get(c):c},set(d){const p=n.set?n.set(d):d;if(!at(p,c)&&!(f!==de&&at(d,f)))return;const m=u.vnode.props;m&&(t in m||s in m||r in m)&&(`onUpdate:${t}`in m||`onUpdate:${s}`in m||`onUpdate:${r}`in m)||(c=d,l()),u.emit(`update:${t}`,p),at(d,p)&&at(d,f)&&!at(p,h)&&l(),f=d,h=p}}});return o[Symbol.iterator]=()=>{let a=0;return{next(){return a<2?{value:a++?i||de:o,done:!1}:{done:!0}}}},o}const yc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${un(t)}Modifiers`]||e[`${an(t)}Modifiers`];function Ah(e,t,...n){if(e.isUnmounted)return;const u=e.vnode.props||de;let s=n;const r=t.startsWith("update:"),i=r&&yc(u,t.slice(7));i&&(i.trim&&(s=n.map(c=>De(c)?c.trim():c)),i.number&&(s=n.map(Qi)));let o,a=u[o=$s(t)]||u[o=$s(un(t))];!a&&r&&(a=u[o=$s(an(t))]),a&&Wt(a,e,6,s);const l=u[o+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Wt(l,e,6,s)}}const Eh=new WeakMap;function wc(e,t,n=!1){const u=n?Eh:t.emitsCache,s=u.get(e);if(s!==void 0)return s;const r=e.emits;let i={},o=!1;if(!ne(e)){const a=l=>{const c=wc(l,t,!0);c&&(o=!0,qe(i,c))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!o?(ve(e)&&u.set(e,null),null):(te(r)?r.forEach(a=>i[a]=null):qe(i,r),ve(e)&&u.set(e,i),i)}function bs(e,t){return!e||!as(t)?!1:(t=t.slice(2).replace(/Once$/,""),pe(e,t[0].toLowerCase()+t.slice(1))||pe(e,an(t))||pe(e,t))}function ha(e){const{type:t,vnode:n,proxy:u,withProxy:s,propsOptions:[r],slots:i,attrs:o,emit:a,render:l,renderCache:c,props:f,data:h,setupState:d,ctx:p,inheritAttrs:m}=e,w=qr(e);let A,x;try{if(n.shapeFlag&4){const y=s||u,k=y;A=Bt(l.call(k,y,c,f,d,h,p)),x=o}else{const y=t;A=Bt(y.length>1?y(f,{attrs:o,slots:i,emit:a}):y(f,null)),x=t.props?o:Ch(o)}}catch(y){Uu.length=0,ms(y,e,1),A=lt(wn)}let E=A;if(x&&m!==!1){const y=Object.keys(x),{shapeFlag:k}=E;y.length&&k&7&&(r&&y.some(Xi)&&(x=kh(x,r)),E=su(E,x,!1,!0))}return n.dirs&&(E=su(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&ao(E,n.transition),A=E,qr(w),A}const Ch=e=>{let t;for(const n in e)(n==="class"||n==="style"||as(n))&&((t||(t={}))[n]=e[n]);return t},kh=(e,t)=>{const n={};for(const u in e)(!Xi(u)||!(u.slice(9)in t))&&(n[u]=e[u]);return n};function Sh(e,t,n){const{props:u,children:s,component:r}=e,{props:i,children:o,patchFlag:a}=t,l=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return u?pa(u,i,l):!!i;if(a&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(i[h]!==u[h]&&!bs(l,h))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:u===i?!1:u?i?pa(u,i,l):!0:!!i;return!1}function pa(e,t,n){const u=Object.keys(t);if(u.length!==Object.keys(e).length)return!0;for(let s=0;s<u.length;s++){const r=u[s];if(t[r]!==e[r]&&!bs(n,r))return!0}return!1}function Dh({vnode:e,parent:t},n){for(;t;){const u=t.subTree;if(u.suspense&&u.suspense.activeBranch===e&&(u.el=e.el),u===e)(e=t.vnode).el=n,t=t.parent;else break}}const vc={},Ac=()=>Object.create(vc),Ec=e=>Object.getPrototypeOf(e)===vc;function Th(e,t,n,u=!1){const s={},r=Ac();e.propsDefaults=Object.create(null),Cc(e,t,s,r);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=u?s:Md(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Fh(e,t,n,u){const{props:s,attrs:r,vnode:{patchFlag:i}}=e,o=he(s),[a]=e.propsOptions;let l=!1;if((u||i>0)&&!(i&16)){if(i&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(bs(e.emitsOptions,h))continue;const d=t[h];if(a)if(pe(r,h))d!==r[h]&&(r[h]=d,l=!0);else{const p=un(h);s[p]=ki(a,o,p,d,e,!1)}else d!==r[h]&&(r[h]=d,l=!0)}}}else{Cc(e,t,s,r)&&(l=!0);let c;for(const f in o)(!t||!pe(t,f)&&((c=an(f))===f||!pe(t,c)))&&(a?n&&(n[f]!==void 0||n[c]!==void 0)&&(s[f]=ki(a,o,f,void 0,e,!0)):delete s[f]);if(r!==o)for(const f in r)(!t||!pe(t,f))&&(delete r[f],l=!0)}l&&tn(e.attrs,"set","")}function Cc(e,t,n,u){const[s,r]=e.propsOptions;let i=!1,o;if(t)for(let a in t){if(Mu(a))continue;const l=t[a];let c;s&&pe(s,c=un(a))?!r||!r.includes(c)?n[c]=l:(o||(o={}))[c]=l:bs(e.emitsOptions,a)||(!(a in u)||l!==u[a])&&(u[a]=l,i=!0)}if(r){const a=he(n),l=o||de;for(let c=0;c<r.length;c++){const f=r[c];n[f]=ki(s,a,f,l[f],e,!pe(l,f))}}return i}function ki(e,t,n,u,s,r){const i=e[n];if(i!=null){const o=pe(i,"default");if(o&&u===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&ne(a)){const{propsDefaults:l}=s;if(n in l)u=l[n];else{const c=nr(s);u=l[n]=a.call(null,t),c()}}else u=a;s.ce&&s.ce._setProp(n,u)}i[0]&&(r&&!o?u=!1:i[1]&&(u===""||u===an(n))&&(u=!0))}return u}const Rh=new WeakMap;function kc(e,t,n=!1){const u=n?Rh:t.propsCache,s=u.get(e);if(s)return s;const r=e.props,i={},o=[];let a=!1;if(!ne(e)){const c=f=>{a=!0;const[h,d]=kc(f,t,!0);qe(i,h),d&&o.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!a)return ve(e)&&u.set(e,Yn),Yn;if(te(r))for(let c=0;c<r.length;c++){const f=un(r[c]);ma(f)&&(i[f]=de)}else if(r)for(const c in r){const f=un(c);if(ma(f)){const h=r[c],d=i[f]=te(h)||ne(h)?{type:h}:qe({},h),p=d.type;let m=!1,w=!0;if(te(p))for(let A=0;A<p.length;++A){const x=p[A],E=ne(x)&&x.name;if(E==="Boolean"){m=!0;break}else E==="String"&&(w=!1)}else m=ne(p)&&p.name==="Boolean";d[0]=m,d[1]=w,(m||pe(d,"default"))&&o.push(f)}}const l=[i,o];return ve(e)&&u.set(e,l),l}function ma(e){return e[0]!=="$"&&!Mu(e)}const ho=e=>e==="_"||e==="_ctx"||e==="$stable",po=e=>te(e)?e.map(Bt):[Bt(e)],Ih=(e,t,n)=>{if(t._n)return t;const u=Gd((...s)=>po(t(...s)),n);return u._c=!1,u},Sc=(e,t,n)=>{const u=e._ctx;for(const s in e){if(ho(s))continue;const r=e[s];if(ne(r))t[s]=Ih(s,r,u);else if(r!=null){const i=po(r);t[s]=()=>i}}},Dc=(e,t)=>{const n=po(t);e.slots.default=()=>n},Tc=(e,t,n)=>{for(const u in t)(n||!ho(u))&&(e[u]=t[u])},Mh=(e,t,n)=>{const u=e.slots=Ac();if(e.vnode.shapeFlag&32){const s=t._;s?(Tc(u,t,n),n&&zl(u,"_",s,!0)):Sc(t,u)}else t&&Dc(e,t)},Oh=(e,t,n)=>{const{vnode:u,slots:s}=e;let r=!0,i=de;if(u.shapeFlag&32){const o=t._;o?n&&o===1?r=!1:Tc(s,t,n):(r=!t.$stable,Sc(t,s)),i=t}else t&&(Dc(e,t),i={default:1});if(r)for(const o in s)!ho(o)&&i[o]==null&&delete s[o]},pt=Bh;function Ph(e){return Lh(e)}function Lh(e,t){const n=fs();n.__VUE__=!0;const{insert:u,remove:s,patchProp:r,createElement:i,createText:o,createComment:a,setText:l,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=jt,insertStaticContent:p}=e,m=(g,_,C,R=null,S=null,D=null,U=void 0,B=null,L=!!_.dynamicChildren)=>{if(g===_)return;g&&!mu(g,_)&&(R=cn(g),Ve(g,S,D,!0),g=null),_.patchFlag===-2&&(L=!1,_.dynamicChildren=null);const{type:I,ref:Z,shapeFlag:j}=_;switch(I){case _s:w(g,_,C,R);break;case wn:A(g,_,C,R);break;case Ws:g==null&&x(_,C,R,U);break;case gt:K(g,_,C,R,S,D,U,B,L);break;default:j&1?k(g,_,C,R,S,D,U,B,L):j&6?Q(g,_,C,R,S,D,U,B,L):(j&64||j&128)&&I.process(g,_,C,R,S,D,U,B,L,Gt)}Z!=null&&S?Lu(Z,g&&g.ref,D,_||g,!_):Z==null&&g&&g.ref!=null&&Lu(g.ref,null,D,g,!0)},w=(g,_,C,R)=>{if(g==null)u(_.el=o(_.children),C,R);else{const S=_.el=g.el;_.children!==g.children&&l(S,_.children)}},A=(g,_,C,R)=>{g==null?u(_.el=a(_.children||""),C,R):_.el=g.el},x=(g,_,C,R)=>{[g.el,g.anchor]=p(g.children,_,C,R,g.el,g.anchor)},E=({el:g,anchor:_},C,R)=>{let S;for(;g&&g!==_;)S=h(g),u(g,C,R),g=S;u(_,C,R)},y=({el:g,anchor:_})=>{let C;for(;g&&g!==_;)C=h(g),s(g),g=C;s(_)},k=(g,_,C,R,S,D,U,B,L)=>{if(_.type==="svg"?U="svg":_.type==="math"&&(U="mathml"),g==null)T(_,C,R,S,D,U,B,L);else{const I=g.el&&g.el._isVueCE?g.el:null;try{I&&I._beginPatch(),F(g,_,S,D,U,B,L)}finally{I&&I._endPatch()}}},T=(g,_,C,R,S,D,U,B)=>{let L,I;const{props:Z,shapeFlag:j,transition:G,dirs:Y}=g;if(L=g.el=i(g.type,D,Z&&Z.is,Z),j&8?c(L,g.children):j&16&&N(g.children,L,null,R,S,qs(g,D),U,B),Y&&kn(g,null,R,"created"),O(L,g,g.scopeId,U,R),Z){for(const ae in Z)ae!=="value"&&!Mu(ae)&&r(L,ae,null,Z[ae],D,R);"value"in Z&&r(L,"value",null,Z.value,D),(I=Z.onVnodeBeforeMount)&&Ot(I,R,g)}Y&&kn(g,null,R,"beforeMount");const ue=Nh(S,G);ue&&G.beforeEnter(L),u(L,_,C),((I=Z&&Z.onVnodeMounted)||ue||Y)&&pt(()=>{I&&Ot(I,R,g),ue&&G.enter(L),Y&&kn(g,null,R,"mounted")},S)},O=(g,_,C,R,S)=>{if(C&&d(g,C),R)for(let D=0;D<R.length;D++)d(g,R[D]);if(S){let D=S.subTree;if(_===D||Ic(D.type)&&(D.ssContent===_||D.ssFallback===_)){const U=S.vnode;O(g,U,U.scopeId,U.slotScopeIds,S.parent)}}},N=(g,_,C,R,S,D,U,B,L=0)=>{for(let I=L;I<g.length;I++){const Z=g[I]=B?mn(g[I]):Bt(g[I]);m(null,Z,_,C,R,S,D,U,B)}},F=(g,_,C,R,S,D,U)=>{const B=_.el=g.el;let{patchFlag:L,dynamicChildren:I,dirs:Z}=_;L|=g.patchFlag&16;const j=g.props||de,G=_.props||de;let Y;if(C&&Sn(C,!1),(Y=G.onVnodeBeforeUpdate)&&Ot(Y,C,_,g),Z&&kn(_,g,C,"beforeUpdate"),C&&Sn(C,!0),(j.innerHTML&&G.innerHTML==null||j.textContent&&G.textContent==null)&&c(B,""),I?$(g.dynamicChildren,I,B,C,R,qs(_,S),D):U||se(g,_,B,null,C,R,qs(_,S),D,!1),L>0){if(L&16)z(B,j,G,C,S);else if(L&2&&j.class!==G.class&&r(B,"class",null,G.class,S),L&4&&r(B,"style",j.style,G.style,S),L&8){const ue=_.dynamicProps;for(let ae=0;ae<ue.length;ae++){const le=ue[ae],$e=j[le],Be=G[le];(Be!==$e||le==="value")&&r(B,le,$e,Be,S,C)}}L&1&&g.children!==_.children&&c(B,_.children)}else!U&&I==null&&z(B,j,G,C,S);((Y=G.onVnodeUpdated)||Z)&&pt(()=>{Y&&Ot(Y,C,_,g),Z&&kn(_,g,C,"updated")},R)},$=(g,_,C,R,S,D,U)=>{for(let B=0;B<_.length;B++){const L=g[B],I=_[B],Z=L.el&&(L.type===gt||!mu(L,I)||L.shapeFlag&198)?f(L.el):C;m(L,I,Z,null,R,S,D,U,!0)}},z=(g,_,C,R,S)=>{if(_!==C){if(_!==de)for(const D in _)!Mu(D)&&!(D in C)&&r(g,D,_[D],null,S,R);for(const D in C){if(Mu(D))continue;const U=C[D],B=_[D];U!==B&&D!=="value"&&r(g,D,B,U,S,R)}"value"in C&&r(g,"value",_.value,C.value,S)}},K=(g,_,C,R,S,D,U,B,L)=>{const I=_.el=g?g.el:o(""),Z=_.anchor=g?g.anchor:o("");let{patchFlag:j,dynamicChildren:G,slotScopeIds:Y}=_;Y&&(B=B?B.concat(Y):Y),g==null?(u(I,C,R),u(Z,C,R),N(_.children||[],C,Z,S,D,U,B,L)):j>0&&j&64&&G&&g.dynamicChildren?($(g.dynamicChildren,G,C,S,D,U,B),(_.key!=null||S&&_===S.subTree)&&Fc(g,_,!0)):se(g,_,C,Z,S,D,U,B,L)},Q=(g,_,C,R,S,D,U,B,L)=>{_.slotScopeIds=B,g==null?_.shapeFlag&512?S.ctx.activate(_,C,R,U,L):me(_,C,R,S,D,U,L):ce(g,_,L)},me=(g,_,C,R,S,D,U)=>{const B=g.component=Kh(g,R,S);if(pc(g)&&(B.ctx.renderer=Gt),Gh(B,!1,U),B.asyncDep){if(S&&S.registerDep(B,ge,U),!g.el){const L=B.subTree=lt(wn);A(null,L,_,C),g.placeholder=L.el}}else ge(B,g,_,C,S,D,U)},ce=(g,_,C)=>{const R=_.component=g.component;if(Sh(g,_,C))if(R.asyncDep&&!R.asyncResolved){oe(R,_,C);return}else R.next=_,R.update();else _.el=g.el,R.vnode=_},ge=(g,_,C,R,S,D,U)=>{const B=()=>{if(g.isMounted){let{next:j,bu:G,u:Y,parent:ue,vnode:ae}=g;{const ft=Rc(g);if(ft){j&&(j.el=ae.el,oe(g,j,U)),ft.asyncDep.then(()=>{g.isUnmounted||B()});return}}let le=j,$e;Sn(g,!1),j?(j.el=ae.el,oe(g,j,U)):j=ae,G&&Sr(G),($e=j.props&&j.props.onVnodeBeforeUpdate)&&Ot($e,ue,j,ae),Sn(g,!0);const Be=ha(g),rt=g.subTree;g.subTree=Be,m(rt,Be,f(rt.el),cn(rt),g,S,D),j.el=Be.el,le===null&&Dh(g,Be.el),Y&&pt(Y,S),($e=j.props&&j.props.onVnodeUpdated)&&pt(()=>Ot($e,ue,j,ae),S)}else{let j;const{el:G,props:Y}=_,{bm:ue,m:ae,parent:le,root:$e,type:Be}=g,rt=Nu(_);Sn(g,!1),ue&&Sr(ue),!rt&&(j=Y&&Y.onVnodeBeforeMount)&&Ot(j,le,_),Sn(g,!0);{$e.ce&&$e.ce._def.shadowRoot!==!1&&$e.ce._injectChildStyle(Be);const ft=g.subTree=ha(g);m(null,ft,C,R,g,S,D),_.el=ft.el}if(ae&&pt(ae,S),!rt&&(j=Y&&Y.onVnodeMounted)){const ft=_;pt(()=>Ot(j,le,ft),S)}(_.shapeFlag&256||le&&Nu(le.vnode)&&le.vnode.shapeFlag&256)&&g.a&&pt(g.a,S),g.isMounted=!0,_=C=R=null}};g.scope.on();const L=g.effect=new Vl(B);g.scope.off();const I=g.update=L.run.bind(L),Z=g.job=L.runIfDirty.bind(L);Z.i=g,Z.id=g.uid,L.scheduler=()=>oo(Z),Sn(g,!0),I()},oe=(g,_,C)=>{_.component=g;const R=g.vnode.props;g.vnode=_,g.next=null,Fh(g,_.props,R,C),Oh(g,_.children,C),rn(),aa(g),sn()},se=(g,_,C,R,S,D,U,B,L=!1)=>{const I=g&&g.children,Z=g?g.shapeFlag:0,j=_.children,{patchFlag:G,shapeFlag:Y}=_;if(G>0){if(G&128){ut(I,j,C,R,S,D,U,B,L);return}else if(G&256){be(I,j,C,R,S,D,U,B,L);return}}Y&8?(Z&16&&Et(I,S,D),j!==I&&c(C,j)):Z&16?Y&16?ut(I,j,C,R,S,D,U,B,L):Et(I,S,D,!0):(Z&8&&c(C,""),Y&16&&N(j,C,R,S,D,U,B,L))},be=(g,_,C,R,S,D,U,B,L)=>{g=g||Yn,_=_||Yn;const I=g.length,Z=_.length,j=Math.min(I,Z);let G;for(G=0;G<j;G++){const Y=_[G]=L?mn(_[G]):Bt(_[G]);m(g[G],Y,C,null,S,D,U,B,L)}I>Z?Et(g,S,D,!0,!1,j):N(_,C,R,S,D,U,B,L,j)},ut=(g,_,C,R,S,D,U,B,L)=>{let I=0;const Z=_.length;let j=g.length-1,G=Z-1;for(;I<=j&&I<=G;){const Y=g[I],ue=_[I]=L?mn(_[I]):Bt(_[I]);if(mu(Y,ue))m(Y,ue,C,null,S,D,U,B,L);else break;I++}for(;I<=j&&I<=G;){const Y=g[j],ue=_[G]=L?mn(_[G]):Bt(_[G]);if(mu(Y,ue))m(Y,ue,C,null,S,D,U,B,L);else break;j--,G--}if(I>j){if(I<=G){const Y=G+1,ue=Y<Z?_[Y].el:R;for(;I<=G;)m(null,_[I]=L?mn(_[I]):Bt(_[I]),C,ue,S,D,U,B,L),I++}}else if(I>G)for(;I<=j;)Ve(g[I],S,D,!0),I++;else{const Y=I,ue=I,ae=new Map;for(I=ue;I<=G;I++){const Ee=_[I]=L?mn(_[I]):Bt(_[I]);Ee.key!=null&&ae.set(Ee.key,I)}let le,$e=0;const Be=G-ue+1;let rt=!1,ft=0;const It=new Array(Be);for(I=0;I<Be;I++)It[I]=0;for(I=Y;I<=j;I++){const Ee=g[I];if($e>=Be){Ve(Ee,S,D,!0);continue}let Ue;if(Ee.key!=null)Ue=ae.get(Ee.key);else for(le=ue;le<=G;le++)if(It[le-ue]===0&&mu(Ee,_[le])){Ue=le;break}Ue===void 0?Ve(Ee,S,D,!0):(It[Ue-ue]=I+1,Ue>=ft?ft=Ue:rt=!0,m(Ee,_[Ue],C,null,S,D,U,B,L),$e++)}const En=rt?$h(It):Yn;for(le=En.length-1,I=Be-1;I>=0;I--){const Ee=ue+I,Ue=_[Ee],Ln=_[Ee+1],Nn=Ee+1<Z?Ln.el||Ln.placeholder:R;It[I]===0?m(null,Ue,C,Nn,S,D,U,B,L):rt&&(le<0||I!==En[le]?fe(Ue,C,Nn,2):le--)}}},fe=(g,_,C,R,S=null)=>{const{el:D,type:U,transition:B,children:L,shapeFlag:I}=g;if(I&6){fe(g.component.subTree,_,C,R);return}if(I&128){g.suspense.move(_,C,R);return}if(I&64){U.move(g,_,C,Gt);return}if(U===gt){u(D,_,C);for(let j=0;j<L.length;j++)fe(L[j],_,C,R);u(g.anchor,_,C);return}if(U===Ws){E(g,_,C);return}if(R!==2&&I&1&&B)if(R===0)B.beforeEnter(D),u(D,_,C),pt(()=>B.enter(D),S);else{const{leave:j,delayLeave:G,afterLeave:Y}=B,ue=()=>{g.ctx.isUnmounted?s(D):u(D,_,C)},ae=()=>{D._isLeaving&&D[Zd](!0),j(D,()=>{ue(),Y&&Y()})};G?G(D,ue,ae):ae()}else u(D,_,C)},Ve=(g,_,C,R=!1,S=!1)=>{const{type:D,props:U,ref:B,children:L,dynamicChildren:I,shapeFlag:Z,patchFlag:j,dirs:G,cacheIndex:Y}=g;if(j===-2&&(S=!1),B!=null&&(rn(),Lu(B,null,C,g,!0),sn()),Y!=null&&(_.renderCache[Y]=void 0),Z&256){_.ctx.deactivate(g);return}const ue=Z&1&&G,ae=!Nu(g);let le;if(ae&&(le=U&&U.onVnodeBeforeUnmount)&&Ot(le,_,g),Z&6)Ae(g.component,C,R);else{if(Z&128){g.suspense.unmount(C,R);return}ue&&kn(g,null,_,"beforeUnmount"),Z&64?g.type.remove(g,_,C,Gt,R):I&&!I.hasOnce&&(D!==gt||j>0&&j&64)?Et(I,_,C,!1,!0):(D===gt&&j&384||!S&&Z&16)&&Et(L,_,C),R&&ye(g)}(ae&&(le=U&&U.onVnodeUnmounted)||ue)&&pt(()=>{le&&Ot(le,_,g),ue&&kn(g,null,_,"unmounted")},C)},ye=g=>{const{type:_,el:C,anchor:R,transition:S}=g;if(_===gt){cr(C,R);return}if(_===Ws){y(g);return}const D=()=>{s(C),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(g.shapeFlag&1&&S&&!S.persisted){const{leave:U,delayLeave:B}=S,L=()=>U(C,D);B?B(g.el,D,L):L()}else D()},cr=(g,_)=>{let C;for(;g!==_;)C=h(g),s(g),g=C;s(_)},Ae=(g,_,C)=>{const{bum:R,scope:S,job:D,subTree:U,um:B,m:L,a:I}=g;ga(L),ga(I),R&&Sr(R),S.stop(),D&&(D.flags|=8,Ve(U,g,_,C)),B&&pt(B,_),pt(()=>{g.isUnmounted=!0},_)},Et=(g,_,C,R=!1,S=!1,D=0)=>{for(let U=D;U<g.length;U++)Ve(g[U],_,C,R,S)},cn=g=>{if(g.shapeFlag&6)return cn(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const _=h(g.anchor||g.el),C=_&&_[Jd];return C?h(C):_};let Rt=!1;const du=(g,_,C)=>{g==null?_._vnode&&Ve(_._vnode,null,null,!0):m(_._vnode||null,g,_,null,null,null,C),_._vnode=g,Rt||(Rt=!0,aa(),cc(),Rt=!1)},Gt={p:m,um:Ve,m:fe,r:ye,mt:me,mc:N,pc:se,pbc:$,n:cn,o:e};return{render:du,hydrate:void 0,createApp:bh(du)}}function qs({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Sn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Nh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fc(e,t,n=!1){const u=e.children,s=t.children;if(te(u)&&te(s))for(let r=0;r<u.length;r++){const i=u[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=mn(s[r]),o.el=i.el),!n&&o.patchFlag!==-2&&Fc(i,o)),o.type===_s&&o.patchFlag!==-1&&(o.el=i.el),o.type===wn&&!o.el&&(o.el=i.el)}}function $h(e){const t=e.slice(),n=[0];let u,s,r,i,o;const a=e.length;for(u=0;u<a;u++){const l=e[u];if(l!==0){if(s=n[n.length-1],e[s]<l){t[u]=s,n.push(u);continue}for(r=0,i=n.length-1;r<i;)o=r+i>>1,e[n[o]]<l?r=o+1:i=o;l<e[n[r]]&&(r>0&&(t[u]=n[r-1]),n[r]=u)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function Rc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Rc(t)}function ga(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ic=e=>e.__isSuspense;function Bh(e,t){t&&t.pendingBranch?te(e)?t.effects.push(...e):t.effects.push(e):Kd(e)}const gt=Symbol.for("v-fgt"),_s=Symbol.for("v-txt"),wn=Symbol.for("v-cmt"),Ws=Symbol.for("v-stc"),Uu=[];let bt=null;function Me(e=!1){Uu.push(bt=e?null:[])}function Uh(){Uu.pop(),bt=Uu[Uu.length-1]||null}let Gu=1;function ba(e,t=!1){Gu+=e,e<0&&bt&&t&&(bt.hasOnce=!0)}function Mc(e){return e.dynamicChildren=Gu>0?bt||Yn:null,Uh(),Gu>0&&bt&&bt.push(e),e}function Le(e,t,n,u,s,r){return Mc(H(e,t,n,u,s,r,!0))}function Hh(e,t,n,u,s){return Mc(lt(e,t,n,u,s,!0))}function Oc(e){return e?e.__v_isVNode===!0:!1}function mu(e,t){return e.type===t.type&&e.key===t.key}const Pc=({key:e})=>e??null,Tr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?De(e)||Je(e)||ne(e)?{i:xt,r:e,k:t,f:!!n}:e:null);function H(e,t=null,n=null,u=0,s=null,r=e===gt?0:1,i=!1,o=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Pc(t),ref:t&&Tr(t),scopeId:dc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:u,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:xt};return o?(mo(a,n),r&128&&e.normalize(a)):n&&(a.shapeFlag|=De(n)?8:16),Gu>0&&!i&&bt&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&bt.push(a),a}const lt=zh;function zh(e,t=null,n=null,u=0,s=null,r=!1){if((!e||e===lh)&&(e=wn),Oc(e)){const o=su(e,t,!0);return n&&mo(o,n),Gu>0&&!r&&bt&&(o.shapeFlag&6?bt[bt.indexOf(e)]=o:bt.push(o)),o.patchFlag=-2,o}if(Yh(e)&&(e=e.__vccOpts),t){t=jh(t);let{class:o,style:a}=t;o&&!De(o)&&(t.class=St(o)),ve(a)&&(io(a)&&!te(a)&&(a=qe({},a)),t.style=ds(a))}const i=De(e)?1:Ic(e)?128:Xd(e)?64:ve(e)?4:ne(e)?2:0;return H(e,t,n,u,s,i,r,!0)}function jh(e){return e?io(e)||Ec(e)?qe({},e):e:null}function su(e,t,n=!1,u=!1){const{props:s,ref:r,patchFlag:i,children:o,transition:a}=e,l=t?qh(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Pc(l),ref:t&&t.ref?n&&r?te(r)?r.concat(Tr(t)):[r,Tr(t)]:Tr(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==gt?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&su(e.ssContent),ssFallback:e.ssFallback&&su(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&u&&ao(c,a.clone(c)),c}function Hu(e=" ",t=0){return lt(_s,null,e,t)}function Vn(e="",t=!1){return t?(Me(),Hh(wn,null,e)):lt(wn,null,e)}function Bt(e){return e==null||typeof e=="boolean"?lt(wn):te(e)?lt(gt,null,e.slice()):Oc(e)?mn(e):lt(_s,null,String(e))}function mn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:su(e)}function mo(e,t){let n=0;const{shapeFlag:u}=e;if(t==null)t=null;else if(te(t))n=16;else if(typeof t=="object")if(u&65){const s=t.default;s&&(s._c&&(s._d=!1),mo(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Ec(t)?t._ctx=xt:s===3&&xt&&(xt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ne(t)?(t={default:t,_ctx:xt},n=32):(t=String(t),u&64?(n=16,t=[Hu(t)]):n=8);e.children=t,e.shapeFlag|=n}function qh(...e){const t={};for(let n=0;n<e.length;n++){const u=e[n];for(const s in u)if(s==="class")t.class!==u.class&&(t.class=St([t.class,u.class]));else if(s==="style")t.style=ds([t.style,u.style]);else if(as(s)){const r=t[s],i=u[s];i&&r!==i&&!(te(r)&&r.includes(i))&&(t[s]=r?[].concat(r,i):i)}else s!==""&&(t[s]=u[s])}return t}function Ot(e,t,n,u=null){Wt(e,t,7,[n,u])}const Wh=_c();let Vh=0;function Kh(e,t,n){const u=e.type,s=(t?t.appContext:e.appContext)||Wh,r={uid:Vh++,vnode:e,type:u,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kc(u,s),emitsOptions:wc(u,s),emit:null,emitted:null,propsDefaults:de,inheritAttrs:u.inheritAttrs,ctx:de,data:de,props:de,attrs:de,slots:de,refs:de,setupState:de,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Ah.bind(null,r),e.ce&&e.ce(r),r}let et=null;const Lc=()=>et||xt;let Gr,Si;{const e=fs(),t=(n,u)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(u),r=>{s.length>1?s.forEach(i=>i(r)):s[0](r)}};Gr=t("__VUE_INSTANCE_SETTERS__",n=>et=n),Si=t("__VUE_SSR_SETTERS__",n=>Ju=n)}const nr=e=>{const t=et;return Gr(e),e.scope.on(),()=>{e.scope.off(),Gr(t)}},_a=()=>{et&&et.scope.off(),Gr(null)};function Nc(e){return e.vnode.shapeFlag&4}let Ju=!1;function Gh(e,t=!1,n=!1){t&&Si(t);const{props:u,children:s}=e.vnode,r=Nc(e);Th(e,u,r,t),Mh(e,s,n||t);const i=r?Jh(e,t):void 0;return t&&Si(!1),i}function Jh(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ch);const{setup:u}=n;if(u){rn();const s=e.setupContext=u.length>1?Zh(e):null,r=nr(e),i=tr(u,e,0,[e.props,s]),o=$l(i);if(sn(),r(),(o||e.sp)&&!Nu(e)&&hc(e),o){if(i.then(_a,_a),t)return i.then(a=>{xa(e,a)}).catch(a=>{ms(a,e,0)});e.asyncDep=i}else xa(e,i)}else $c(e)}function xa(e,t,n){ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ve(t)&&(e.setupState=ic(t)),$c(e)}function $c(e,t,n){const u=e.type;e.render||(e.render=u.render||jt);{const s=nr(e);rn();try{fh(e)}finally{sn(),s()}}}const Xh={get(e,t){return Ge(e,"get",""),e[t]}};function Zh(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Xh),slots:e.slots,emit:e.emit,expose:t}}function xs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ic(Od(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in $u)return $u[n](e)},has(t,n){return n in t||n in $u}})):e.proxy}function Yh(e){return ne(e)&&"__vccOpts"in e}const qt=(e,t)=>zd(e,t,Ju),Qh="3.5.25";let Di;const ya=typeof window<"u"&&window.trustedTypes;if(ya)try{Di=ya.createPolicy("vue",{createHTML:e=>e})}catch{}const Bc=Di?e=>Di.createHTML(e):e=>e,ep="http://www.w3.org/2000/svg",tp="http://www.w3.org/1998/Math/MathML",en=typeof document<"u"?document:null,wa=en&&en.createElement("template"),np={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,u)=>{const s=t==="svg"?en.createElementNS(ep,e):t==="mathml"?en.createElementNS(tp,e):n?en.createElement(e,{is:n}):en.createElement(e);return e==="select"&&u&&u.multiple!=null&&s.setAttribute("multiple",u.multiple),s},createText:e=>en.createTextNode(e),createComment:e=>en.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>en.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,u,s,r){const i=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{wa.innerHTML=Bc(u==="svg"?`<svg>${e}</svg>`:u==="mathml"?`<math>${e}</math>`:e);const o=wa.content;if(u==="svg"||u==="mathml"){const a=o.firstChild;for(;a.firstChild;)o.appendChild(a.firstChild);o.removeChild(a)}t.insertBefore(o,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},up=Symbol("_vtc");function rp(e,t,n){const u=e[up];u&&(t=(t?[t,...u]:[...u]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Jr=Symbol("_vod"),Uc=Symbol("_vsh"),va={name:"show",beforeMount(e,{value:t},{transition:n}){e[Jr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):gu(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:u}){!t!=!n&&(u?t?(u.beforeEnter(e),gu(e,!0),u.enter(e)):u.leave(e,()=>{gu(e,!1)}):gu(e,t))},beforeUnmount(e,{value:t}){gu(e,t)}};function gu(e,t){e.style.display=t?e[Jr]:"none",e[Uc]=!t}const sp=Symbol(""),ip=/(?:^|;)\s*display\s*:/;function op(e,t,n){const u=e.style,s=De(n);let r=!1;if(n&&!s){if(t)if(De(t))for(const i of t.split(";")){const o=i.slice(0,i.indexOf(":")).trim();n[o]==null&&Fr(u,o,"")}else for(const i in t)n[i]==null&&Fr(u,i,"");for(const i in n)i==="display"&&(r=!0),Fr(u,i,n[i])}else if(s){if(t!==n){const i=u[sp];i&&(n+=";"+i),u.cssText=n,r=ip.test(n)}}else t&&e.removeAttribute("style");Jr in e&&(e[Jr]=r?u.display:"",e[Uc]&&(u.display="none"))}const Aa=/\s*!important$/;function Fr(e,t,n){if(te(n))n.forEach(u=>Fr(e,t,u));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const u=ap(e,t);Aa.test(n)?e.setProperty(an(u),n.replace(Aa,""),"important"):e[u]=n}}const Ea=["Webkit","Moz","ms"],Vs={};function ap(e,t){const n=Vs[t];if(n)return n;let u=un(t);if(u!=="filter"&&u in e)return Vs[t]=u;u=Hl(u);for(let s=0;s<Ea.length;s++){const r=Ea[s]+u;if(r in e)return Vs[t]=r}return t}const Ca="http://www.w3.org/1999/xlink";function ka(e,t,n,u,s,r=dd(t)){u&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ca,t.slice(6,t.length)):e.setAttributeNS(Ca,t,n):n==null||r&&!jl(n)?e.removeAttribute(t):e.setAttribute(t,r?"":An(n)?String(n):n)}function Sa(e,t,n,u,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Bc(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(o!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const o=typeof e[t];o==="boolean"?n=jl(n):n==null&&o==="string"?(n="",i=!0):o==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(s||t)}function Kn(e,t,n,u){e.addEventListener(t,n,u)}function lp(e,t,n,u){e.removeEventListener(t,n,u)}const Da=Symbol("_vei");function cp(e,t,n,u,s=null){const r=e[Da]||(e[Da]={}),i=r[t];if(u&&i)i.value=u;else{const[o,a]=fp(t);if(u){const l=r[t]=pp(u,s);Kn(e,o,l,a)}else i&&(lp(e,o,i,a),r[t]=void 0)}}const Ta=/(?:Once|Passive|Capture)$/;function fp(e){let t;if(Ta.test(e)){t={};let u;for(;u=e.match(Ta);)e=e.slice(0,e.length-u[0].length),t[u[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):an(e.slice(2)),t]}let Ks=0;const dp=Promise.resolve(),hp=()=>Ks||(dp.then(()=>Ks=0),Ks=Date.now());function pp(e,t){const n=u=>{if(!u._vts)u._vts=Date.now();else if(u._vts<=n.attached)return;Wt(mp(u,n.value),t,5,[u])};return n.value=e,n.attached=hp(),n}function mp(e,t){if(te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(u=>s=>!s._stopped&&u&&u(s))}else return t}const Fa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,gp=(e,t,n,u,s,r)=>{const i=s==="svg";t==="class"?rp(e,u,i):t==="style"?op(e,n,u):as(t)?Xi(t)||cp(e,t,n,u,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):bp(e,t,u,i))?(Sa(e,t,u),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ka(e,t,u,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!De(u))?Sa(e,un(t),u,r,t):(t==="true-value"?e._trueValue=u:t==="false-value"&&(e._falseValue=u),ka(e,t,u,i))};function bp(e,t,n,u){if(u)return!!(t==="innerHTML"||t==="textContent"||t in e&&Fa(t)&&ne(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Fa(t)&&De(n)?!1:t in e}const Ra=e=>{const t=e.props["onUpdate:modelValue"]||!1;return te(t)?n=>Sr(t,n):t};function _p(e){e.target.composing=!0}function Ia(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Gs=Symbol("_assign");function Ma(e,t,n){return t&&(e=e.trim()),n&&(e=Qi(e)),e}const Rr={created(e,{modifiers:{lazy:t,trim:n,number:u}},s){e[Gs]=Ra(s);const r=u||s.props&&s.props.type==="number";Kn(e,t?"change":"input",i=>{i.target.composing||e[Gs](Ma(e.value,n,r))}),(n||r)&&Kn(e,"change",()=>{e.value=Ma(e.value,n,r)}),t||(Kn(e,"compositionstart",_p),Kn(e,"compositionend",Ia),Kn(e,"change",Ia))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:u,trim:s,number:r}},i){if(e[Gs]=Ra(i),e.composing)return;const o=(r||e.type==="number")&&!/^0\d/.test(e.value)?Qi(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(u&&t===n||s&&e.value.trim()===a)||(e.value=a))}},xp=["ctrl","shift","alt","meta"],yp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xp.some(n=>e[`${n}Key`]&&!t.includes(n))},wp=(e,t)=>{const n=e._withMods||(e._withMods={}),u=t.join(".");return n[u]||(n[u]=((s,...r)=>{for(let i=0;i<t.length;i++){const o=yp[t[i]];if(o&&o(s,t))return}return e(s,...r)}))},vp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ap=(e,t)=>{const n=e._withKeys||(e._withKeys={}),u=t.join(".");return n[u]||(n[u]=(s=>{if(!("key"in s))return;const r=an(s.key);if(t.some(i=>i===r||vp[i]===r))return e(s)}))},Ep=qe({patchProp:gp},np);let Oa;function Cp(){return Oa||(Oa=Ph(Ep))}const kp=((...e)=>{const t=Cp().createApp(...e),{mount:n}=t;return t.mount=u=>{const s=Dp(u);if(!s)return;const r=t._component;!ne(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=n(s,!1,Sp(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},t});function Sp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Dp(e){return De(e)?document.querySelector(e):e}const ur={en:{title:"VibeMarkdown",settings:"Settings",chat:"AI Assistant",editor:"Editor",preview:"Preview",send:"Send",clear:"Clear Chat",placeholder:"Ask AI...",save:"Save",cancel:"Cancel",apiKey:"API Key",apiUrl:"API URL",model:"Model",settingsTitle:"AI Configuration",noKeyWarning:"Please configure API Key in settings first.",viewEditor:"Editor Only",viewSplit:"Split View",viewPreview:"Preview Only",toggleChat:"Toggle Chat",selectionContext:"Selected Context",switchLanguage:"Switch Language",initialGreeting:"Hello! I am your AI assistant. How can I help you with your Markdown today?",thinking:"Thinking...",result:"result",you:"You",ai:"AI",successEdit:"Successfully applied edit.",failEdit:"Failed to apply edit. Search block not found.",noResponse:"No response",errorPrefix:"Error: ",localDataInfo:"Your data is stored locally in your browser and is never uploaded to any server or third-party data collectors.",securityWarning:"Security Warning: Do not save your API Key on public computers. Please be aware that browser extensions may have access to local storage."},zh:{title:"VibeMarkdown",settings:"",chat:"AI ",editor:"",preview:"",send:"",clear:"",placeholder:" AI...",save:"",cancel:"",apiKey:"API Key",apiUrl:"API URL",model:"",settingsTitle:"AI ",noKeyWarning:" API Key",viewEditor:"",viewSplit:"",viewPreview:"",toggleChat:"",selectionContext:"",switchLanguage:"",initialGreeting:" AI ",thinking:"...",result:"",you:"",ai:"AI",successEdit:"",failEdit:"",noResponse:"",errorPrefix:"",localDataInfo:"",securityWarning:" API Key"}},Tp={class:"h-14 border-b border-gray-700 flex items-center justify-between px-4 bg-gray-800 shrink-0 z-40 relative"},Fp={class:"flex items-center gap-2"},Rp={class:"font-bold text-lg tracking-wide hidden sm:block"},Ip={class:"flex bg-gray-900 rounded-lg p-1 border border-gray-700"},Mp=["title"],Op=["title"],Pp=["title"],Lp={class:"flex items-center gap-3"},Np=["title"],$p=["title"],Bp={class:"material-icons text-sm"},Up=["title"],Hp=au({__name:"AppHeader",props:yn({currentLang:{}},{viewMode:{},viewModeModifiers:{},showChat:{type:Boolean},showChatModifiers:{}}),emits:yn(["toggleLanguage","openSettings"],["update:viewMode","update:showChat"]),setup(e,{emit:t}){const n=_n(e,"viewMode"),u=_n(e,"showChat"),s=t,r=qt(()=>ur[e.currentLang]);return(i,o)=>(Me(),Le("header",Tp,[H("div",Fp,[o[6]||(o[6]=H("span",{class:"material-icons text-purple-400"},"edit_note",-1)),H("h1",Rp,Ce(r.value.title),1)]),H("div",Ip,[H("button",{class:St(["p-1.5 rounded transition-colors",n.value==="editor"?"bg-gray-700 text-purple-400":"text-gray-400 hover:text-gray-200"]),title:r.value.viewEditor,onClick:o[0]||(o[0]=a=>n.value="editor")},[...o[7]||(o[7]=[H("span",{class:"material-icons text-sm"},"edit",-1)])],10,Mp),H("button",{class:St(["p-1.5 rounded transition-colors",n.value==="split"?"bg-gray-700 text-purple-400":"text-gray-400 hover:text-gray-200"]),title:r.value.viewSplit,onClick:o[1]||(o[1]=a=>n.value="split")},[...o[8]||(o[8]=[H("span",{class:"material-icons text-sm"},"vertical_split",-1)])],10,Op),H("button",{class:St(["p-1.5 rounded transition-colors",n.value==="preview"?"bg-gray-700 text-purple-400":"text-gray-400 hover:text-gray-200"]),title:r.value.viewPreview,onClick:o[2]||(o[2]=a=>n.value="preview")},[...o[9]||(o[9]=[H("span",{class:"material-icons text-sm"},"visibility",-1)])],10,Pp)]),H("div",Lp,[H("button",{class:St(["p-2 rounded-full transition-colors",u.value?"text-purple-400 bg-gray-700":"text-gray-400 hover:bg-gray-700"]),title:r.value.toggleChat,onClick:o[3]||(o[3]=a=>u.value=!u.value)},[...o[10]||(o[10]=[H("span",{class:"material-icons text-sm"},"chat",-1)])],10,Np),H("button",{class:"p-2 hover:bg-gray-700 rounded-full transition-colors",title:r.value.switchLanguage,onClick:o[4]||(o[4]=a=>s("toggleLanguage"))},[H("span",Bp,Ce(e.currentLang==="en"?"language":"translate"),1)],8,$p),H("button",{class:"p-2 hover:bg-gray-700 rounded-full transition-colors",title:r.value.settings,onClick:o[5]||(o[5]=a=>s("openSettings"))},[...o[11]||(o[11]=[H("span",{class:"material-icons"},"settings",-1)])],8,Up)])]))}});const{entries:Hc,setPrototypeOf:Pa,isFrozen:zp,getPrototypeOf:jp,getOwnPropertyDescriptor:qp}=Object;let{freeze:tt,seal:vt,create:Ti}=Object,{apply:Fi,construct:Ri}=typeof Reflect<"u"&&Reflect;tt||(tt=function(t){return t});vt||(vt=function(t){return t});Fi||(Fi=function(t,n){for(var u=arguments.length,s=new Array(u>2?u-2:0),r=2;r<u;r++)s[r-2]=arguments[r];return t.apply(n,s)});Ri||(Ri=function(t){for(var n=arguments.length,u=new Array(n>1?n-1:0),s=1;s<n;s++)u[s-1]=arguments[s];return new t(...u)});const gr=nt(Array.prototype.forEach),Wp=nt(Array.prototype.lastIndexOf),La=nt(Array.prototype.pop),bu=nt(Array.prototype.push),Vp=nt(Array.prototype.splice),Ir=nt(String.prototype.toLowerCase),Js=nt(String.prototype.toString),Xs=nt(String.prototype.match),_u=nt(String.prototype.replace),Kp=nt(String.prototype.indexOf),Gp=nt(String.prototype.trim),Ct=nt(Object.prototype.hasOwnProperty),Xe=nt(RegExp.prototype.test),xu=Jp(TypeError);function nt(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,u=new Array(n>1?n-1:0),s=1;s<n;s++)u[s-1]=arguments[s];return Fi(e,t,u)}}function Jp(e){return function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ri(e,n)}}function ie(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ir;Pa&&Pa(e,null);let u=t.length;for(;u--;){let s=t[u];if(typeof s=="string"){const r=n(s);r!==s&&(zp(t)||(t[u]=r),s=r)}e[s]=!0}return e}function Xp(e){for(let t=0;t<e.length;t++)Ct(e,t)||(e[t]=null);return e}function Lt(e){const t=Ti(null);for(const[n,u]of Hc(e))Ct(e,n)&&(Array.isArray(u)?t[n]=Xp(u):u&&typeof u=="object"&&u.constructor===Object?t[n]=Lt(u):t[n]=u);return t}function yu(e,t){for(;e!==null;){const u=qp(e,t);if(u){if(u.get)return nt(u.get);if(typeof u.value=="function")return nt(u.value)}e=jp(e)}function n(){return null}return n}const Na=tt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Zs=tt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ys=tt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Zp=tt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qs=tt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Yp=tt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$a=tt(["#text"]),Ba=tt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ei=tt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ua=tt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),br=tt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Qp=vt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),e1=vt(/<%[\w\W]*|[\w\W]*%>/gm),t1=vt(/\$\{[\w\W]*/gm),n1=vt(/^data-[\-\w.\u00B7-\uFFFF]+$/),u1=vt(/^aria-[\-\w]+$/),zc=vt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),r1=vt(/^(?:\w+script|data):/i),s1=vt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),jc=vt(/^html$/i),i1=vt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ha=Object.freeze({__proto__:null,ARIA_ATTR:u1,ATTR_WHITESPACE:s1,CUSTOM_ELEMENT:i1,DATA_ATTR:n1,DOCTYPE_NAME:jc,ERB_EXPR:e1,IS_ALLOWED_URI:zc,IS_SCRIPT_OR_DATA:r1,MUSTACHE_EXPR:Qp,TMPLIT_EXPR:t1});const wu={element:1,text:3,progressingInstruction:7,comment:8,document:9},o1=function(){return typeof window>"u"?null:window},a1=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let u=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(u=n.getAttribute(s));const r="dompurify"+(u?"#"+u:"");try{return t.createPolicy(r,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},za=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function qc(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o1();const t=J=>qc(J);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==wu.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const u=n,s=u.currentScript,{DocumentFragment:r,HTMLTemplateElement:i,Node:o,Element:a,NodeFilter:l,NamedNodeMap:c=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:h,trustedTypes:d}=e,p=a.prototype,m=yu(p,"cloneNode"),w=yu(p,"remove"),A=yu(p,"nextSibling"),x=yu(p,"childNodes"),E=yu(p,"parentNode");if(typeof i=="function"){const J=n.createElement("template");J.content&&J.content.ownerDocument&&(n=J.content.ownerDocument)}let y,k="";const{implementation:T,createNodeIterator:O,createDocumentFragment:N,getElementsByTagName:F}=n,{importNode:$}=u;let z=za();t.isSupported=typeof Hc=="function"&&typeof E=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:K,ERB_EXPR:Q,TMPLIT_EXPR:me,DATA_ATTR:ce,ARIA_ATTR:ge,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:se,CUSTOM_ELEMENT:be}=Ha;let{IS_ALLOWED_URI:ut}=Ha,fe=null;const Ve=ie({},[...Na,...Zs,...Ys,...Qs,...$a]);let ye=null;const cr=ie({},[...Ba,...ei,...Ua,...br]);let Ae=Object.seal(Ti(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Et=null,cn=null;const Rt=Object.seal(Ti(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let du=!0,Gt=!0,Os=!1,g=!0,_=!1,C=!0,R=!1,S=!1,D=!1,U=!1,B=!1,L=!1,I=!0,Z=!1;const j="user-content-";let G=!0,Y=!1,ue={},ae=null;const le=ie({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let $e=null;const Be=ie({},["audio","video","img","source","image","track"]);let rt=null;const ft=ie({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),It="http://www.w3.org/1998/Math/MathML",En="http://www.w3.org/2000/svg",Ee="http://www.w3.org/1999/xhtml";let Ue=Ee,Ln=!1,Nn=null;const Xf=ie({},[It,En,Ee],Js);let fr=ie({},["mi","mo","mn","ms","mtext"]),dr=ie({},["annotation-xml"]);const Zf=ie({},["title","style","font","a","script"]);let hu=null;const Yf=["application/xhtml+xml","text/html"],Qf="text/html";let Fe=null,$n=null;const ed=n.createElement("form"),Ko=function(b){return b instanceof RegExp||b instanceof Function},Ps=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!($n&&$n===b)){if((!b||typeof b!="object")&&(b={}),b=Lt(b),hu=Yf.indexOf(b.PARSER_MEDIA_TYPE)===-1?Qf:b.PARSER_MEDIA_TYPE,Fe=hu==="application/xhtml+xml"?Js:Ir,fe=Ct(b,"ALLOWED_TAGS")?ie({},b.ALLOWED_TAGS,Fe):Ve,ye=Ct(b,"ALLOWED_ATTR")?ie({},b.ALLOWED_ATTR,Fe):cr,Nn=Ct(b,"ALLOWED_NAMESPACES")?ie({},b.ALLOWED_NAMESPACES,Js):Xf,rt=Ct(b,"ADD_URI_SAFE_ATTR")?ie(Lt(ft),b.ADD_URI_SAFE_ATTR,Fe):ft,$e=Ct(b,"ADD_DATA_URI_TAGS")?ie(Lt(Be),b.ADD_DATA_URI_TAGS,Fe):Be,ae=Ct(b,"FORBID_CONTENTS")?ie({},b.FORBID_CONTENTS,Fe):le,Et=Ct(b,"FORBID_TAGS")?ie({},b.FORBID_TAGS,Fe):Lt({}),cn=Ct(b,"FORBID_ATTR")?ie({},b.FORBID_ATTR,Fe):Lt({}),ue=Ct(b,"USE_PROFILES")?b.USE_PROFILES:!1,du=b.ALLOW_ARIA_ATTR!==!1,Gt=b.ALLOW_DATA_ATTR!==!1,Os=b.ALLOW_UNKNOWN_PROTOCOLS||!1,g=b.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_=b.SAFE_FOR_TEMPLATES||!1,C=b.SAFE_FOR_XML!==!1,R=b.WHOLE_DOCUMENT||!1,U=b.RETURN_DOM||!1,B=b.RETURN_DOM_FRAGMENT||!1,L=b.RETURN_TRUSTED_TYPE||!1,D=b.FORCE_BODY||!1,I=b.SANITIZE_DOM!==!1,Z=b.SANITIZE_NAMED_PROPS||!1,G=b.KEEP_CONTENT!==!1,Y=b.IN_PLACE||!1,ut=b.ALLOWED_URI_REGEXP||zc,Ue=b.NAMESPACE||Ee,fr=b.MATHML_TEXT_INTEGRATION_POINTS||fr,dr=b.HTML_INTEGRATION_POINTS||dr,Ae=b.CUSTOM_ELEMENT_HANDLING||{},b.CUSTOM_ELEMENT_HANDLING&&Ko(b.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ae.tagNameCheck=b.CUSTOM_ELEMENT_HANDLING.tagNameCheck),b.CUSTOM_ELEMENT_HANDLING&&Ko(b.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ae.attributeNameCheck=b.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),b.CUSTOM_ELEMENT_HANDLING&&typeof b.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ae.allowCustomizedBuiltInElements=b.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_&&(Gt=!1),B&&(U=!0),ue&&(fe=ie({},$a),ye=[],ue.html===!0&&(ie(fe,Na),ie(ye,Ba)),ue.svg===!0&&(ie(fe,Zs),ie(ye,ei),ie(ye,br)),ue.svgFilters===!0&&(ie(fe,Ys),ie(ye,ei),ie(ye,br)),ue.mathMl===!0&&(ie(fe,Qs),ie(ye,Ua),ie(ye,br))),b.ADD_TAGS&&(typeof b.ADD_TAGS=="function"?Rt.tagCheck=b.ADD_TAGS:(fe===Ve&&(fe=Lt(fe)),ie(fe,b.ADD_TAGS,Fe))),b.ADD_ATTR&&(typeof b.ADD_ATTR=="function"?Rt.attributeCheck=b.ADD_ATTR:(ye===cr&&(ye=Lt(ye)),ie(ye,b.ADD_ATTR,Fe))),b.ADD_URI_SAFE_ATTR&&ie(rt,b.ADD_URI_SAFE_ATTR,Fe),b.FORBID_CONTENTS&&(ae===le&&(ae=Lt(ae)),ie(ae,b.FORBID_CONTENTS,Fe)),b.ADD_FORBID_CONTENTS&&(ae===le&&(ae=Lt(ae)),ie(ae,b.ADD_FORBID_CONTENTS,Fe)),G&&(fe["#text"]=!0),R&&ie(fe,["html","head","body"]),fe.table&&(ie(fe,["tbody"]),delete Et.tbody),b.TRUSTED_TYPES_POLICY){if(typeof b.TRUSTED_TYPES_POLICY.createHTML!="function")throw xu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof b.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=b.TRUSTED_TYPES_POLICY,k=y.createHTML("")}else y===void 0&&(y=a1(d,s)),y!==null&&typeof k=="string"&&(k=y.createHTML(""));tt&&tt(b),$n=b}},Go=ie({},[...Zs,...Ys,...Zp]),Jo=ie({},[...Qs,...Yp]),td=function(b){let P=E(b);(!P||!P.tagName)&&(P={namespaceURI:Ue,tagName:"template"});const W=Ir(b.tagName),we=Ir(P.tagName);return Nn[b.namespaceURI]?b.namespaceURI===En?P.namespaceURI===Ee?W==="svg":P.namespaceURI===It?W==="svg"&&(we==="annotation-xml"||fr[we]):!!Go[W]:b.namespaceURI===It?P.namespaceURI===Ee?W==="math":P.namespaceURI===En?W==="math"&&dr[we]:!!Jo[W]:b.namespaceURI===Ee?P.namespaceURI===En&&!dr[we]||P.namespaceURI===It&&!fr[we]?!1:!Jo[W]&&(Zf[W]||!Go[W]):!!(hu==="application/xhtml+xml"&&Nn[b.namespaceURI]):!1},Mt=function(b){bu(t.removed,{element:b});try{E(b).removeChild(b)}catch{w(b)}},Cn=function(b,P){try{bu(t.removed,{attribute:P.getAttributeNode(b),from:P})}catch{bu(t.removed,{attribute:null,from:P})}if(P.removeAttribute(b),b==="is")if(U||B)try{Mt(P)}catch{}else try{P.setAttribute(b,"")}catch{}},Xo=function(b){let P=null,W=null;if(D)b="<remove></remove>"+b;else{const ke=Xs(b,/^[\r\n\t ]+/);W=ke&&ke[0]}hu==="application/xhtml+xml"&&Ue===Ee&&(b='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+b+"</body></html>");const we=y?y.createHTML(b):b;if(Ue===Ee)try{P=new h().parseFromString(we,hu)}catch{}if(!P||!P.documentElement){P=T.createDocument(Ue,"template",null);try{P.documentElement.innerHTML=Ln?k:we}catch{}}const Ke=P.body||P.documentElement;return b&&W&&Ke.insertBefore(n.createTextNode(W),Ke.childNodes[0]||null),Ue===Ee?F.call(P,R?"html":"body")[0]:R?P.documentElement:Ke},Zo=function(b){return O.call(b.ownerDocument||b,b,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},Ls=function(b){return b instanceof f&&(typeof b.nodeName!="string"||typeof b.textContent!="string"||typeof b.removeChild!="function"||!(b.attributes instanceof c)||typeof b.removeAttribute!="function"||typeof b.setAttribute!="function"||typeof b.namespaceURI!="string"||typeof b.insertBefore!="function"||typeof b.hasChildNodes!="function")},Yo=function(b){return typeof o=="function"&&b instanceof o};function Jt(J,b,P){gr(J,W=>{W.call(t,b,P,$n)})}const Qo=function(b){let P=null;if(Jt(z.beforeSanitizeElements,b,null),Ls(b))return Mt(b),!0;const W=Fe(b.nodeName);if(Jt(z.uponSanitizeElement,b,{tagName:W,allowedTags:fe}),C&&b.hasChildNodes()&&!Yo(b.firstElementChild)&&Xe(/<[/\w!]/g,b.innerHTML)&&Xe(/<[/\w!]/g,b.textContent)||b.nodeType===wu.progressingInstruction||C&&b.nodeType===wu.comment&&Xe(/<[/\w]/g,b.data))return Mt(b),!0;if(!(Rt.tagCheck instanceof Function&&Rt.tagCheck(W))&&(!fe[W]||Et[W])){if(!Et[W]&&ta(W)&&(Ae.tagNameCheck instanceof RegExp&&Xe(Ae.tagNameCheck,W)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(W)))return!1;if(G&&!ae[W]){const we=E(b)||b.parentNode,Ke=x(b)||b.childNodes;if(Ke&&we){const ke=Ke.length;for(let st=ke-1;st>=0;--st){const Xt=m(Ke[st],!0);Xt.__removalCount=(b.__removalCount||0)+1,we.insertBefore(Xt,A(b))}}}return Mt(b),!0}return b instanceof a&&!td(b)||(W==="noscript"||W==="noembed"||W==="noframes")&&Xe(/<\/no(script|embed|frames)/i,b.innerHTML)?(Mt(b),!0):(_&&b.nodeType===wu.text&&(P=b.textContent,gr([K,Q,me],we=>{P=_u(P,we," ")}),b.textContent!==P&&(bu(t.removed,{element:b.cloneNode()}),b.textContent=P)),Jt(z.afterSanitizeElements,b,null),!1)},ea=function(b,P,W){if(I&&(P==="id"||P==="name")&&(W in n||W in ed))return!1;if(!(Gt&&!cn[P]&&Xe(ce,P))){if(!(du&&Xe(ge,P))){if(!(Rt.attributeCheck instanceof Function&&Rt.attributeCheck(P,b))){if(!ye[P]||cn[P]){if(!(ta(b)&&(Ae.tagNameCheck instanceof RegExp&&Xe(Ae.tagNameCheck,b)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(b))&&(Ae.attributeNameCheck instanceof RegExp&&Xe(Ae.attributeNameCheck,P)||Ae.attributeNameCheck instanceof Function&&Ae.attributeNameCheck(P,b))||P==="is"&&Ae.allowCustomizedBuiltInElements&&(Ae.tagNameCheck instanceof RegExp&&Xe(Ae.tagNameCheck,W)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(W))))return!1}else if(!rt[P]){if(!Xe(ut,_u(W,se,""))){if(!((P==="src"||P==="xlink:href"||P==="href")&&b!=="script"&&Kp(W,"data:")===0&&$e[b])){if(!(Os&&!Xe(oe,_u(W,se,"")))){if(W)return!1}}}}}}}return!0},ta=function(b){return b!=="annotation-xml"&&Xs(b,be)},na=function(b){Jt(z.beforeSanitizeAttributes,b,null);const{attributes:P}=b;if(!P||Ls(b))return;const W={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye,forceKeepAttr:void 0};let we=P.length;for(;we--;){const Ke=P[we],{name:ke,namespaceURI:st,value:Xt}=Ke,Bn=Fe(ke),Ns=Xt;let He=ke==="value"?Ns:Gp(Ns);if(W.attrName=Bn,W.attrValue=He,W.keepAttr=!0,W.forceKeepAttr=void 0,Jt(z.uponSanitizeAttribute,b,W),He=W.attrValue,Z&&(Bn==="id"||Bn==="name")&&(Cn(ke,b),He=j+He),C&&Xe(/((--!?|])>)|<\/(style|title|textarea)/i,He)){Cn(ke,b);continue}if(Bn==="attributename"&&Xs(He,"href")){Cn(ke,b);continue}if(W.forceKeepAttr)continue;if(!W.keepAttr){Cn(ke,b);continue}if(!g&&Xe(/\/>/i,He)){Cn(ke,b);continue}_&&gr([K,Q,me],ra=>{He=_u(He,ra," ")});const ua=Fe(b.nodeName);if(!ea(ua,Bn,He)){Cn(ke,b);continue}if(y&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!st)switch(d.getAttributeType(ua,Bn)){case"TrustedHTML":{He=y.createHTML(He);break}case"TrustedScriptURL":{He=y.createScriptURL(He);break}}if(He!==Ns)try{st?b.setAttributeNS(st,ke,He):b.setAttribute(ke,He),Ls(b)?Mt(b):La(t.removed)}catch{Cn(ke,b)}}Jt(z.afterSanitizeAttributes,b,null)},nd=function J(b){let P=null;const W=Zo(b);for(Jt(z.beforeSanitizeShadowDOM,b,null);P=W.nextNode();)Jt(z.uponSanitizeShadowNode,P,null),Qo(P),na(P),P.content instanceof r&&J(P.content);Jt(z.afterSanitizeShadowDOM,b,null)};return t.sanitize=function(J){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=null,W=null,we=null,Ke=null;if(Ln=!J,Ln&&(J="<!-->"),typeof J!="string"&&!Yo(J))if(typeof J.toString=="function"){if(J=J.toString(),typeof J!="string")throw xu("dirty is not a string, aborting")}else throw xu("toString is not a function");if(!t.isSupported)return J;if(S||Ps(b),t.removed=[],typeof J=="string"&&(Y=!1),Y){if(J.nodeName){const Xt=Fe(J.nodeName);if(!fe[Xt]||Et[Xt])throw xu("root node is forbidden and cannot be sanitized in-place")}}else if(J instanceof o)P=Xo("<!---->"),W=P.ownerDocument.importNode(J,!0),W.nodeType===wu.element&&W.nodeName==="BODY"||W.nodeName==="HTML"?P=W:P.appendChild(W);else{if(!U&&!_&&!R&&J.indexOf("<")===-1)return y&&L?y.createHTML(J):J;if(P=Xo(J),!P)return U?null:L?k:""}P&&D&&Mt(P.firstChild);const ke=Zo(Y?J:P);for(;we=ke.nextNode();)Qo(we),na(we),we.content instanceof r&&nd(we.content);if(Y)return J;if(U){if(B)for(Ke=N.call(P.ownerDocument);P.firstChild;)Ke.appendChild(P.firstChild);else Ke=P;return(ye.shadowroot||ye.shadowrootmode)&&(Ke=$.call(u,Ke,!0)),Ke}let st=R?P.outerHTML:P.innerHTML;return R&&fe["!doctype"]&&P.ownerDocument&&P.ownerDocument.doctype&&P.ownerDocument.doctype.name&&Xe(jc,P.ownerDocument.doctype.name)&&(st="<!DOCTYPE "+P.ownerDocument.doctype.name+`>
`+st),_&&gr([K,Q,me],Xt=>{st=_u(st,Xt," ")}),y&&L?y.createHTML(st):st},t.setConfig=function(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ps(J),S=!0},t.clearConfig=function(){$n=null,S=!1},t.isValidAttribute=function(J,b,P){$n||Ps({});const W=Fe(J),we=Fe(b);return ea(W,we,P)},t.addHook=function(J,b){typeof b=="function"&&bu(z[J],b)},t.removeHook=function(J,b){if(b!==void 0){const P=Wp(z[J],b);return P===-1?void 0:Vp(z[J],P,1)[0]}return La(z[J])},t.removeHooks=function(J){z[J]=[]},t.removeAllHooks=function(){z=za()},t}var Wc=qc();const l1={class:"flex flex-col border-r border-gray-700 min-w-0 h-full"},c1={class:"h-8 bg-gray-800 border-b border-gray-700 flex items-center px-3 text-xs text-gray-400 uppercase tracking-wider shrink-0"},f1={class:"flex-1 flex relative overflow-hidden"},d1={class:"flex-1 relative"},h1=["innerHTML"],p1=["value"],m1=au({__name:"MarkdownEditor",props:yn({currentLang:{},diffHighlights:{default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:yn(["selectionChange"],["update:modelValue"]),setup(e,{emit:t}){const n=_n(e,"modelValue"),u=t,s=qt(()=>ur[e.currentLang]),r=Se(null),i=Se(null),o=Se(null),a=Se(null),l=qt(()=>n.value?n.value.split(`
`).length:1),c=p=>{const m=p.target;i.value&&(i.value.scrollTop=m.scrollTop),o.value&&(o.value.scrollTop=m.scrollTop)},f=()=>{if(!r.value)return;const p=r.value.selectionStart,m=r.value.selectionEnd;a.value={start:p,end:m},p!==m?u("selectionChange",n.value?n.value.substring(p,m):""):u("selectionChange","")},h=p=>p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),d=qt(()=>{if(!n.value)return"";const p=n.value.split(`
`),m=a.value;let w=0,A="";return p.forEach((x,E)=>{const y=x.length,k=w,T=E===p.length-1,O=k+y+(T?0:1);let N=!1;e.diffHighlights.length>0&&(N=e.diffHighlights.some(K=>K.start===K.end?T?K.start>=k&&K.start<=O:K.start>=k&&K.start<O:Math.max(k,K.start)<Math.min(O,K.end)));let F=!1;m&&(m.start===m.end?T?F=m.start>=k&&m.start<=O:F=m.start>=k&&m.start<O:F=Math.max(k,m.start)<Math.min(O,m.end));const $=["px-4","whitespace-pre-wrap","break-words"];N&&$.push("bg-green-500/20"),F&&$.push("bg-blue-500/40");const z=h(x)||"<br>";A+=`<div class="${$.join(" ")}">${z}</div>`,w=O}),Wc.sanitize(A)});return(p,m)=>(Me(),Le("div",l1,[H("div",c1,Ce(s.value.editor),1),H("div",f1,[H("div",{ref_key:"lineNumbersRef",ref:i,class:"w-12 bg-gray-900 border-r border-gray-800 text-right pr-2 text-gray-600 font-mono text-sm select-none overflow-hidden"},[(Me(!0),Le(gt,null,vi(l.value,w=>(Me(),Le("div",{key:w,class:"h-6 flex items-center"},Ce(w),1))),128))],512),H("div",d1,[H("div",{ref_key:"backdropRef",ref:o,class:"absolute inset-0 font-mono text-sm leading-6 pointer-events-none text-transparent bg-gray-900 overflow-hidden",innerHTML:d.value},null,8,h1),H("textarea",{ref_key:"editorRef",ref:r,value:n.value,class:"absolute inset-0 w-full h-full bg-transparent text-gray-200 outline-none resize-none font-mono text-sm leading-6",style:{"caret-color":"white"},spellcheck:"false",onInput:m[0]||(m[0]=w=>n.value=w.target.value),onScroll:c,onSelect:f,onKeyup:f,onMouseup:f},null,40,p1)])])]))}}),ja={};function g1(e){let t=ja[e];if(t)return t;t=ja[e]=[];for(let n=0;n<128;n++){const u=String.fromCharCode(n);t.push(u)}for(let n=0;n<e.length;n++){const u=e.charCodeAt(n);t[u]="%"+("0"+u.toString(16).toUpperCase()).slice(-2)}return t}function iu(e,t){typeof t!="string"&&(t=iu.defaultChars);const n=g1(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(u){let s="";for(let r=0,i=u.length;r<i;r+=3){const o=parseInt(u.slice(r+1,r+3),16);if(o<128){s+=n[o];continue}if((o&224)===192&&r+3<i){const a=parseInt(u.slice(r+4,r+6),16);if((a&192)===128){const l=o<<6&1984|a&63;l<128?s+="":s+=String.fromCharCode(l),r+=3;continue}}if((o&240)===224&&r+6<i){const a=parseInt(u.slice(r+4,r+6),16),l=parseInt(u.slice(r+7,r+9),16);if((a&192)===128&&(l&192)===128){const c=o<<12&61440|a<<6&4032|l&63;c<2048||c>=55296&&c<=57343?s+="":s+=String.fromCharCode(c),r+=6;continue}}if((o&248)===240&&r+9<i){const a=parseInt(u.slice(r+4,r+6),16),l=parseInt(u.slice(r+7,r+9),16),c=parseInt(u.slice(r+10,r+12),16);if((a&192)===128&&(l&192)===128&&(c&192)===128){let f=o<<18&1835008|a<<12&258048|l<<6&4032|c&63;f<65536||f>1114111?s+="":(f-=65536,s+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),r+=9;continue}}s+=""}return s})}iu.defaultChars=";/?:@&=+$,#";iu.componentChars="";const qa={};function b1(e){let t=qa[e];if(t)return t;t=qa[e]=[];for(let n=0;n<128;n++){const u=String.fromCharCode(n);/^[0-9a-z]$/i.test(u)?t.push(u):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function rr(e,t,n){typeof t!="string"&&(n=t,t=rr.defaultChars),typeof n>"u"&&(n=!0);const u=b1(t);let s="";for(let r=0,i=e.length;r<i;r++){const o=e.charCodeAt(r);if(n&&o===37&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){s+=e.slice(r,r+3),r+=2;continue}if(o<128){s+=u[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&r+1<i){const a=e.charCodeAt(r+1);if(a>=56320&&a<=57343){s+=encodeURIComponent(e[r]+e[r+1]),r++;continue}}s+="%EF%BF%BD";continue}s+=encodeURIComponent(e[r])}return s}rr.defaultChars=";/?:@&=+$,-_.!~*'()#";rr.componentChars="-_.!~*'()";function go(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Xr(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const _1=/^([a-z0-9.+-]+:)/i,x1=/:[0-9]*$/,y1=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,w1=["<",">",'"',"`"," ","\r",`
`,"	"],v1=["{","}","|","\\","^","`"].concat(w1),A1=["'"].concat(v1),Wa=["%","/","?",";","#"].concat(A1),Va=["/","?","#"],E1=255,Ka=/^[+a-z0-9A-Z_-]{0,63}$/,C1=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ga={javascript:!0,"javascript:":!0},Ja={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function bo(e,t){if(e&&e instanceof Xr)return e;const n=new Xr;return n.parse(e,t),n}Xr.prototype.parse=function(e,t){let n,u,s,r=e;if(r=r.trim(),!t&&e.split("#").length===1){const l=y1.exec(r);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}let i=_1.exec(r);if(i&&(i=i[0],n=i.toLowerCase(),this.protocol=i,r=r.substr(i.length)),(t||i||r.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=r.substr(0,2)==="//",s&&!(i&&Ga[i])&&(r=r.substr(2),this.slashes=!0)),!Ga[i]&&(s||i&&!Ja[i])){let l=-1;for(let p=0;p<Va.length;p++)u=r.indexOf(Va[p]),u!==-1&&(l===-1||u<l)&&(l=u);let c,f;l===-1?f=r.lastIndexOf("@"):f=r.lastIndexOf("@",l),f!==-1&&(c=r.slice(0,f),r=r.slice(f+1),this.auth=c),l=-1;for(let p=0;p<Wa.length;p++)u=r.indexOf(Wa[p]),u!==-1&&(l===-1||u<l)&&(l=u);l===-1&&(l=r.length),r[l-1]===":"&&l--;const h=r.slice(0,l);r=r.slice(l),this.parseHost(h),this.hostname=this.hostname||"";const d=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!d){const p=this.hostname.split(/\./);for(let m=0,w=p.length;m<w;m++){const A=p[m];if(A&&!A.match(Ka)){let x="";for(let E=0,y=A.length;E<y;E++)A.charCodeAt(E)>127?x+="x":x+=A[E];if(!x.match(Ka)){const E=p.slice(0,m),y=p.slice(m+1),k=A.match(C1);k&&(E.push(k[1]),y.unshift(k[2])),y.length&&(r=y.join(".")+r),this.hostname=E.join(".");break}}}}this.hostname.length>E1&&(this.hostname=""),d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=r.indexOf("#");o!==-1&&(this.hash=r.substr(o),r=r.slice(0,o));const a=r.indexOf("?");return a!==-1&&(this.search=r.substr(a),r=r.slice(0,a)),r&&(this.pathname=r),Ja[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Xr.prototype.parseHost=function(e){let t=x1.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const k1=Object.freeze(Object.defineProperty({__proto__:null,decode:iu,encode:rr,format:go,parse:bo},Symbol.toStringTag,{value:"Module"})),Vc=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Kc=/[\0-\x1F\x7F-\x9F]/,S1=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,_o=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Gc=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Jc=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,D1=Object.freeze(Object.defineProperty({__proto__:null,Any:Vc,Cc:Kc,Cf:S1,P:_o,S:Gc,Z:Jc},Symbol.toStringTag,{value:"Module"})),T1=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),F1=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var ti;const R1=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),I1=(ti=String.fromCodePoint)!==null&&ti!==void 0?ti:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function M1(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=R1.get(e))!==null&&t!==void 0?t:e}var Ne;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ne||(Ne={}));const O1=32;var xn;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(xn||(xn={}));function Ii(e){return e>=Ne.ZERO&&e<=Ne.NINE}function P1(e){return e>=Ne.UPPER_A&&e<=Ne.UPPER_F||e>=Ne.LOWER_A&&e<=Ne.LOWER_F}function L1(e){return e>=Ne.UPPER_A&&e<=Ne.UPPER_Z||e>=Ne.LOWER_A&&e<=Ne.LOWER_Z||Ii(e)}function N1(e){return e===Ne.EQUALS||L1(e)}var Oe;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Oe||(Oe={}));var bn;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(bn||(bn={}));class $1{constructor(t,n,u){this.decodeTree=t,this.emitCodePoint=n,this.errors=u,this.state=Oe.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=bn.Strict}startEntity(t){this.decodeMode=t,this.state=Oe.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Oe.EntityStart:return t.charCodeAt(n)===Ne.NUM?(this.state=Oe.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Oe.NamedEntity,this.stateNamedEntity(t,n));case Oe.NumericStart:return this.stateNumericStart(t,n);case Oe.NumericDecimal:return this.stateNumericDecimal(t,n);case Oe.NumericHex:return this.stateNumericHex(t,n);case Oe.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|O1)===Ne.LOWER_X?(this.state=Oe.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Oe.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,u,s){if(n!==u){const r=u-n;this.result=this.result*Math.pow(s,r)+parseInt(t.substr(n,r),s),this.consumed+=r}}stateNumericHex(t,n){const u=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Ii(s)||P1(s))n+=1;else return this.addToNumericResult(t,u,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,u,n,16),-1}stateNumericDecimal(t,n){const u=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Ii(s))n+=1;else return this.addToNumericResult(t,u,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,u,n,10),-1}emitNumericEntity(t,n){var u;if(this.consumed<=n)return(u=this.errors)===null||u===void 0||u.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ne.SEMI)this.consumed+=1;else if(this.decodeMode===bn.Strict)return 0;return this.emitCodePoint(M1(this.result),this.consumed),this.errors&&(t!==Ne.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:u}=this;let s=u[this.treeIndex],r=(s&xn.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const i=t.charCodeAt(n);if(this.treeIndex=B1(u,s,this.treeIndex+Math.max(1,r),i),this.treeIndex<0)return this.result===0||this.decodeMode===bn.Attribute&&(r===0||N1(i))?0:this.emitNotTerminatedNamedEntity();if(s=u[this.treeIndex],r=(s&xn.VALUE_LENGTH)>>14,r!==0){if(i===Ne.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==bn.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:u}=this,s=(u[n]&xn.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,u){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~xn.VALUE_LENGTH:s[t+1],u),n===3&&this.emitCodePoint(s[t+2],u),u}end(){var t;switch(this.state){case Oe.NamedEntity:return this.result!==0&&(this.decodeMode!==bn.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Oe.NumericDecimal:return this.emitNumericEntity(0,2);case Oe.NumericHex:return this.emitNumericEntity(0,3);case Oe.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Oe.EntityStart:return 0}}}function Xc(e){let t="";const n=new $1(e,u=>t+=I1(u));return function(s,r){let i=0,o=0;for(;(o=s.indexOf("&",o))>=0;){t+=s.slice(i,o),n.startEntity(r);const l=n.write(s,o+1);if(l<0){i=o+n.end();break}i=o+l,o=l===0?i+1:i}const a=t+s.slice(i);return t="",a}}function B1(e,t,n,u){const s=(t&xn.BRANCH_LENGTH)>>7,r=t&xn.JUMP_TABLE;if(s===0)return r!==0&&u===r?n:-1;if(r){const a=u-r;return a<0||a>=s?-1:e[n+a]-1}let i=n,o=i+s-1;for(;i<=o;){const a=i+o>>>1,l=e[a];if(l<u)i=a+1;else if(l>u)o=a-1;else return e[a+s]}return-1}const U1=Xc(T1);Xc(F1);function Zc(e,t=bn.Legacy){return U1(e,t)}function H1(e){return Object.prototype.toString.call(e)}function xo(e){return H1(e)==="[object String]"}const z1=Object.prototype.hasOwnProperty;function j1(e,t){return z1.call(e,t)}function ys(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(u){e[u]=n[u]})}}),e}function Yc(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function yo(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Zr(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Qc=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,q1=/&([a-z#][a-z0-9]{1,31});/gi,W1=new RegExp(Qc.source+"|"+q1.source,"gi"),V1=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function K1(e,t){if(t.charCodeAt(0)===35&&V1.test(t)){const u=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return yo(u)?Zr(u):e}const n=Zc(e);return n!==e?n:e}function G1(e){return e.indexOf("\\")<0?e:e.replace(Qc,"$1")}function ou(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(W1,function(t,n,u){return n||K1(t,u)})}const J1=/[&<>"]/,X1=/[&<>"]/g,Z1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Y1(e){return Z1[e]}function vn(e){return J1.test(e)?e.replace(X1,Y1):e}const Q1=/[.?*+^$[\]\\(){}|-]/g;function em(e){return e.replace(Q1,"\\$&")}function xe(e){switch(e){case 9:case 32:return!0}return!1}function Xu(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Zu(e){return _o.test(e)||Gc.test(e)}function Yu(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function ws(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const tm={mdurl:k1,ucmicro:D1},nm=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Yc,assign:ys,escapeHtml:vn,escapeRE:em,fromCodePoint:Zr,has:j1,isMdAsciiPunct:Yu,isPunctChar:Zu,isSpace:xe,isString:xo,isValidEntityCode:yo,isWhiteSpace:Xu,lib:tm,normalizeReference:ws,unescapeAll:ou,unescapeMd:G1},Symbol.toStringTag,{value:"Module"}));function um(e,t,n){let u,s,r,i;const o=e.posMax,a=e.pos;for(e.pos=t+1,u=1;e.pos<o;){if(r=e.src.charCodeAt(e.pos),r===93&&(u--,u===0)){s=!0;break}if(i=e.pos,e.md.inline.skipToken(e),r===91){if(i===e.pos-1)u++;else if(n)return e.pos=a,-1}}let l=-1;return s&&(l=e.pos),e.pos=a,l}function rm(e,t,n){let u,s=t;const r={ok:!1,pos:0,str:""};if(e.charCodeAt(s)===60){for(s++;s<n;){if(u=e.charCodeAt(s),u===10||u===60)return r;if(u===62)return r.pos=s+1,r.str=ou(e.slice(t+1,s)),r.ok=!0,r;if(u===92&&s+1<n){s+=2;continue}s++}return r}let i=0;for(;s<n&&(u=e.charCodeAt(s),!(u===32||u<32||u===127));){if(u===92&&s+1<n){if(e.charCodeAt(s+1)===32)break;s+=2;continue}if(u===40&&(i++,i>32))return r;if(u===41){if(i===0)break;i--}s++}return t===s||i!==0||(r.str=ou(e.slice(t,s)),r.pos=s,r.ok=!0),r}function sm(e,t,n,u){let s,r=t;const i={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(u)i.str=u.str,i.marker=u.marker;else{if(r>=n)return i;let o=e.charCodeAt(r);if(o!==34&&o!==39&&o!==40)return i;t++,r++,o===40&&(o=41),i.marker=o}for(;r<n;){if(s=e.charCodeAt(r),s===i.marker)return i.pos=r+1,i.str+=ou(e.slice(t,r)),i.ok=!0,i;if(s===40&&i.marker===41)return i;s===92&&r+1<n&&r++,r++}return i.can_continue=!0,i.str+=ou(e.slice(t,r)),i}const im=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:rm,parseLinkLabel:um,parseLinkTitle:sm},Symbol.toStringTag,{value:"Module"})),Vt={};Vt.code_inline=function(e,t,n,u,s){const r=e[t];return"<code"+s.renderAttrs(r)+">"+vn(r.content)+"</code>"};Vt.code_block=function(e,t,n,u,s){const r=e[t];return"<pre"+s.renderAttrs(r)+"><code>"+vn(e[t].content)+`</code></pre>
`};Vt.fence=function(e,t,n,u,s){const r=e[t],i=r.info?ou(r.info).trim():"";let o="",a="";if(i){const c=i.split(/(\s+)/g);o=c[0],a=c.slice(2).join("")}let l;if(n.highlight?l=n.highlight(r.content,o,a)||vn(r.content):l=vn(r.content),l.indexOf("<pre")===0)return l+`
`;if(i){const c=r.attrIndex("class"),f=r.attrs?r.attrs.slice():[];c<0?f.push(["class",n.langPrefix+o]):(f[c]=f[c].slice(),f[c][1]+=" "+n.langPrefix+o);const h={attrs:f};return`<pre><code${s.renderAttrs(h)}>${l}</code></pre>
`}return`<pre><code${s.renderAttrs(r)}>${l}</code></pre>
`};Vt.image=function(e,t,n,u,s){const r=e[t];return r.attrs[r.attrIndex("alt")][1]=s.renderInlineAsText(r.children,n,u),s.renderToken(e,t,n)};Vt.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Vt.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Vt.text=function(e,t){return vn(e[t].content)};Vt.html_block=function(e,t){return e[t].content};Vt.html_inline=function(e,t){return e[t].content};function lu(){this.rules=ys({},Vt)}lu.prototype.renderAttrs=function(t){let n,u,s;if(!t.attrs)return"";for(s="",n=0,u=t.attrs.length;n<u;n++)s+=" "+vn(t.attrs[n][0])+'="'+vn(t.attrs[n][1])+'"';return s};lu.prototype.renderToken=function(t,n,u){const s=t[n];let r="";if(s.hidden)return"";s.block&&s.nesting!==-1&&n&&t[n-1].hidden&&(r+=`
`),r+=(s.nesting===-1?"</":"<")+s.tag,r+=this.renderAttrs(s),s.nesting===0&&u.xhtmlOut&&(r+=" /");let i=!1;if(s.block&&(i=!0,s.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===s.tag)&&(i=!1)}return r+=i?`>
`:">",r};lu.prototype.renderInline=function(e,t,n){let u="";const s=this.rules;for(let r=0,i=e.length;r<i;r++){const o=e[r].type;typeof s[o]<"u"?u+=s[o](e,r,t,n,this):u+=this.renderToken(e,r,t)}return u};lu.prototype.renderInlineAsText=function(e,t,n){let u="";for(let s=0,r=e.length;s<r;s++)switch(e[s].type){case"text":u+=e[s].content;break;case"image":u+=this.renderInlineAsText(e[s].children,t,n);break;case"html_inline":case"html_block":u+=e[s].content;break;case"softbreak":case"hardbreak":u+=`
`;break}return u};lu.prototype.render=function(e,t,n){let u="";const s=this.rules;for(let r=0,i=e.length;r<i;r++){const o=e[r].type;o==="inline"?u+=this.renderInline(e[r].children,t,n):typeof s[o]<"u"?u+=s[o](e,r,t,n,this):u+=this.renderToken(e,r,t,n)}return u};function ct(){this.__rules__=[],this.__cache__=null}ct.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};ct.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(u){t.indexOf(u)<0&&t.push(u)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(u){u.enabled&&(n&&u.alt.indexOf(n)<0||e.__cache__[n].push(u.fn))})})};ct.prototype.at=function(e,t,n){const u=this.__find__(e),s=n||{};if(u===-1)throw new Error("Parser rule not found: "+e);this.__rules__[u].fn=t,this.__rules__[u].alt=s.alt||[],this.__cache__=null};ct.prototype.before=function(e,t,n,u){const s=this.__find__(e),r=u||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null};ct.prototype.after=function(e,t,n,u){const s=this.__find__(e),r=u||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null};ct.prototype.push=function(e,t,n){const u=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:u.alt||[]}),this.__cache__=null};ct.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(u){const s=this.__find__(u);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+u)}this.__rules__[s].enabled=!0,n.push(u)},this),this.__cache__=null,n};ct.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};ct.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(u){const s=this.__find__(u);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+u)}this.__rules__[s].enabled=!1,n.push(u)},this),this.__cache__=null,n};ct.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Ft(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Ft.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let u=0,s=n.length;u<s;u++)if(n[u][0]===t)return u;return-1};Ft.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Ft.prototype.attrSet=function(t,n){const u=this.attrIndex(t),s=[t,n];u<0?this.attrPush(s):this.attrs[u]=s};Ft.prototype.attrGet=function(t){const n=this.attrIndex(t);let u=null;return n>=0&&(u=this.attrs[n][1]),u};Ft.prototype.attrJoin=function(t,n){const u=this.attrIndex(t);u<0?this.attrPush([t,n]):this.attrs[u][1]=this.attrs[u][1]+" "+n};function e0(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}e0.prototype.Token=Ft;const om=/\r\n?|\n/g,am=/\0/g;function lm(e){let t;t=e.src.replace(om,`
`),t=t.replace(am,""),e.src=t}function cm(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function fm(e){const t=e.tokens;for(let n=0,u=t.length;n<u;n++){const s=t[n];s.type==="inline"&&e.md.inline.parse(s.content,e.md,e.env,s.children)}}function dm(e){return/^<a[>\s]/i.test(e)}function hm(e){return/^<\/a\s*>/i.test(e)}function pm(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,u=t.length;n<u;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let s=t[n].children,r=0;for(let i=s.length-1;i>=0;i--){const o=s[i];if(o.type==="link_close"){for(i--;s[i].level!==o.level&&s[i].type!=="link_open";)i--;continue}if(o.type==="html_inline"&&(dm(o.content)&&r>0&&r--,hm(o.content)&&r++),!(r>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const a=o.content;let l=e.md.linkify.match(a);const c=[];let f=o.level,h=0;l.length>0&&l[0].index===0&&i>0&&s[i-1].type==="text_special"&&(l=l.slice(1));for(let d=0;d<l.length;d++){const p=l[d].url,m=e.md.normalizeLink(p);if(!e.md.validateLink(m))continue;let w=l[d].text;l[d].schema?l[d].schema==="mailto:"&&!/^mailto:/i.test(w)?w=e.md.normalizeLinkText("mailto:"+w).replace(/^mailto:/,""):w=e.md.normalizeLinkText(w):w=e.md.normalizeLinkText("http://"+w).replace(/^http:\/\//,"");const A=l[d].index;if(A>h){const k=new e.Token("text","",0);k.content=a.slice(h,A),k.level=f,c.push(k)}const x=new e.Token("link_open","a",1);x.attrs=[["href",m]],x.level=f++,x.markup="linkify",x.info="auto",c.push(x);const E=new e.Token("text","",0);E.content=w,E.level=f,c.push(E);const y=new e.Token("link_close","a",-1);y.level=--f,y.markup="linkify",y.info="auto",c.push(y),h=l[d].lastIndex}if(h<a.length){const d=new e.Token("text","",0);d.content=a.slice(h),d.level=f,c.push(d)}t[n].children=s=Yc(s,i,c)}}}}const t0=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,mm=/\((c|tm|r)\)/i,gm=/\((c|tm|r)\)/ig,bm={c:"",r:"",tm:""};function _m(e,t){return bm[t.toLowerCase()]}function xm(e){let t=0;for(let n=e.length-1;n>=0;n--){const u=e[n];u.type==="text"&&!t&&(u.content=u.content.replace(gm,_m)),u.type==="link_open"&&u.info==="auto"&&t--,u.type==="link_close"&&u.info==="auto"&&t++}}function ym(e){let t=0;for(let n=e.length-1;n>=0;n--){const u=e[n];u.type==="text"&&!t&&t0.test(u.content)&&(u.content=u.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),u.type==="link_open"&&u.info==="auto"&&t--,u.type==="link_close"&&u.info==="auto"&&t++}}function wm(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(mm.test(e.tokens[t].content)&&xm(e.tokens[t].children),t0.test(e.tokens[t].content)&&ym(e.tokens[t].children))}const vm=/['"]/,Xa=/['"]/g,Za="";function _r(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Am(e,t){let n;const u=[];for(let s=0;s<e.length;s++){const r=e[s],i=e[s].level;for(n=u.length-1;n>=0&&!(u[n].level<=i);n--);if(u.length=n+1,r.type!=="text")continue;let o=r.content,a=0,l=o.length;e:for(;a<l;){Xa.lastIndex=a;const c=Xa.exec(o);if(!c)break;let f=!0,h=!0;a=c.index+1;const d=c[0]==="'";let p=32;if(c.index-1>=0)p=o.charCodeAt(c.index-1);else for(n=s-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let m=32;if(a<l)m=o.charCodeAt(a);else for(n=s+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){m=e[n].content.charCodeAt(0);break}const w=Yu(p)||Zu(String.fromCharCode(p)),A=Yu(m)||Zu(String.fromCharCode(m)),x=Xu(p),E=Xu(m);if(E?f=!1:A&&(x||w||(f=!1)),x?h=!1:w&&(E||A||(h=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(h=f=!1),f&&h&&(f=w,h=A),!f&&!h){d&&(r.content=_r(r.content,c.index,Za));continue}if(h)for(n=u.length-1;n>=0;n--){let y=u[n];if(u[n].level<i)break;if(y.single===d&&u[n].level===i){y=u[n];let k,T;d?(k=t.md.options.quotes[2],T=t.md.options.quotes[3]):(k=t.md.options.quotes[0],T=t.md.options.quotes[1]),r.content=_r(r.content,c.index,T),e[y.token].content=_r(e[y.token].content,y.pos,k),a+=T.length-1,y.token===s&&(a+=k.length-1),o=r.content,l=o.length,u.length=n;continue e}}f?u.push({token:s,pos:c.index,single:d,level:i}):h&&d&&(r.content=_r(r.content,c.index,Za))}}}function Em(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!vm.test(e.tokens[t].content)||Am(e.tokens[t].children,e)}function Cm(e){let t,n;const u=e.tokens,s=u.length;for(let r=0;r<s;r++){if(u[r].type!=="inline")continue;const i=u[r].children,o=i.length;for(t=0;t<o;t++)i[t].type==="text_special"&&(i[t].type="text");for(t=n=0;t<o;t++)i[t].type==="text"&&t+1<o&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}}const ni=[["normalize",lm],["block",cm],["inline",fm],["linkify",pm],["replacements",wm],["smartquotes",Em],["text_join",Cm]];function wo(){this.ruler=new ct;for(let e=0;e<ni.length;e++)this.ruler.push(ni[e][0],ni[e][1])}wo.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,u=t.length;n<u;n++)t[n](e)};wo.prototype.State=e0;function Kt(e,t,n,u){this.src=e,this.md=t,this.env=n,this.tokens=u,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let r=0,i=0,o=0,a=0,l=s.length,c=!1;i<l;i++){const f=s.charCodeAt(i);if(!c)if(xe(f)){o++,f===9?a+=4-a%4:a++;continue}else c=!0;(f===10||i===l-1)&&(f!==10&&i++,this.bMarks.push(r),this.eMarks.push(i),this.tShift.push(o),this.sCount.push(a),this.bsCount.push(0),c=!1,o=0,a=0,r=i+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Kt.prototype.push=function(e,t,n){const u=new Ft(e,t,n);return u.block=!0,n<0&&this.level--,u.level=this.level,n>0&&this.level++,this.tokens.push(u),u};Kt.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Kt.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Kt.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const u=this.src.charCodeAt(t);if(!xe(u))break}return t};Kt.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!xe(this.src.charCodeAt(--t)))return t+1;return t};Kt.prototype.skipChars=function(t,n){for(let u=this.src.length;t<u&&this.src.charCodeAt(t)===n;t++);return t};Kt.prototype.skipCharsBack=function(t,n,u){if(t<=u)return t;for(;t>u;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Kt.prototype.getLines=function(t,n,u,s){if(t>=n)return"";const r=new Array(n-t);for(let i=0,o=t;o<n;o++,i++){let a=0;const l=this.bMarks[o];let c=l,f;for(o+1<n||s?f=this.eMarks[o]+1:f=this.eMarks[o];c<f&&a<u;){const h=this.src.charCodeAt(c);if(xe(h))h===9?a+=4-(a+this.bsCount[o])%4:a++;else if(c-l<this.tShift[o])a++;else break;c++}a>u?r[i]=new Array(a-u+1).join(" ")+this.src.slice(c,f):r[i]=this.src.slice(c,f)}return r.join("")};Kt.prototype.Token=Ft;const km=65536;function ui(e,t){const n=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];return e.src.slice(n,u)}function Ya(e){const t=[],n=e.length;let u=0,s=e.charCodeAt(u),r=!1,i=0,o="";for(;u<n;)s===124&&(r?(o+=e.substring(i,u-1),i=u):(t.push(o+e.substring(i,u)),o="",i=u+1)),r=s===92,u++,s=e.charCodeAt(u);return t.push(o+e.substring(i)),t}function Sm(e,t,n,u){if(t+2>n)return!1;let s=t+1;if(e.sCount[s]<e.blkIndent||e.sCount[s]-e.blkIndent>=4)return!1;let r=e.bMarks[s]+e.tShift[s];if(r>=e.eMarks[s])return!1;const i=e.src.charCodeAt(r++);if(i!==124&&i!==45&&i!==58||r>=e.eMarks[s])return!1;const o=e.src.charCodeAt(r++);if(o!==124&&o!==45&&o!==58&&!xe(o)||i===45&&xe(o))return!1;for(;r<e.eMarks[s];){const y=e.src.charCodeAt(r);if(y!==124&&y!==45&&y!==58&&!xe(y))return!1;r++}let a=ui(e,t+1),l=a.split("|");const c=[];for(let y=0;y<l.length;y++){const k=l[y].trim();if(!k){if(y===0||y===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?c.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?c.push("left"):c.push("")}if(a=ui(e,t).trim(),a.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;l=Ya(a),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop();const f=l.length;if(f===0||f!==c.length)return!1;if(u)return!0;const h=e.parentType;e.parentType="table";const d=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),m=[t,0];p.map=m;const w=e.push("thead_open","thead",1);w.map=[t,t+1];const A=e.push("tr_open","tr",1);A.map=[t,t+1];for(let y=0;y<l.length;y++){const k=e.push("th_open","th",1);c[y]&&(k.attrs=[["style","text-align:"+c[y]]]);const T=e.push("inline","",0);T.content=l[y].trim(),T.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let x,E=0;for(s=t+2;s<n&&!(e.sCount[s]<e.blkIndent);s++){let y=!1;for(let T=0,O=d.length;T<O;T++)if(d[T](e,s,n,!0)){y=!0;break}if(y||(a=ui(e,s).trim(),!a)||e.sCount[s]-e.blkIndent>=4||(l=Ya(a),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop(),E+=f-l.length,E>km))break;if(s===t+2){const T=e.push("tbody_open","tbody",1);T.map=x=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[s,s+1];for(let T=0;T<f;T++){const O=e.push("td_open","td",1);c[T]&&(O.attrs=[["style","text-align:"+c[T]]]);const N=e.push("inline","",0);N.content=l[T]?l[T].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return x&&(e.push("tbody_close","tbody",-1),x[1]=s),e.push("table_close","table",-1),m[1]=s,e.parentType=h,e.line=s,!0}function Dm(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let u=t+1,s=u;for(;u<n;){if(e.isEmpty(u)){u++;continue}if(e.sCount[u]-e.blkIndent>=4){u++,s=u;continue}break}e.line=s;const r=e.push("code_block","code",0);return r.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,r.map=[t,e.line],!0}function Tm(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||s+3>r)return!1;const i=e.src.charCodeAt(s);if(i!==126&&i!==96)return!1;let o=s;s=e.skipChars(s,i);let a=s-o;if(a<3)return!1;const l=e.src.slice(o,s),c=e.src.slice(s,r);if(i===96&&c.indexOf(String.fromCharCode(i))>=0)return!1;if(u)return!0;let f=t,h=!1;for(;f++,!(f>=n||(s=o=e.bMarks[f]+e.tShift[f],r=e.eMarks[f],s<r&&e.sCount[f]<e.blkIndent));)if(e.src.charCodeAt(s)===i&&!(e.sCount[f]-e.blkIndent>=4)&&(s=e.skipChars(s,i),!(s-o<a)&&(s=e.skipSpaces(s),!(s<r)))){h=!0;break}a=e.sCount[t],e.line=f+(h?1:0);const d=e.push("fence","code",0);return d.info=c,d.content=e.getLines(t+1,f,a,!0),d.markup=l,d.map=[t,e.line],!0}function Fm(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];const i=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==62)return!1;if(u)return!0;const o=[],a=[],l=[],c=[],f=e.md.block.ruler.getRules("blockquote"),h=e.parentType;e.parentType="blockquote";let d=!1,p;for(p=t;p<n;p++){const E=e.sCount[p]<e.blkIndent;if(s=e.bMarks[p]+e.tShift[p],r=e.eMarks[p],s>=r)break;if(e.src.charCodeAt(s++)===62&&!E){let k=e.sCount[p]+1,T,O;e.src.charCodeAt(s)===32?(s++,k++,O=!1,T=!0):e.src.charCodeAt(s)===9?(T=!0,(e.bsCount[p]+k)%4===3?(s++,k++,O=!1):O=!0):T=!1;let N=k;for(o.push(e.bMarks[p]),e.bMarks[p]=s;s<r;){const F=e.src.charCodeAt(s);if(xe(F))F===9?N+=4-(N+e.bsCount[p]+(O?1:0))%4:N++;else break;s++}d=s>=r,a.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(T?1:0),l.push(e.sCount[p]),e.sCount[p]=N-k,c.push(e.tShift[p]),e.tShift[p]=s-e.bMarks[p];continue}if(d)break;let y=!1;for(let k=0,T=f.length;k<T;k++)if(f[k](e,p,n,!0)){y=!0;break}if(y){e.lineMax=p,e.blkIndent!==0&&(o.push(e.bMarks[p]),a.push(e.bsCount[p]),c.push(e.tShift[p]),l.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}o.push(e.bMarks[p]),a.push(e.bsCount[p]),c.push(e.tShift[p]),l.push(e.sCount[p]),e.sCount[p]=-1}const m=e.blkIndent;e.blkIndent=0;const w=e.push("blockquote_open","blockquote",1);w.markup=">";const A=[t,0];w.map=A,e.md.block.tokenize(e,t,p);const x=e.push("blockquote_close","blockquote",-1);x.markup=">",e.lineMax=i,e.parentType=h,A[1]=e.line;for(let E=0;E<c.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=c[E],e.sCount[E+t]=l[E],e.bsCount[E+t]=a[E];return e.blkIndent=m,!0}function Rm(e,t,n,u){const s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==95)return!1;let o=1;for(;r<s;){const l=e.src.charCodeAt(r++);if(l!==i&&!xe(l))return!1;l===i&&o++}if(o<3)return!1;if(u)return!0;e.line=t+1;const a=e.push("hr","hr",0);return a.map=[t,e.line],a.markup=Array(o+1).join(String.fromCharCode(i)),!0}function Qa(e,t){const n=e.eMarks[t];let u=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(u++);if(s!==42&&s!==45&&s!==43)return-1;if(u<n){const r=e.src.charCodeAt(u);if(!xe(r))return-1}return u}function el(e,t){const n=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];let s=n;if(s+1>=u)return-1;let r=e.src.charCodeAt(s++);if(r<48||r>57)return-1;for(;;){if(s>=u)return-1;if(r=e.src.charCodeAt(s++),r>=48&&r<=57){if(s-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return s<u&&(r=e.src.charCodeAt(s),!xe(r))?-1:s}function Im(e,t){const n=e.level+2;for(let u=t+2,s=e.tokens.length-2;u<s;u++)e.tokens[u].level===n&&e.tokens[u].type==="paragraph_open"&&(e.tokens[u+2].hidden=!0,e.tokens[u].hidden=!0,u+=2)}function Mm(e,t,n,u){let s,r,i,o,a=t,l=!0;if(e.sCount[a]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[a]-e.listIndent>=4&&e.sCount[a]<e.blkIndent)return!1;let c=!1;u&&e.parentType==="paragraph"&&e.sCount[a]>=e.blkIndent&&(c=!0);let f,h,d;if((d=el(e,a))>=0){if(f=!0,i=e.bMarks[a]+e.tShift[a],h=Number(e.src.slice(i,d-1)),c&&h!==1)return!1}else if((d=Qa(e,a))>=0)f=!1;else return!1;if(c&&e.skipSpaces(d)>=e.eMarks[a])return!1;if(u)return!0;const p=e.src.charCodeAt(d-1),m=e.tokens.length;f?(o=e.push("ordered_list_open","ol",1),h!==1&&(o.attrs=[["start",h]])):o=e.push("bullet_list_open","ul",1);const w=[a,0];o.map=w,o.markup=String.fromCharCode(p);let A=!1;const x=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";a<n;){r=d,s=e.eMarks[a];const y=e.sCount[a]+d-(e.bMarks[a]+e.tShift[a]);let k=y;for(;r<s;){const ce=e.src.charCodeAt(r);if(ce===9)k+=4-(k+e.bsCount[a])%4;else if(ce===32)k++;else break;r++}const T=r;let O;T>=s?O=1:O=k-y,O>4&&(O=1);const N=y+O;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(p);const F=[a,0];o.map=F,f&&(o.info=e.src.slice(i,d-1));const $=e.tight,z=e.tShift[a],K=e.sCount[a],Q=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[a]=T-e.bMarks[a],e.sCount[a]=k,T>=s&&e.isEmpty(a+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,a,n,!0),(!e.tight||A)&&(l=!1),A=e.line-a>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Q,e.tShift[a]=z,e.sCount[a]=K,e.tight=$,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(p),a=e.line,F[1]=a,a>=n||e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)break;let me=!1;for(let ce=0,ge=x.length;ce<ge;ce++)if(x[ce](e,a,n,!0)){me=!0;break}if(me)break;if(f){if(d=el(e,a),d<0)break;i=e.bMarks[a]+e.tShift[a]}else if(d=Qa(e,a),d<0)break;if(p!==e.src.charCodeAt(d-1))break}return f?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(p),w[1]=a,e.line=a,e.parentType=E,l&&Im(e,m),!0}function Om(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t],i=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==91)return!1;function o(x){const E=e.lineMax;if(x>=E||e.isEmpty(x))return null;let y=!1;if(e.sCount[x]-e.blkIndent>3&&(y=!0),e.sCount[x]<0&&(y=!0),!y){const O=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let F=!1;for(let $=0,z=O.length;$<z;$++)if(O[$](e,x,E,!0)){F=!0;break}if(e.parentType=N,F)return null}const k=e.bMarks[x]+e.tShift[x],T=e.eMarks[x];return e.src.slice(k,T+1)}let a=e.src.slice(s,r+1);r=a.length;let l=-1;for(s=1;s<r;s++){const x=a.charCodeAt(s);if(x===91)return!1;if(x===93){l=s;break}else if(x===10){const E=o(i);E!==null&&(a+=E,r=a.length,i++)}else if(x===92&&(s++,s<r&&a.charCodeAt(s)===10)){const E=o(i);E!==null&&(a+=E,r=a.length,i++)}}if(l<0||a.charCodeAt(l+1)!==58)return!1;for(s=l+2;s<r;s++){const x=a.charCodeAt(s);if(x===10){const E=o(i);E!==null&&(a+=E,r=a.length,i++)}else if(!xe(x))break}const c=e.md.helpers.parseLinkDestination(a,s,r);if(!c.ok)return!1;const f=e.md.normalizeLink(c.str);if(!e.md.validateLink(f))return!1;s=c.pos;const h=s,d=i,p=s;for(;s<r;s++){const x=a.charCodeAt(s);if(x===10){const E=o(i);E!==null&&(a+=E,r=a.length,i++)}else if(!xe(x))break}let m=e.md.helpers.parseLinkTitle(a,s,r);for(;m.can_continue;){const x=o(i);if(x===null)break;a+=x,s=r,r=a.length,i++,m=e.md.helpers.parseLinkTitle(a,s,r,m)}let w;for(s<r&&p!==s&&m.ok?(w=m.str,s=m.pos):(w="",s=h,i=d);s<r;){const x=a.charCodeAt(s);if(!xe(x))break;s++}if(s<r&&a.charCodeAt(s)!==10&&w)for(w="",s=h,i=d;s<r;){const x=a.charCodeAt(s);if(!xe(x))break;s++}if(s<r&&a.charCodeAt(s)!==10)return!1;const A=ws(a.slice(1,l));return A?(u||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[A]>"u"&&(e.env.references[A]={title:w,href:f}),e.line=i),!0):!1}const Pm=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Lm="[a-zA-Z_:][a-zA-Z0-9:._-]*",Nm="[^\"'=<>`\\x00-\\x20]+",$m="'[^']*'",Bm='"[^"]*"',Um="(?:"+Nm+"|"+$m+"|"+Bm+")",Hm="(?:\\s+"+Lm+"(?:\\s*=\\s*"+Um+")?)",n0="<[A-Za-z][A-Za-z0-9\\-]*"+Hm+"*\\s*\\/?>",u0="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",zm="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",jm="<[?][\\s\\S]*?[?]>",qm="<![A-Za-z][^>]*>",Wm="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Vm=new RegExp("^(?:"+n0+"|"+u0+"|"+zm+"|"+jm+"|"+qm+"|"+Wm+")"),Km=new RegExp("^(?:"+n0+"|"+u0+")"),Hn=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Pm.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Km.source+"\\s*$"),/^$/,!1]];function Gm(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(s)!==60)return!1;let i=e.src.slice(s,r),o=0;for(;o<Hn.length&&!Hn[o][0].test(i);o++);if(o===Hn.length)return!1;if(u)return Hn[o][2];let a=t+1;if(!Hn[o][1].test(i)){for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(s=e.bMarks[a]+e.tShift[a],r=e.eMarks[a],i=e.src.slice(s,r),Hn[o][1].test(i)){i.length!==0&&a++;break}}e.line=a;const l=e.push("html_block","",0);return l.map=[t,a],l.content=e.getLines(t,a,e.blkIndent,!0),!0}function Jm(e,t,n,u){let s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.src.charCodeAt(s);if(i!==35||s>=r)return!1;let o=1;for(i=e.src.charCodeAt(++s);i===35&&s<r&&o<=6;)o++,i=e.src.charCodeAt(++s);if(o>6||s<r&&!xe(i))return!1;if(u)return!0;r=e.skipSpacesBack(r,s);const a=e.skipCharsBack(r,35,s);a>s&&xe(e.src.charCodeAt(a-1))&&(r=a),e.line=t+1;const l=e.push("heading_open","h"+String(o),1);l.markup="########".slice(0,o),l.map=[t,e.line];const c=e.push("inline","",0);c.content=e.src.slice(s,r).trim(),c.map=[t,e.line],c.children=[];const f=e.push("heading_close","h"+String(o),-1);return f.markup="########".slice(0,o),!0}function Xm(e,t,n){const u=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const s=e.parentType;e.parentType="paragraph";let r=0,i,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let d=e.bMarks[o]+e.tShift[o];const p=e.eMarks[o];if(d<p&&(i=e.src.charCodeAt(d),(i===45||i===61)&&(d=e.skipChars(d,i),d=e.skipSpaces(d),d>=p))){r=i===61?1:2;break}}if(e.sCount[o]<0)continue;let h=!1;for(let d=0,p=u.length;d<p;d++)if(u[d](e,o,n,!0)){h=!0;break}if(h)break}if(!r)return!1;const a=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const l=e.push("heading_open","h"+String(r),1);l.markup=String.fromCharCode(i),l.map=[t,e.line];const c=e.push("inline","",0);c.content=a,c.map=[t,e.line-1],c.children=[];const f=e.push("heading_close","h"+String(r),-1);return f.markup=String.fromCharCode(i),e.parentType=s,!0}function Zm(e,t,n){const u=e.md.block.ruler.getRules("paragraph"),s=e.parentType;let r=t+1;for(e.parentType="paragraph";r<n&&!e.isEmpty(r);r++){if(e.sCount[r]-e.blkIndent>3||e.sCount[r]<0)continue;let l=!1;for(let c=0,f=u.length;c<f;c++)if(u[c](e,r,n,!0)){l=!0;break}if(l)break}const i=e.getLines(t,r,e.blkIndent,!1).trim();e.line=r;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const a=e.push("inline","",0);return a.content=i,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=s,!0}const xr=[["table",Sm,["paragraph","reference"]],["code",Dm],["fence",Tm,["paragraph","reference","blockquote","list"]],["blockquote",Fm,["paragraph","reference","blockquote","list"]],["hr",Rm,["paragraph","reference","blockquote","list"]],["list",Mm,["paragraph","reference","blockquote"]],["reference",Om],["html_block",Gm,["paragraph","reference","blockquote"]],["heading",Jm,["paragraph","reference","blockquote"]],["lheading",Xm],["paragraph",Zm]];function vs(){this.ruler=new ct;for(let e=0;e<xr.length;e++)this.ruler.push(xr[e][0],xr[e][1],{alt:(xr[e][2]||[]).slice()})}vs.prototype.tokenize=function(e,t,n){const u=this.ruler.getRules(""),s=u.length,r=e.md.options.maxNesting;let i=t,o=!1;for(;i<n&&(e.line=i=e.skipEmptyLines(i),!(i>=n||e.sCount[i]<e.blkIndent));){if(e.level>=r){e.line=n;break}const a=e.line;let l=!1;for(let c=0;c<s;c++)if(l=u[c](e,i,n,!1),l){if(a>=e.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),i=e.line,i<n&&e.isEmpty(i)&&(o=!0,i++,e.line=i)}};vs.prototype.parse=function(e,t,n,u){if(!e)return;const s=new this.State(e,t,n,u);this.tokenize(s,s.line,s.lineMax)};vs.prototype.State=Kt;function sr(e,t,n,u){this.src=e,this.env=n,this.md=t,this.tokens=u,this.tokens_meta=Array(u.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}sr.prototype.pushPending=function(){const e=new Ft("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};sr.prototype.push=function(e,t,n){this.pending&&this.pushPending();const u=new Ft(e,t,n);let s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),u.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(u),this.tokens_meta.push(s),u};sr.prototype.scanDelims=function(e,t){const n=this.posMax,u=this.src.charCodeAt(e),s=e>0?this.src.charCodeAt(e-1):32;let r=e;for(;r<n&&this.src.charCodeAt(r)===u;)r++;const i=r-e,o=r<n?this.src.charCodeAt(r):32,a=Yu(s)||Zu(String.fromCharCode(s)),l=Yu(o)||Zu(String.fromCharCode(o)),c=Xu(s),f=Xu(o),h=!f&&(!l||c||a),d=!c&&(!a||f||l);return{can_open:h&&(t||!d||a),can_close:d&&(t||!h||l),length:i}};sr.prototype.Token=Ft;function Ym(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Qm(e,t){let n=e.pos;for(;n<e.posMax&&!Ym(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const eg=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function tg(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,u=e.posMax;if(n+3>u||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const s=e.pending.match(eg);if(!s)return!1;const r=s[1],i=e.md.linkify.matchAtStart(e.src.slice(n-r.length));if(!i)return!1;let o=i.url;if(o.length<=r.length)return!1;o=o.replace(/\*+$/,"");const a=e.md.normalizeLink(o);if(!e.md.validateLink(a))return!1;if(!t){e.pending=e.pending.slice(0,-r.length);const l=e.push("link_open","a",1);l.attrs=[["href",a]],l.markup="linkify",l.info="auto";const c=e.push("text","",0);c.content=e.md.normalizeLinkText(o);const f=e.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return e.pos+=o.length-r.length,!0}function ng(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const u=e.pending.length-1,s=e.posMax;if(!t)if(u>=0&&e.pending.charCodeAt(u)===32)if(u>=1&&e.pending.charCodeAt(u-1)===32){let r=u-1;for(;r>=1&&e.pending.charCodeAt(r-1)===32;)r--;e.pending=e.pending.slice(0,r),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<s&&xe(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const vo=[];for(let e=0;e<256;e++)vo.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){vo[e.charCodeAt(0)]=1});function ug(e,t){let n=e.pos;const u=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=u))return!1;let s=e.src.charCodeAt(n);if(s===10){for(t||e.push("hardbreak","br",0),n++;n<u&&(s=e.src.charCodeAt(n),!!xe(s));)n++;return e.pos=n,!0}let r=e.src[n];if(s>=55296&&s<=56319&&n+1<u){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(r+=e.src[n+1],n++)}const i="\\"+r;if(!t){const o=e.push("text_special","",0);s<256&&vo[s]!==0?o.content=r:o.content=i,o.markup=i,o.info="escape"}return e.pos=n+1,!0}function rg(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const s=n;n++;const r=e.posMax;for(;n<r&&e.src.charCodeAt(n)===96;)n++;const i=e.src.slice(s,n),o=i.length;if(e.backticksScanned&&(e.backticks[o]||0)<=s)return t||(e.pending+=i),e.pos+=o,!0;let a=n,l;for(;(l=e.src.indexOf("`",a))!==-1;){for(a=l+1;a<r&&e.src.charCodeAt(a)===96;)a++;const c=a-l;if(c===o){if(!t){const f=e.push("code_inline","code",0);f.markup=i,f.content=e.src.slice(n,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=a,!0}e.backticks[c]=l}return e.backticksScanned=!0,t||(e.pending+=i),e.pos+=o,!0}function sg(e,t){const n=e.pos,u=e.src.charCodeAt(n);if(t||u!==126)return!1;const s=e.scanDelims(e.pos,!0);let r=s.length;const i=String.fromCharCode(u);if(r<2)return!1;let o;r%2&&(o=e.push("text","",0),o.content=i,r--);for(let a=0;a<r;a+=2)o=e.push("text","",0),o.content=i+i,e.delimiters.push({marker:u,length:0,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return e.pos+=s.length,!0}function tl(e,t){let n;const u=[],s=t.length;for(let r=0;r<s;r++){const i=t[r];if(i.marker!==126||i.end===-1)continue;const o=t[i.end];n=e.tokens[i.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&u.push(o.token-1)}for(;u.length;){const r=u.pop();let i=r+1;for(;i<e.tokens.length&&e.tokens[i].type==="s_close";)i++;i--,r!==i&&(n=e.tokens[i],e.tokens[i]=e.tokens[r],e.tokens[r]=n)}}function ig(e){const t=e.tokens_meta,n=e.tokens_meta.length;tl(e,e.delimiters);for(let u=0;u<n;u++)t[u]&&t[u].delimiters&&tl(e,t[u].delimiters)}const r0={tokenize:sg,postProcess:ig};function og(e,t){const n=e.pos,u=e.src.charCodeAt(n);if(t||u!==95&&u!==42)return!1;const s=e.scanDelims(e.pos,u===42);for(let r=0;r<s.length;r++){const i=e.push("text","",0);i.content=String.fromCharCode(u),e.delimiters.push({marker:u,length:s.length,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return e.pos+=s.length,!0}function nl(e,t){const n=t.length;for(let u=n-1;u>=0;u--){const s=t[u];if(s.marker!==95&&s.marker!==42||s.end===-1)continue;const r=t[s.end],i=u>0&&t[u-1].end===s.end+1&&t[u-1].marker===s.marker&&t[u-1].token===s.token-1&&t[s.end+1].token===r.token+1,o=String.fromCharCode(s.marker),a=e.tokens[s.token];a.type=i?"strong_open":"em_open",a.tag=i?"strong":"em",a.nesting=1,a.markup=i?o+o:o,a.content="";const l=e.tokens[r.token];l.type=i?"strong_close":"em_close",l.tag=i?"strong":"em",l.nesting=-1,l.markup=i?o+o:o,l.content="",i&&(e.tokens[t[u-1].token].content="",e.tokens[t[s.end+1].token].content="",u--)}}function ag(e){const t=e.tokens_meta,n=e.tokens_meta.length;nl(e,e.delimiters);for(let u=0;u<n;u++)t[u]&&t[u].delimiters&&nl(e,t[u].delimiters)}const s0={tokenize:og,postProcess:ag};function lg(e,t){let n,u,s,r,i="",o="",a=e.pos,l=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const c=e.pos,f=e.posMax,h=e.pos+1,d=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(d<0)return!1;let p=d+1;if(p<f&&e.src.charCodeAt(p)===40){for(l=!1,p++;p<f&&(n=e.src.charCodeAt(p),!(!xe(n)&&n!==10));p++);if(p>=f)return!1;if(a=p,s=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),s.ok){for(i=e.md.normalizeLink(s.str),e.md.validateLink(i)?p=s.pos:i="",a=p;p<f&&(n=e.src.charCodeAt(p),!(!xe(n)&&n!==10));p++);if(s=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<f&&a!==p&&s.ok)for(o=s.str,p=s.pos;p<f&&(n=e.src.charCodeAt(p),!(!xe(n)&&n!==10));p++);}(p>=f||e.src.charCodeAt(p)!==41)&&(l=!0),p++}if(l){if(typeof e.env.references>"u")return!1;if(p<f&&e.src.charCodeAt(p)===91?(a=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?u=e.src.slice(a,p++):p=d+1):p=d+1,u||(u=e.src.slice(h,d)),r=e.env.references[ws(u)],!r)return e.pos=c,!1;i=r.href,o=r.title}if(!t){e.pos=h,e.posMax=d;const m=e.push("link_open","a",1),w=[["href",i]];m.attrs=w,o&&w.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=f,!0}function cg(e,t){let n,u,s,r,i,o,a,l,c="";const f=e.pos,h=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const d=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(r=p+1,r<h&&e.src.charCodeAt(r)===40){for(r++;r<h&&(n=e.src.charCodeAt(r),!(!xe(n)&&n!==10));r++);if(r>=h)return!1;for(l=r,o=e.md.helpers.parseLinkDestination(e.src,r,e.posMax),o.ok&&(c=e.md.normalizeLink(o.str),e.md.validateLink(c)?r=o.pos:c=""),l=r;r<h&&(n=e.src.charCodeAt(r),!(!xe(n)&&n!==10));r++);if(o=e.md.helpers.parseLinkTitle(e.src,r,e.posMax),r<h&&l!==r&&o.ok)for(a=o.str,r=o.pos;r<h&&(n=e.src.charCodeAt(r),!(!xe(n)&&n!==10));r++);else a="";if(r>=h||e.src.charCodeAt(r)!==41)return e.pos=f,!1;r++}else{if(typeof e.env.references>"u")return!1;if(r<h&&e.src.charCodeAt(r)===91?(l=r+1,r=e.md.helpers.parseLinkLabel(e,r),r>=0?s=e.src.slice(l,r++):r=p+1):r=p+1,s||(s=e.src.slice(d,p)),i=e.env.references[ws(s)],!i)return e.pos=f,!1;c=i.href,a=i.title}if(!t){u=e.src.slice(d,p);const m=[];e.md.inline.parse(u,e.md,e.env,m);const w=e.push("image","img",0),A=[["src",c],["alt",""]];w.attrs=A,w.children=m,w.content=u,a&&A.push(["title",a])}return e.pos=r,e.posMax=h,!0}const fg=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,dg=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function hg(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const u=e.pos,s=e.posMax;for(;;){if(++n>=s)return!1;const i=e.src.charCodeAt(n);if(i===60)return!1;if(i===62)break}const r=e.src.slice(u+1,n);if(dg.test(r)){const i=e.md.normalizeLink(r);if(!e.md.validateLink(i))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",i]],o.markup="autolink",o.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(r);const l=e.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return e.pos+=r.length+2,!0}if(fg.test(r)){const i=e.md.normalizeLink("mailto:"+r);if(!e.md.validateLink(i))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",i]],o.markup="autolink",o.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(r);const l=e.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return e.pos+=r.length+2,!0}return!1}function pg(e){return/^<a[>\s]/i.test(e)}function mg(e){return/^<\/a\s*>/i.test(e)}function gg(e){const t=e|32;return t>=97&&t<=122}function bg(e,t){if(!e.md.options.html)return!1;const n=e.posMax,u=e.pos;if(e.src.charCodeAt(u)!==60||u+2>=n)return!1;const s=e.src.charCodeAt(u+1);if(s!==33&&s!==63&&s!==47&&!gg(s))return!1;const r=e.src.slice(u).match(Vm);if(!r)return!1;if(!t){const i=e.push("html_inline","",0);i.content=r[0],pg(i.content)&&e.linkLevel++,mg(i.content)&&e.linkLevel--}return e.pos+=r[0].length,!0}const _g=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,xg=/^&([a-z][a-z0-9]{1,31});/i;function yg(e,t){const n=e.pos,u=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=u)return!1;if(e.src.charCodeAt(n+1)===35){const r=e.src.slice(n).match(_g);if(r){if(!t){const i=r[1][0].toLowerCase()==="x"?parseInt(r[1].slice(1),16):parseInt(r[1],10),o=e.push("text_special","",0);o.content=yo(i)?Zr(i):Zr(65533),o.markup=r[0],o.info="entity"}return e.pos+=r[0].length,!0}}else{const r=e.src.slice(n).match(xg);if(r){const i=Zc(r[0]);if(i!==r[0]){if(!t){const o=e.push("text_special","",0);o.content=i,o.markup=r[0],o.info="entity"}return e.pos+=r[0].length,!0}}}return!1}function ul(e){const t={},n=e.length;if(!n)return;let u=0,s=-2;const r=[];for(let i=0;i<n;i++){const o=e[i];if(r.push(0),(e[u].marker!==o.marker||s!==o.token-1)&&(u=i),s=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const a=t[o.marker][(o.open?3:0)+o.length%3];let l=u-r[u]-1,c=l;for(;l>a;l-=r[l]+1){const f=e[l];if(f.marker===o.marker&&f.open&&f.end<0){let h=!1;if((f.close||o.open)&&(f.length+o.length)%3===0&&(f.length%3!==0||o.length%3!==0)&&(h=!0),!h){const d=l>0&&!e[l-1].open?r[l-1]+1:0;r[i]=i-l+d,r[l]=d,o.open=!1,f.end=i,f.close=!1,c=-1,s=-2;break}}}c!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=c)}}function wg(e){const t=e.tokens_meta,n=e.tokens_meta.length;ul(e.delimiters);for(let u=0;u<n;u++)t[u]&&t[u].delimiters&&ul(t[u].delimiters)}function vg(e){let t,n,u=0;const s=e.tokens,r=e.tokens.length;for(t=n=0;t<r;t++)s[t].nesting<0&&u--,s[t].level=u,s[t].nesting>0&&u++,s[t].type==="text"&&t+1<r&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}const ri=[["text",Qm],["linkify",tg],["newline",ng],["escape",ug],["backticks",rg],["strikethrough",r0.tokenize],["emphasis",s0.tokenize],["link",lg],["image",cg],["autolink",hg],["html_inline",bg],["entity",yg]],si=[["balance_pairs",wg],["strikethrough",r0.postProcess],["emphasis",s0.postProcess],["fragments_join",vg]];function ir(){this.ruler=new ct;for(let e=0;e<ri.length;e++)this.ruler.push(ri[e][0],ri[e][1]);this.ruler2=new ct;for(let e=0;e<si.length;e++)this.ruler2.push(si[e][0],si[e][1])}ir.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),u=n.length,s=e.md.options.maxNesting,r=e.cache;if(typeof r[t]<"u"){e.pos=r[t];return}let i=!1;if(e.level<s){for(let o=0;o<u;o++)if(e.level++,i=n[o](e,!0),e.level--,i){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;i||e.pos++,r[t]=e.pos};ir.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,u=e.posMax,s=e.md.options.maxNesting;for(;e.pos<u;){const r=e.pos;let i=!1;if(e.level<s){for(let o=0;o<n;o++)if(i=t[o](e,!1),i){if(r>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(i){if(e.pos>=u)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};ir.prototype.parse=function(e,t,n,u){const s=new this.State(e,t,n,u);this.tokenize(s);const r=this.ruler2.getRules(""),i=r.length;for(let o=0;o<i;o++)r[o](s)};ir.prototype.State=sr;function Ag(e){const t={};e=e||{},t.src_Any=Vc.source,t.src_Cc=Kc.source,t.src_Z=Jc.source,t.src_P=_o.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Mi(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(u){e[u]=n[u]})}),e}function As(e){return Object.prototype.toString.call(e)}function Eg(e){return As(e)==="[object String]"}function Cg(e){return As(e)==="[object Object]"}function kg(e){return As(e)==="[object RegExp]"}function rl(e){return As(e)==="[object Function]"}function Sg(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const i0={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Dg(e){return Object.keys(e||{}).reduce(function(t,n){return t||i0.hasOwnProperty(n)},!1)}const Tg={"http:":{validate:function(e,t,n){const u=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(u)?u.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const u=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(u)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:u.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const u=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(u)?u.match(n.re.mailto)[0].length:0}}},Fg="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Rg="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Ig(e){e.__index__=-1,e.__text_cache__=""}function Mg(e){return function(t,n){const u=t.slice(n);return e.test(u)?u.match(e)[0].length:0}}function sl(){return function(e,t){t.normalize(e)}}function Yr(e){const t=e.re=Ag(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Fg),n.push(t.src_xn),t.src_tlds=n.join("|");function u(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(u(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(u(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(u(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(u(t.tpl_host_fuzzy_test),"i");const s=[];e.__compiled__={};function r(o,a){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+a)}Object.keys(e.__schemas__).forEach(function(o){const a=e.__schemas__[o];if(a===null)return;const l={validate:null,link:null};if(e.__compiled__[o]=l,Cg(a)){kg(a.validate)?l.validate=Mg(a.validate):rl(a.validate)?l.validate=a.validate:r(o,a),rl(a.normalize)?l.normalize=a.normalize:a.normalize?r(o,a):l.normalize=sl();return}if(Eg(a)){s.push(o);return}r(o,a)}),s.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:sl()};const i=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(Sg).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+i+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+i+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Ig(e)}function Og(e,t){const n=e.__index__,u=e.__last_index__,s=e.__text_cache__.slice(n,u);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=u+t,this.raw=s,this.text=s,this.url=s}function Oi(e,t){const n=new Og(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function _t(e,t){if(!(this instanceof _t))return new _t(e,t);t||Dg(e)&&(t=e,e={}),this.__opts__=Mi({},i0,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Mi({},Tg,e),this.__compiled__={},this.__tlds__=Rg,this.__tlds_replaced__=!1,this.re={},Yr(this)}_t.prototype.add=function(t,n){return this.__schemas__[t]=n,Yr(this),this};_t.prototype.set=function(t){return this.__opts__=Mi(this.__opts__,t),this};_t.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,u,s,r,i,o,a,l,c;if(this.re.schema_test.test(t)){for(a=this.re.schema_search,a.lastIndex=0;(n=a.exec(t))!==null;)if(r=this.testSchemaAt(t,n[2],a.lastIndex),r){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=t.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(u=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(i=u.index+u[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=u.index+u[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=t.indexOf("@"),c>=0&&(s=t.match(this.re.email_fuzzy))!==null&&(i=s.index+s[1].length,o=s.index+s[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=o))),this.__index__>=0};_t.prototype.pretest=function(t){return this.re.pretest.test(t)};_t.prototype.testSchemaAt=function(t,n,u){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,u,this):0};_t.prototype.match=function(t){const n=[];let u=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Oi(this,u)),u=this.__last_index__);let s=u?t.slice(u):t;for(;this.test(s);)n.push(Oi(this,u)),s=s.slice(this.__last_index__),u+=this.__last_index__;return n.length?n:null};_t.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const u=this.testSchemaAt(t,n[2],n[0].length);return u?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+u,Oi(this,0)):null};_t.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(u,s,r){return u!==r[s-1]}).reverse(),Yr(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Yr(this),this)};_t.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};_t.prototype.onCompile=function(){};const uu=2147483647,Ut=36,Ao=1,Qu=26,Pg=38,Lg=700,o0=72,a0=128,l0="-",Ng=/^xn--/,$g=/[^\0-\x7F]/,Bg=/[\x2E\u3002\uFF0E\uFF61]/g,Ug={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ii=Ut-Ao,Ht=Math.floor,oi=String.fromCharCode;function gn(e){throw new RangeError(Ug[e])}function Hg(e,t){const n=[];let u=e.length;for(;u--;)n[u]=t(e[u]);return n}function c0(e,t){const n=e.split("@");let u="";n.length>1&&(u=n[0]+"@",e=n[1]),e=e.replace(Bg,".");const s=e.split("."),r=Hg(s,t).join(".");return u+r}function f0(e){const t=[];let n=0;const u=e.length;for(;n<u;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<u){const r=e.charCodeAt(n++);(r&64512)==56320?t.push(((s&1023)<<10)+(r&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const zg=e=>String.fromCodePoint(...e),jg=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ut},il=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},d0=function(e,t,n){let u=0;for(e=n?Ht(e/Lg):e>>1,e+=Ht(e/t);e>ii*Qu>>1;u+=Ut)e=Ht(e/ii);return Ht(u+(ii+1)*e/(e+Pg))},h0=function(e){const t=[],n=e.length;let u=0,s=a0,r=o0,i=e.lastIndexOf(l0);i<0&&(i=0);for(let o=0;o<i;++o)e.charCodeAt(o)>=128&&gn("not-basic"),t.push(e.charCodeAt(o));for(let o=i>0?i+1:0;o<n;){const a=u;for(let c=1,f=Ut;;f+=Ut){o>=n&&gn("invalid-input");const h=jg(e.charCodeAt(o++));h>=Ut&&gn("invalid-input"),h>Ht((uu-u)/c)&&gn("overflow"),u+=h*c;const d=f<=r?Ao:f>=r+Qu?Qu:f-r;if(h<d)break;const p=Ut-d;c>Ht(uu/p)&&gn("overflow"),c*=p}const l=t.length+1;r=d0(u-a,l,a==0),Ht(u/l)>uu-s&&gn("overflow"),s+=Ht(u/l),u%=l,t.splice(u++,0,s)}return String.fromCodePoint(...t)},p0=function(e){const t=[];e=f0(e);const n=e.length;let u=a0,s=0,r=o0;for(const a of e)a<128&&t.push(oi(a));const i=t.length;let o=i;for(i&&t.push(l0);o<n;){let a=uu;for(const c of e)c>=u&&c<a&&(a=c);const l=o+1;a-u>Ht((uu-s)/l)&&gn("overflow"),s+=(a-u)*l,u=a;for(const c of e)if(c<u&&++s>uu&&gn("overflow"),c===u){let f=s;for(let h=Ut;;h+=Ut){const d=h<=r?Ao:h>=r+Qu?Qu:h-r;if(f<d)break;const p=f-d,m=Ut-d;t.push(oi(il(d+p%m,0))),f=Ht(p/m)}t.push(oi(il(f,0))),r=d0(s,l,o===i),s=0,++o}++s,++u}return t.join("")},qg=function(e){return c0(e,function(t){return Ng.test(t)?h0(t.slice(4).toLowerCase()):t})},Wg=function(e){return c0(e,function(t){return $g.test(t)?"xn--"+p0(t):t})},m0={version:"2.3.1",ucs2:{decode:f0,encode:zg},decode:h0,encode:p0,toASCII:Wg,toUnicode:qg},Vg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Kg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Gg={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Jg={default:Vg,zero:Kg,commonmark:Gg},Xg=/^(vbscript|javascript|file|data):/,Zg=/^data:image\/(gif|png|jpeg|webp);/;function Yg(e){const t=e.trim().toLowerCase();return Xg.test(t)?Zg.test(t):!0}const g0=["http:","https:","mailto:"];function Qg(e){const t=bo(e,!0);if(t.hostname&&(!t.protocol||g0.indexOf(t.protocol)>=0))try{t.hostname=m0.toASCII(t.hostname)}catch{}return rr(go(t))}function eb(e){const t=bo(e,!0);if(t.hostname&&(!t.protocol||g0.indexOf(t.protocol)>=0))try{t.hostname=m0.toUnicode(t.hostname)}catch{}return iu(go(t),iu.defaultChars+"%")}function At(e,t){if(!(this instanceof At))return new At(e,t);t||xo(e)||(t=e||{},e="default"),this.inline=new ir,this.block=new vs,this.core=new wo,this.renderer=new lu,this.linkify=new _t,this.validateLink=Yg,this.normalizeLink=Qg,this.normalizeLinkText=eb,this.utils=nm,this.helpers=ys({},im),this.options={},this.configure(e),t&&this.set(t)}At.prototype.set=function(e){return ys(this.options,e),this};At.prototype.configure=function(e){const t=this;if(xo(e)){const n=e;if(e=Jg[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};At.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const u=e.filter(function(s){return n.indexOf(s)<0});if(u.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+u);return this};At.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const u=e.filter(function(s){return n.indexOf(s)<0});if(u.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+u);return this};At.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};At.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};At.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};At.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};At.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const tb={class:"flex flex-col min-w-0 bg-gray-900 h-full"},nb={class:"h-8 bg-gray-800 border-b border-gray-700 flex items-center px-3 text-xs text-gray-400 uppercase tracking-wider shrink-0"},ub=["innerHTML"],rb=au({__name:"MarkdownPreview",props:{content:{},currentLang:{}},setup(e){const t=qt(()=>ur[e.currentLang]),n=new At,u=qt(()=>{const s=n.render(e.content);return Wc.sanitize(s)});return(s,r)=>(Me(),Le("div",tb,[H("div",nb,Ce(t.value.preview),1),H("div",{class:"flex-1 overflow-auto p-8 prose prose-invert max-w-none prose-pre:bg-gray-800 prose-pre:border prose-pre:border-gray-700",innerHTML:u.value},null,8,ub)]))}});function ee(e,t,n,u,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}function v(e,t,n,u){if(n==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?u:n==="a"?u.call(e):u?u.value:t.get(e)}let b0=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return b0=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,u=>(+u^n()&15>>+u/4).toString(16))};function Pi(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Li=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class X extends Error{}class We extends X{constructor(t,n,u,s){super(`${We.makeMessage(t,n,u)}`),this.status=t,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const r=n;this.code=r?.code,this.param=r?.param,this.type=r?.type}static makeMessage(t,n,u){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):u;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,u,s){if(!t||!s)return new Es({message:u,cause:Li(n)});const r=n?.error;return t===400?new _0(t,r,u,s):t===401?new x0(t,r,u,s):t===403?new y0(t,r,u,s):t===404?new w0(t,r,u,s):t===409?new v0(t,r,u,s):t===422?new A0(t,r,u,s):t===429?new E0(t,r,u,s):t>=500?new C0(t,r,u,s):new We(t,r,u,s)}}class yt extends We{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Es extends We{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Eo extends Es{constructor({message:t}={}){super({message:t??"Request timed out."})}}class _0 extends We{}class x0 extends We{}class y0 extends We{}class w0 extends We{}class v0 extends We{}class A0 extends We{}class E0 extends We{}class C0 extends We{}class k0 extends X{constructor(){super("Could not parse response content as the length limit was reached")}}class S0 extends X{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Eu extends Error{constructor(t){super(t)}}const sb=/^[a-z][a-z0-9+.-]*:/i,ib=e=>sb.test(e);let ot=e=>(ot=Array.isArray,ot(e)),ol=ot;function D0(e){return typeof e!="object"?{}:e??{}}function ob(e){if(!e)return!0;for(const t in e)return!1;return!0}function ab(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ai(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}const lb=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new X(`${e} must be an integer`);if(t<0)throw new X(`${e} must be a positive integer`);return t},cb=e=>{try{return JSON.parse(e)}catch{return}},or=e=>new Promise(t=>setTimeout(t,e)),Gn="6.10.0",fb=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function db(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const hb=()=>{const e=db();if(e==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gn,"X-Stainless-OS":ll(Deno.build.os),"X-Stainless-Arch":al(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(e==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gn,"X-Stainless-OS":ll(globalThis.process.platform??"unknown"),"X-Stainless-Arch":al(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=pb();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pb(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const u=n.exec(navigator.userAgent);if(u){const s=u[1]||0,r=u[2]||0,i=u[3]||0;return{browser:t,version:`${s}.${r}.${i}`}}}return null}const al=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",ll=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let cl;const mb=()=>cl??(cl=hb());function gb(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function T0(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function F0(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return T0({start(){},async pull(n){const{done:u,value:s}=await t.next();u?n.close():n.enqueue(s)},async cancel(){await t.return?.()}})}function R0(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function bb(e){if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await e[Symbol.asyncIterator]().return?.();return}const t=e.getReader(),n=t.cancel();t.releaseLock(),await n}const _b=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),I0="RFC3986",M0=e=>String(e),fl={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:M0},xb="RFC1738";let Ni=(e,t)=>(Ni=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Ni(e,t));const Pt=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),li=1024,yb=(e,t,n,u,s)=>{if(e.length===0)return e;let r=e;if(typeof e=="symbol"?r=Symbol.prototype.toString.call(e):typeof e!="string"&&(r=String(e)),n==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<r.length;o+=li){const a=r.length>=li?r.slice(o,o+li):r,l=[];for(let c=0;c<a.length;++c){let f=a.charCodeAt(c);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===xb&&(f===40||f===41)){l[l.length]=a.charAt(c);continue}if(f<128){l[l.length]=Pt[f];continue}if(f<2048){l[l.length]=Pt[192|f>>6]+Pt[128|f&63];continue}if(f<55296||f>=57344){l[l.length]=Pt[224|f>>12]+Pt[128|f>>6&63]+Pt[128|f&63];continue}c+=1,f=65536+((f&1023)<<10|a.charCodeAt(c)&1023),l[l.length]=Pt[240|f>>18]+Pt[128|f>>12&63]+Pt[128|f>>6&63]+Pt[128|f&63]}i+=l.join("")}return i};function wb(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function dl(e,t){if(ot(e)){const n=[];for(let u=0;u<e.length;u+=1)n.push(t(e[u]));return n}return t(e)}const O0={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},P0=function(e,t){Array.prototype.push.apply(e,ot(t)?t:[t])};let hl;const Ie={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:yb,encodeValuesOnly:!1,format:I0,formatter:M0,indices:!1,serializeDate(e){return(hl??(hl=Function.prototype.call.bind(Date.prototype.toISOString)))(e)},skipNulls:!1,strictNullHandling:!1};function vb(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const ci={};function L0(e,t,n,u,s,r,i,o,a,l,c,f,h,d,p,m,w,A){let x=e,E=A,y=0,k=!1;for(;(E=E.get(ci))!==void 0&&!k;){const $=E.get(e);if(y+=1,typeof $<"u"){if($===y)throw new RangeError("Cyclic object value");k=!0}typeof E.get(ci)>"u"&&(y=0)}if(typeof l=="function"?x=l(t,x):x instanceof Date?x=h?.(x):n==="comma"&&ot(x)&&(x=dl(x,function($){return $ instanceof Date?h?.($):$})),x===null){if(r)return a&&!m?a(t,Ie.encoder,w,"key",d):t;x=""}if(vb(x)||wb(x)){if(a){const $=m?t:a(t,Ie.encoder,w,"key",d);return[p?.($)+"="+p?.(a(x,Ie.encoder,w,"value",d))]}return[p?.(t)+"="+p?.(String(x))]}const T=[];if(typeof x>"u")return T;let O;if(n==="comma"&&ot(x))m&&a&&(x=dl(x,a)),O=[{value:x.length>0?x.join(",")||null:void 0}];else if(ot(l))O=l;else{const $=Object.keys(x);O=c?$.sort(c):$}const N=o?String(t).replace(/\./g,"%2E"):String(t),F=u&&ot(x)&&x.length===1?N+"[]":N;if(s&&ot(x)&&x.length===0)return F+"[]";for(let $=0;$<O.length;++$){const z=O[$],K=typeof z=="object"&&typeof z.value<"u"?z.value:x[z];if(i&&K===null)continue;const Q=f&&o?z.replace(/\./g,"%2E"):z,me=ot(x)?typeof n=="function"?n(F,Q):F:F+(f?"."+Q:"["+Q+"]");A.set(e,y);const ce=new WeakMap;ce.set(ci,A),P0(T,L0(K,me,n,u,s,r,i,o,n==="comma"&&m&&ot(x)?null:a,l,c,f,h,d,p,m,w,ce))}return T}function Ab(e=Ie){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||Ie.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=I0;if(typeof e.format<"u"){if(!Ni(fl,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const u=fl[n];let s=Ie.filter;(typeof e.filter=="function"||ot(e.filter))&&(s=e.filter);let r;if(e.arrayFormat&&e.arrayFormat in O0?r=e.arrayFormat:"indices"in e?r=e.indices?"indices":"repeat":r=Ie.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:Ie.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ie.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ie.allowEmptyArrays,arrayFormat:r,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ie.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Ie.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ie.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Ie.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Ie.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ie.encodeValuesOnly,filter:s,format:n,formatter:u,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ie.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ie.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ie.strictNullHandling}}function Eb(e,t={}){let n=e;const u=Ab(t);let s,r;typeof u.filter=="function"?(r=u.filter,n=r("",n)):ot(u.filter)&&(r=u.filter,s=r);const i=[];if(typeof n!="object"||n===null)return"";const o=O0[u.arrayFormat],a=o==="comma"&&u.commaRoundTrip;s||(s=Object.keys(n)),u.sort&&s.sort(u.sort);const l=new WeakMap;for(let h=0;h<s.length;++h){const d=s[h];u.skipNulls&&n[d]===null||P0(i,L0(n[d],d,o,a,u.allowEmptyArrays,u.strictNullHandling,u.skipNulls,u.encodeDotInKeys,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,l))}const c=i.join(u.delimiter);let f=u.addQueryPrefix===!0?"?":"";return u.charsetSentinel&&(u.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),c.length>0?f+c:""}function Cb(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let u=0;for(const s of e)n.set(s,u),u+=s.length;return n}let pl;function Co(e){let t;return(pl??(t=new globalThis.TextEncoder,pl=t.encode.bind(t)))(e)}let ml;function gl(e){let t;return(ml??(t=new globalThis.TextDecoder,ml=t.decode.bind(t)))(e)}var dt,ht;class Cs{constructor(){dt.set(this,void 0),ht.set(this,void 0),ee(this,dt,new Uint8Array),ee(this,ht,null)}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Co(t):t;ee(this,dt,Cb([v(this,dt,"f"),n]));const u=[];let s;for(;(s=kb(v(this,dt,"f"),v(this,ht,"f")))!=null;){if(s.carriage&&v(this,ht,"f")==null){ee(this,ht,s.index);continue}if(v(this,ht,"f")!=null&&(s.index!==v(this,ht,"f")+1||s.carriage)){u.push(gl(v(this,dt,"f").subarray(0,v(this,ht,"f")-1))),ee(this,dt,v(this,dt,"f").subarray(v(this,ht,"f"))),ee(this,ht,null);continue}const r=v(this,ht,"f")!==null?s.preceding-1:s.preceding,i=gl(v(this,dt,"f").subarray(0,r));u.push(i),ee(this,dt,v(this,dt,"f").subarray(s.index)),ee(this,ht,null)}return u}flush(){return v(this,dt,"f").length?this.decode(`
`):[]}}dt=new WeakMap,ht=new WeakMap;Cs.NEWLINE_CHARS=new Set([`
`,"\r"]);Cs.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kb(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Sb(e){for(let u=0;u<e.length-1;u++){if(e[u]===10&&e[u+1]===10||e[u]===13&&e[u+1]===13)return u+2;if(e[u]===13&&e[u+1]===10&&u+3<e.length&&e[u+2]===13&&e[u+3]===10)return u+4}return-1}const Qr={off:0,error:200,warn:300,info:400,debug:500},bl=(e,t,n)=>{if(e){if(ab(Qr,e))return e;ze(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Qr))}`)}};function Cu(){}function yr(e,t,n){return!t||Qr[e]>Qr[n]?Cu:t[e].bind(t)}const Db={error:Cu,warn:Cu,info:Cu,debug:Cu};let _l=new WeakMap;function ze(e){const t=e.logger,n=e.logLevel??"off";if(!t)return Db;const u=_l.get(t);if(u&&u[0]===n)return u[1];const s={error:yr("error",t,n),warn:yr("warn",t,n),info:yr("info",t,n),debug:yr("debug",t,n)};return _l.set(t,[n,s]),s}const Tn=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var vu;class zt{constructor(t,n,u){this.iterator=t,vu.set(this,void 0),this.controller=n,ee(this,vu,u)}static fromSSEResponse(t,n,u){let s=!1;const r=u?ze(u):console;async function*i(){if(s)throw new X("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const a of Tb(t,n))if(!o){if(a.data.startsWith("[DONE]")){o=!0;continue}if(a.event===null||!a.event.startsWith("thread.")){let l;try{l=JSON.parse(a.data)}catch(c){throw r.error("Could not parse message into JSON:",a.data),r.error("From chunk:",a.raw),c}if(l&&l.error)throw new We(void 0,l.error,void 0,t.headers);yield l}else{let l;try{l=JSON.parse(a.data)}catch(c){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),c}if(a.event=="error")throw new We(void 0,l.error,l.message,void 0);yield{event:a.event,data:l}}}o=!0}catch(a){if(Pi(a))return;throw a}finally{o||n.abort()}}return new zt(i,n,u)}static fromReadableStream(t,n,u){let s=!1;async function*r(){const o=new Cs,a=R0(t);for await(const l of a)for(const c of o.decode(l))yield c;for(const l of o.flush())yield l}async function*i(){if(s)throw new X("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const a of r())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(Pi(a))return;throw a}finally{o||n.abort()}}return new zt(i,n,u)}[(vu=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const t=[],n=[],u=this.iterator(),s=r=>({next:()=>{if(r.length===0){const i=u.next();t.push(i),n.push(i)}return r.shift()}});return[new zt(()=>s(t),this.controller,v(this,vu,"f")),new zt(()=>s(n),this.controller,v(this,vu,"f"))]}toReadableStream(){const t=this;let n;return T0({async start(){n=t[Symbol.asyncIterator]()},async pull(u){try{const{value:s,done:r}=await n.next();if(r)return u.close();const i=Co(JSON.stringify(s)+`
`);u.enqueue(i)}catch(s){u.error(s)}},async cancel(){await n.return?.()}})}}async function*Tb(e,t){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new X("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new X("Attempted to iterate over a response with no body");const n=new Rb,u=new Cs,s=R0(e.body);for await(const r of Fb(s))for(const i of u.decode(r)){const o=n.decode(i);o&&(yield o)}for(const r of u.flush()){const i=n.decode(r);i&&(yield i)}}async function*Fb(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const u=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Co(n):n;let s=new Uint8Array(t.length+u.length);s.set(t),s.set(u,t.length),t=s;let r;for(;(r=Sb(t))!==-1;)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}class Rb{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,u,s]=Ib(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Ib(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function N0(e,t){const{response:n,requestLogID:u,retryOfRequestLogID:s,startTime:r}=t,i=await(async()=>{if(t.options.stream)return ze(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):zt.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const a=n.headers.get("content-type")?.split(";")[0]?.trim();if(a?.includes("application/json")||a?.endsWith("+json")){const f=await n.json();return $0(f,n)}return await n.text()})();return ze(e).debug(`[${u}] response parsed`,Tn({retryOfRequestLogID:s,url:n.url,status:n.status,body:i,durationMs:Date.now()-r})),i}function $0(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var ku;class ks extends Promise{constructor(t,n,u=N0){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=u,ku.set(this,void 0),ee(this,ku,t)}_thenUnwrap(t){return new ks(v(this,ku,"f"),this.responsePromise,async(n,u)=>$0(t(await this.parseResponse(n,u),u),u.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(v(this,ku,"f"),t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}ku=new WeakMap;var wr;class ko{constructor(t,n,u,s){wr.set(this,void 0),ee(this,wr,t),this.options=s,this.response=n,this.body=u}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const t=this.nextPageRequestOptions();if(!t)throw new X("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await v(this,wr,"f").requestAPIList(this.constructor,t)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(wr=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class Mb extends ks{constructor(t,n,u){super(t,n,async(s,r)=>new u(s,r.response,await N0(s,r),r.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}class Ss extends ko{constructor(t,n,u,s){super(t,n,u,s),this.data=u.data||[],this.object=u.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Te extends ko{constructor(t,n,u,s){super(t,n,u,s),this.data=u.data||[],this.has_more=u.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.getPaginatedItems(),n=t[t.length-1]?.id;return n?{...this.options,query:{...D0(this.options.query),after:n}}:null}}class es extends ko{constructor(t,n,u,s){super(t,n,u,s),this.data=u.data||[],this.has_more=u.has_more||!1,this.last_id=u.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.last_id;return t?{...this.options,query:{...D0(this.options.query),after:t}}:null}}const B0=()=>{if(typeof File>"u"){const{process:e}=globalThis,t=typeof e?.versions?.node=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function zu(e,t,n){return B0(),new File(e,t??"unknown_file",n)}function Mr(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const So=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",xl=async(e,t)=>$i(e.body)?{...e,body:await U0(e.body,t)}:e,Pn=async(e,t)=>({...e,body:await U0(e.body,t)}),yl=new WeakMap;function Ob(e){const t=typeof e=="function"?e:e.fetch,n=yl.get(t);if(n)return n;const u=(async()=>{try{const s="Response"in t?t.Response:(await t("data:,")).constructor,r=new FormData;return r.toString()!==await new s(r).text()}catch{return!0}})();return yl.set(t,u),u}const U0=async(e,t)=>{if(!await Ob(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(([u,s])=>Bi(n,u,s))),n},H0=e=>e instanceof Blob&&"name"in e,Pb=e=>typeof e=="object"&&e!==null&&(e instanceof Response||So(e)||H0(e)),$i=e=>{if(Pb(e))return!0;if(Array.isArray(e))return e.some($i);if(e&&typeof e=="object"){for(const t in e)if($i(e[t]))return!0}return!1},Bi=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(n instanceof Response)e.append(t,zu([await n.blob()],Mr(n)));else if(So(n))e.append(t,zu([await new Response(F0(n)).blob()],Mr(n)));else if(H0(n))e.append(t,n,Mr(n));else if(Array.isArray(n))await Promise.all(n.map(u=>Bi(e,t+"[]",u)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([u,s])=>Bi(e,`${t}[${u}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},z0=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Lb=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&z0(e),Nb=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function $b(e,t,n){if(B0(),e=await e,Lb(e))return e instanceof File?e:zu([await e.arrayBuffer()],e.name);if(Nb(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),zu(await Ui(s),t,n)}const u=await Ui(e);if(t||(t=Mr(e)),!n?.type){const s=u.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof s=="string"&&(n={...n,type:s})}return zu(u,t,n)}async function Ui(e){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(z0(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(So(e))for await(const n of e)t.push(...await Ui(n));else{const n=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${n?`; constructor: ${n}`:""}${Bb(e)}`)}return t}function Bb(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}class V{constructor(t){this._client=t}}function j0(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const wl=Object.freeze(Object.create(null)),Ub=(e=j0)=>function(n,...u){if(n.length===1)return n[0];let s=!1;const r=[],i=n.reduce((c,f,h)=>{/[?#]/.test(f)&&(s=!0);const d=u[h];let p=(s?encodeURIComponent:e)(""+d);return h!==u.length&&(d==null||typeof d=="object"&&d.toString===Object.getPrototypeOf(Object.getPrototypeOf(d.hasOwnProperty??wl)??wl)?.toString)&&(p=d+"",r.push({start:c.length+f.length,length:p.length,error:`Value of type ${Object.prototype.toString.call(d).slice(8,-1)} is not a valid path parameter`})),c+f+(h===u.length?"":p)},""),o=i.split(/[?#]/,1)[0],a=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let l;for(;(l=a.exec(o))!==null;)r.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(r.sort((c,f)=>c.start-f.start),r.length>0){let c=0;const f=r.reduce((h,d)=>{const p=" ".repeat(d.start-c),m="^".repeat(d.length);return c=d.start+d.length,h+p+m},"");throw new X(`Path parameters result in path with invalid segments:
${r.map(h=>h.error).join(`
`)}
${i}
${f}`)}return i},M=Ub(j0);let q0=class extends V{list(t,n={},u){return this._client.getAPIList(M`/chat/completions/${t}/messages`,Te,{query:n,...u})}};function ts(e){return e!==void 0&&"function"in e&&e.function!==void 0}function Do(e){return e?.$brand==="auto-parseable-response-format"}function ar(e){return e?.$brand==="auto-parseable-tool"}function Hb(e,t){return!t||!W0(t)?{...e,choices:e.choices.map(n=>(V0(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:To(e,t)}function To(e,t){const n=e.choices.map(u=>{if(u.finish_reason==="length")throw new k0;if(u.finish_reason==="content_filter")throw new S0;return V0(u.message.tool_calls),{...u,message:{...u.message,...u.message.tool_calls?{tool_calls:u.message.tool_calls?.map(s=>jb(t,s))??void 0}:void 0,parsed:u.message.content&&!u.message.refusal?zb(t,u.message.content):null}}});return{...e,choices:n}}function zb(e,t){return e.response_format?.type!=="json_schema"?null:e.response_format?.type==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function jb(e,t){const n=e.tools?.find(u=>ts(u)&&u.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:ar(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}function qb(e,t){if(!e||!("tools"in e)||!e.tools)return!1;const n=e.tools?.find(u=>ts(u)&&u.function?.name===t.function.name);return ts(n)&&(ar(n)||n?.function.strict||!1)}function W0(e){return Do(e.response_format)?!0:e.tools?.some(t=>ar(t)||t.type==="function"&&t.function.strict===!0)??!1}function V0(e){for(const t of e||[])if(t.type!=="function")throw new X(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function Wb(e){for(const t of e??[]){if(t.type!=="function")throw new X(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new X(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const ns=e=>e?.role==="assistant",K0=e=>e?.role==="tool";var Hi,Or,Pr,Su,Du,Lr,Tu,Qt,Fu,us,rs,Jn,G0;class Fo{constructor(){Hi.add(this),this.controller=new AbortController,Or.set(this,void 0),Pr.set(this,()=>{}),Su.set(this,()=>{}),Du.set(this,void 0),Lr.set(this,()=>{}),Tu.set(this,()=>{}),Qt.set(this,{}),Fu.set(this,!1),us.set(this,!1),rs.set(this,!1),Jn.set(this,!1),ee(this,Or,new Promise((t,n)=>{ee(this,Pr,t,"f"),ee(this,Su,n,"f")})),ee(this,Du,new Promise((t,n)=>{ee(this,Lr,t,"f"),ee(this,Tu,n,"f")})),v(this,Or,"f").catch(()=>{}),v(this,Du,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},v(this,Hi,"m",G0).bind(this))},0)}_connected(){this.ended||(v(this,Pr,"f").call(this),this._emit("connect"))}get ended(){return v(this,Fu,"f")}get errored(){return v(this,us,"f")}get aborted(){return v(this,rs,"f")}abort(){this.controller.abort()}on(t,n){return(v(this,Qt,"f")[t]||(v(this,Qt,"f")[t]=[])).push({listener:n}),this}off(t,n){const u=v(this,Qt,"f")[t];if(!u)return this;const s=u.findIndex(r=>r.listener===n);return s>=0&&u.splice(s,1),this}once(t,n){return(v(this,Qt,"f")[t]||(v(this,Qt,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,u)=>{ee(this,Jn,!0),t!=="error"&&this.once("error",u),this.once(t,n)})}async done(){ee(this,Jn,!0),await v(this,Du,"f")}_emit(t,...n){if(v(this,Fu,"f"))return;t==="end"&&(ee(this,Fu,!0),v(this,Lr,"f").call(this));const u=v(this,Qt,"f")[t];if(u&&(v(this,Qt,"f")[t]=u.filter(s=>!s.once),u.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!v(this,Jn,"f")&&!u?.length&&Promise.reject(s),v(this,Su,"f").call(this,s),v(this,Tu,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!v(this,Jn,"f")&&!u?.length&&Promise.reject(s),v(this,Su,"f").call(this,s),v(this,Tu,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Or=new WeakMap,Pr=new WeakMap,Su=new WeakMap,Du=new WeakMap,Lr=new WeakMap,Tu=new WeakMap,Qt=new WeakMap,Fu=new WeakMap,us=new WeakMap,rs=new WeakMap,Jn=new WeakMap,Hi=new WeakSet,G0=function(t){if(ee(this,us,!0),t instanceof Error&&t.name==="AbortError"&&(t=new yt),t instanceof yt)return ee(this,rs,!0),this._emit("abort",t);if(t instanceof X)return this._emit("error",t);if(t instanceof Error){const n=new X(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new X(String(t)))};function Vb(e){return typeof e.parse=="function"}var Ye,zi,ss,ji,qi,Wi,J0,X0;const Kb=10;class Z0 extends Fo{constructor(){super(...arguments),Ye.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=t.choices[0]?.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),K0(t)&&t.content)this._emit("functionToolCallResult",t.content);else if(ns(t)&&t.tool_calls)for(const u of t.tool_calls)u.type==="function"&&this._emit("functionToolCall",u.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new X("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),v(this,Ye,"m",zi).call(this)}async finalMessage(){return await this.done(),v(this,Ye,"m",ss).call(this)}async finalFunctionToolCall(){return await this.done(),v(this,Ye,"m",ji).call(this)}async finalFunctionToolCallResult(){return await this.done(),v(this,Ye,"m",qi).call(this)}async totalUsage(){return await this.done(),v(this,Ye,"m",Wi).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=v(this,Ye,"m",ss).call(this);n&&this._emit("finalMessage",n);const u=v(this,Ye,"m",zi).call(this);u&&this._emit("finalContent",u);const s=v(this,Ye,"m",ji).call(this);s&&this._emit("finalFunctionToolCall",s);const r=v(this,Ye,"m",qi).call(this);r!=null&&this._emit("finalFunctionToolCallResult",r),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",v(this,Ye,"m",Wi).call(this))}async _createChatCompletion(t,n,u){const s=u?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),v(this,Ye,"m",J0).call(this,n);const r=await t.chat.completions.create({...n,stream:!1},{...u,signal:this.controller.signal});return this._connected(),this._addChatCompletion(To(r,n))}async _runChatCompletion(t,n,u){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(t,n,u)}async _runTools(t,n,u){const s="tool",{tool_choice:r="auto",stream:i,...o}=n,a=typeof r!="string"&&r.type==="function"&&r?.function?.name,{maxChatCompletions:l=Kb}=u||{},c=n.tools.map(d=>{if(ar(d)){if(!d.$callback)throw new X("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:d.$callback,name:d.function.name,description:d.function.description||"",parameters:d.function.parameters,parse:d.$parseRaw,strict:!0}}}return d}),f={};for(const d of c)d.type==="function"&&(f[d.function.name||d.function.function.name]=d.function);const h="tools"in n?c.map(d=>d.type==="function"?{type:"function",function:{name:d.function.name||d.function.function.name,parameters:d.function.parameters,description:d.function.description,strict:d.function.strict}}:d):void 0;for(const d of n.messages)this._addMessage(d,!1);for(let d=0;d<l;++d){const m=(await this._createChatCompletion(t,{...o,tool_choice:r,tools:h,messages:[...this.messages]},u)).choices[0]?.message;if(!m)throw new X("missing message in ChatCompletion response");if(!m.tool_calls?.length)return;for(const w of m.tool_calls){if(w.type!=="function")continue;const A=w.id,{name:x,arguments:E}=w.function,y=f[x];if(y){if(a&&a!==x){const N=`Invalid tool_call: ${JSON.stringify(x)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:s,tool_call_id:A,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(x)}. Available options are: ${Object.keys(f).map(F=>JSON.stringify(F)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:A,content:N});continue}let k;try{k=Vb(y)?await y.parse(E):E}catch(N){const F=N instanceof Error?N.message:String(N);this._addMessage({role:s,tool_call_id:A,content:F});continue}const T=await y.function(k,this),O=v(this,Ye,"m",X0).call(this,T);if(this._addMessage({role:s,tool_call_id:A,content:O}),a)return}}}}Ye=new WeakSet,zi=function(){return v(this,Ye,"m",ss).call(this).content??null},ss=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(ns(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new X("stream ended without producing a ChatCompletionMessage with role=assistant")},ji=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(ns(n)&&n?.tool_calls?.length)return n.tool_calls.filter(u=>u.type==="function").at(-1)?.function}},qi=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(K0(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(u=>u.role==="assistant"&&u.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},Wi=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},J0=function(t){if(t.n!=null&&t.n>1)throw new X("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},X0=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Ro extends Z0{static runTools(t,n,u){const s=new Ro,r={...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,r)),s}_addMessage(t,n=!0){super._addMessage(t,n),ns(t)&&t.content&&this._emit("content",t.content)}}const Y0=1,Q0=2,ef=4,tf=8,nf=16,uf=32,rf=64,sf=128,of=256,af=sf|of,lf=nf|uf|af|rf,cf=Y0|Q0|lf,ff=ef|tf,Gb=cf|ff,Pe={STR:Y0,NUM:Q0,ARR:ef,OBJ:tf,NULL:nf,BOOL:uf,NAN:rf,INFINITY:sf,MINUS_INFINITY:of,INF:af,SPECIAL:lf,ATOM:cf,COLLECTION:ff,ALL:Gb};class Jb extends Error{}class Xb extends Error{}function Zb(e,t=Pe.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return Yb(e.trim(),t)}const Yb=(e,t)=>{const n=e.length;let u=0;const s=h=>{throw new Jb(`${h} at position ${u}`)},r=h=>{throw new Xb(`${h} at position ${u}`)},i=()=>(f(),u>=n&&s("Unexpected end of input"),e[u]==='"'?o():e[u]==="{"?a():e[u]==="["?l():e.substring(u,u+4)==="null"||Pe.NULL&t&&n-u<4&&"null".startsWith(e.substring(u))?(u+=4,null):e.substring(u,u+4)==="true"||Pe.BOOL&t&&n-u<4&&"true".startsWith(e.substring(u))?(u+=4,!0):e.substring(u,u+5)==="false"||Pe.BOOL&t&&n-u<5&&"false".startsWith(e.substring(u))?(u+=5,!1):e.substring(u,u+8)==="Infinity"||Pe.INFINITY&t&&n-u<8&&"Infinity".startsWith(e.substring(u))?(u+=8,1/0):e.substring(u,u+9)==="-Infinity"||Pe.MINUS_INFINITY&t&&1<n-u&&n-u<9&&"-Infinity".startsWith(e.substring(u))?(u+=9,-1/0):e.substring(u,u+3)==="NaN"||Pe.NAN&t&&n-u<3&&"NaN".startsWith(e.substring(u))?(u+=3,NaN):c()),o=()=>{const h=u;let d=!1;for(u++;u<n&&(e[u]!=='"'||d&&e[u-1]==="\\");)d=e[u]==="\\"?!d:!1,u++;if(e.charAt(u)=='"')try{return JSON.parse(e.substring(h,++u-Number(d)))}catch(p){r(String(p))}else if(Pe.STR&t)try{return JSON.parse(e.substring(h,u-Number(d))+'"')}catch{return JSON.parse(e.substring(h,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},a=()=>{u++,f();const h={};try{for(;e[u]!=="}";){if(f(),u>=n&&Pe.OBJ&t)return h;const d=o();f(),u++;try{const p=i();Object.defineProperty(h,d,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(Pe.OBJ&t)return h;throw p}f(),e[u]===","&&u++}}catch{if(Pe.OBJ&t)return h;s("Expected '}' at end of object")}return u++,h},l=()=>{u++;const h=[];try{for(;e[u]!=="]";)h.push(i()),f(),e[u]===","&&u++}catch{if(Pe.ARR&t)return h;s("Expected ']' at end of array")}return u++,h},c=()=>{if(u===0){e==="-"&&Pe.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(d){if(Pe.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}r(String(d))}}const h=u;for(e[u]==="-"&&u++;e[u]&&!",]}".includes(e[u]);)u++;u==n&&!(Pe.NUM&t)&&s("Unterminated number literal");try{return JSON.parse(e.substring(h,u))}catch{e.substring(h,u)==="-"&&Pe.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(h,e.lastIndexOf("e")))}catch(p){r(String(p))}}},f=()=>{for(;u<n&&` 
\r	`.includes(e[u]);)u++};return i()},vl=e=>Zb(e,Pe.ALL^Pe.NUM);var Re,Yt,zn,fn,fi,vr,di,hi,pi,Ar,mi,Al;class er extends Z0{constructor(t){super(),Re.add(this),Yt.set(this,void 0),zn.set(this,void 0),fn.set(this,void 0),ee(this,Yt,t),ee(this,zn,[])}get currentChatCompletionSnapshot(){return v(this,fn,"f")}static fromReadableStream(t){const n=new er(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,u){const s=new er(n);return s._run(()=>s._runChatCompletion(t,{...n,stream:!0},{...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(t,n,u){super._createChatCompletion;const s=u?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),v(this,Re,"m",fi).call(this);const r=await t.chat.completions.create({...n,stream:!0},{...u,signal:this.controller.signal});this._connected();for await(const i of r)v(this,Re,"m",di).call(this,i);if(r.controller.signal?.aborted)throw new yt;return this._addChatCompletion(v(this,Re,"m",Ar).call(this))}async _fromReadableStream(t,n){const u=n?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort())),v(this,Re,"m",fi).call(this),this._connected();const s=zt.fromReadableStream(t,this.controller);let r;for await(const i of s)r&&r!==i.id&&this._addChatCompletion(v(this,Re,"m",Ar).call(this)),v(this,Re,"m",di).call(this,i),r=i.id;if(s.controller.signal?.aborted)throw new yt;return this._addChatCompletion(v(this,Re,"m",Ar).call(this))}[(Yt=new WeakMap,zn=new WeakMap,fn=new WeakMap,Re=new WeakSet,fi=function(){this.ended||ee(this,fn,void 0)},vr=function(n){let u=v(this,zn,"f")[n.index];return u||(u={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},v(this,zn,"f")[n.index]=u,u)},di=function(n){if(this.ended)return;const u=v(this,Re,"m",Al).call(this,n);this._emit("chunk",n,u);for(const s of n.choices){const r=u.choices[s.index];s.delta.content!=null&&r.message?.role==="assistant"&&r.message?.content&&(this._emit("content",s.delta.content,r.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:r.message.content,parsed:r.message.parsed})),s.delta.refusal!=null&&r.message?.role==="assistant"&&r.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:r.message.refusal}),s.logprobs?.content!=null&&r.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:r.logprobs?.content??[]}),s.logprobs?.refusal!=null&&r.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:r.logprobs?.refusal??[]});const i=v(this,Re,"m",vr).call(this,r);r.finish_reason&&(v(this,Re,"m",pi).call(this,r),i.current_tool_call_index!=null&&v(this,Re,"m",hi).call(this,r,i.current_tool_call_index));for(const o of s.delta.tool_calls??[])i.current_tool_call_index!==o.index&&(v(this,Re,"m",pi).call(this,r),i.current_tool_call_index!=null&&v(this,Re,"m",hi).call(this,r,i.current_tool_call_index)),i.current_tool_call_index=o.index;for(const o of s.delta.tool_calls??[]){const a=r.message.tool_calls?.[o.index];a?.type&&(a?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:a.function?.name,index:o.index,arguments:a.function.arguments,parsed_arguments:a.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(a?.type,void 0))}}},hi=function(n,u){if(v(this,Re,"m",vr).call(this,n).done_tool_calls.has(u))return;const r=n.message.tool_calls?.[u];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if(r.type==="function"){const i=v(this,Yt,"f")?.tools?.find(o=>ts(o)&&o.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:u,arguments:r.function.arguments,parsed_arguments:ar(i)?i.$parseRaw(r.function.arguments):i?.function.strict?JSON.parse(r.function.arguments):null})}else r.type},pi=function(n){const u=v(this,Re,"m",vr).call(this,n);if(n.message.content&&!u.content_done){u.content_done=!0;const s=v(this,Re,"m",mi).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!u.refusal_done&&(u.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!u.logprobs_content_done&&(u.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!u.logprobs_refusal_done&&(u.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Ar=function(){if(this.ended)throw new X("stream has ended, this shouldn't happen");const n=v(this,fn,"f");if(!n)throw new X("request ended without sending any chunks");return ee(this,fn,void 0),ee(this,zn,[]),Qb(n,v(this,Yt,"f"))},mi=function(){const n=v(this,Yt,"f")?.response_format;return Do(n)?n:null},Al=function(n){var u,s,r,i;let o=v(this,fn,"f");const{choices:a,...l}=n;o?Object.assign(o,l):o=ee(this,fn,{...l,choices:[]});for(const{delta:c,finish_reason:f,index:h,logprobs:d=null,...p}of n.choices){let m=o.choices[h];if(m||(m=o.choices[h]={finish_reason:f,index:h,message:{},logprobs:d,...p}),d)if(!m.logprobs)m.logprobs=Object.assign({},d);else{const{content:T,refusal:O,...N}=d;Object.assign(m.logprobs,N),T&&((u=m.logprobs).content??(u.content=[]),m.logprobs.content.push(...T)),O&&((s=m.logprobs).refusal??(s.refusal=[]),m.logprobs.refusal.push(...O))}if(f&&(m.finish_reason=f,v(this,Yt,"f")&&W0(v(this,Yt,"f")))){if(f==="length")throw new k0;if(f==="content_filter")throw new S0}if(Object.assign(m,p),!c)continue;const{content:w,refusal:A,function_call:x,role:E,tool_calls:y,...k}=c;if(Object.assign(m.message,k),A&&(m.message.refusal=(m.message.refusal||"")+A),E&&(m.message.role=E),x&&(m.message.function_call?(x.name&&(m.message.function_call.name=x.name),x.arguments&&((r=m.message.function_call).arguments??(r.arguments=""),m.message.function_call.arguments+=x.arguments)):m.message.function_call=x),w&&(m.message.content=(m.message.content||"")+w,!m.message.refusal&&v(this,Re,"m",mi).call(this)&&(m.message.parsed=vl(m.message.content))),y){m.message.tool_calls||(m.message.tool_calls=[]);for(const{index:T,id:O,type:N,function:F,...$}of y){const z=(i=m.message.tool_calls)[T]??(i[T]={});Object.assign(z,$),O&&(z.id=O),N&&(z.type=N),F&&(z.function??(z.function={name:F.name??"",arguments:""})),F?.name&&(z.function.name=F.name),F?.arguments&&(z.function.arguments+=F.arguments,qb(v(this,Yt,"f"),z)&&(z.function.parsed_arguments=vl(z.function.arguments)))}}}return o},Symbol.asyncIterator)](){const t=[],n=[];let u=!1;return this.on("chunk",s=>{const r=n.shift();r?r.resolve(s):t.push(s)}),this.on("end",()=>{u=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),this.on("error",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((r,i)=>n.push({resolve:r,reject:i})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new zt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Qb(e,t){const{id:n,choices:u,created:s,model:r,system_fingerprint:i,...o}=e,a={...o,id:n,choices:u.map(({message:l,finish_reason:c,index:f,logprobs:h,...d})=>{if(!c)throw new X(`missing finish_reason for choice ${f}`);const{content:p=null,function_call:m,tool_calls:w,...A}=l,x=l.role;if(!x)throw new X(`missing role for choice ${f}`);if(m){const{arguments:E,name:y}=m;if(E==null)throw new X(`missing function_call.arguments for choice ${f}`);if(!y)throw new X(`missing function_call.name for choice ${f}`);return{...d,message:{content:p,function_call:{arguments:E,name:y},role:x,refusal:l.refusal??null},finish_reason:c,index:f,logprobs:h}}return w?{...d,index:f,finish_reason:c,logprobs:h,message:{...A,role:x,content:p,refusal:l.refusal??null,tool_calls:w.map((E,y)=>{const{function:k,type:T,id:O,...N}=E,{arguments:F,name:$,...z}=k||{};if(O==null)throw new X(`missing choices[${f}].tool_calls[${y}].id
${Er(e)}`);if(T==null)throw new X(`missing choices[${f}].tool_calls[${y}].type
${Er(e)}`);if($==null)throw new X(`missing choices[${f}].tool_calls[${y}].function.name
${Er(e)}`);if(F==null)throw new X(`missing choices[${f}].tool_calls[${y}].function.arguments
${Er(e)}`);return{...N,id:O,type:T,function:{...z,name:$,arguments:F}}})}}:{...d,message:{...A,content:p,role:x,refusal:l.refusal??null},finish_reason:c,index:f,logprobs:h}}),created:s,model:r,object:"chat.completion",...i?{system_fingerprint:i}:{}};return Hb(a,t)}function Er(e){return JSON.stringify(e)}class is extends er{static fromReadableStream(t){const n=new is(null);return n._run(()=>n._fromReadableStream(t)),n}static runTools(t,n,u){const s=new is(n),r={...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,r)),s}}let Io=class extends V{constructor(){super(...arguments),this.messages=new q0(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(M`/chat/completions/${t}`,n)}update(t,n,u){return this._client.post(M`/chat/completions/${t}`,{body:n,...u})}list(t={},n){return this._client.getAPIList("/chat/completions",Te,{query:t,...n})}delete(t,n){return this._client.delete(M`/chat/completions/${t}`,n)}parse(t,n){return Wb(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(u=>To(u,t))}runTools(t,n){return t.stream?is.runTools(this._client,t,n):Ro.runTools(this._client,t,n)}stream(t,n){return er.createChatCompletion(this._client,t,n)}};Io.Messages=q0;class Mo extends V{constructor(){super(...arguments),this.completions=new Io(this._client)}}Mo.Completions=Io;const df=Symbol("brand.privateNullableHeaders");function*e2(e){if(!e)return;if(df in e){const{values:u,nulls:s}=e;yield*u.entries();for(const r of s)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():ol(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let u of n){const s=u[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const r=ol(u[1])?u[1]:[u[1]];let i=!1;for(const o of r)o!==void 0&&(t&&!i&&(i=!0,yield[s,null]),yield[s,o])}}const q=e=>{const t=new Headers,n=new Set;for(const u of e){const s=new Set;for(const[r,i]of e2(u)){const o=r.toLowerCase();s.has(o)||(t.delete(r),s.add(o)),i===null?(t.delete(r),n.add(o)):(t.append(r,i),n.delete(o))}}return{[df]:!0,values:t,nulls:n}};class hf extends V{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:q([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class pf extends V{create(t,n){return this._client.post("/audio/transcriptions",Pn({body:t,...n,stream:t.stream??!1,__metadata:{model:t.model}},this._client))}}class mf extends V{create(t,n){return this._client.post("/audio/translations",Pn({body:t,...n,__metadata:{model:t.model}},this._client))}}class lr extends V{constructor(){super(...arguments),this.transcriptions=new pf(this._client),this.translations=new mf(this._client),this.speech=new hf(this._client)}}lr.Transcriptions=pf;lr.Translations=mf;lr.Speech=hf;class gf extends V{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(M`/batches/${t}`,n)}list(t={},n){return this._client.getAPIList("/batches",Te,{query:t,...n})}cancel(t,n){return this._client.post(M`/batches/${t}/cancel`,n)}}class bf extends V{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(M`/assistants/${t}`,{...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,u){return this._client.post(M`/assistants/${t}`,{body:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t={},n){return this._client.getAPIList("/assistants",Te,{query:t,...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(M`/assistants/${t}`,{...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let _f=class extends V{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class xf extends V{create(t,n){return this._client.post("/realtime/transcription_sessions",{body:t,...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Ds=class extends V{constructor(){super(...arguments),this.sessions=new _f(this._client),this.transcriptionSessions=new xf(this._client)}};Ds.Sessions=_f;Ds.TranscriptionSessions=xf;class yf extends V{create(t,n){return this._client.post("/chatkit/sessions",{body:t,...n,headers:q([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(t,n){return this._client.post(M`/chatkit/sessions/${t}/cancel`,{...n,headers:q([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let wf=class extends V{retrieve(t,n){return this._client.get(M`/chatkit/threads/${t}`,{...n,headers:q([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(t={},n){return this._client.getAPIList("/chatkit/threads",es,{query:t,...n,headers:q([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(t,n){return this._client.delete(M`/chatkit/threads/${t}`,{...n,headers:q([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(t,n={},u){return this._client.getAPIList(M`/chatkit/threads/${t}/items`,es,{query:n,...u,headers:q([{"OpenAI-Beta":"chatkit_beta=v1"},u?.headers])})}};class Ts extends V{constructor(){super(...arguments),this.sessions=new yf(this._client),this.threads=new wf(this._client)}}Ts.Sessions=yf;Ts.Threads=wf;class vf extends V{create(t,n,u){return this._client.post(M`/threads/${t}/messages`,{body:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}retrieve(t,n,u){const{thread_id:s}=n;return this._client.get(M`/threads/${s}/messages/${t}`,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}update(t,n,u){const{thread_id:s,...r}=n;return this._client.post(M`/threads/${s}/messages/${t}`,{body:r,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t,n={},u){return this._client.getAPIList(M`/threads/${t}/messages`,Te,{query:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}delete(t,n,u){const{thread_id:s}=n;return this._client.delete(M`/threads/${s}/messages/${t}`,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}}class Af extends V{retrieve(t,n,u){const{thread_id:s,run_id:r,...i}=n;return this._client.get(M`/threads/${s}/runs/${r}/steps/${t}`,{query:i,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t,n,u){const{thread_id:s,...r}=n;return this._client.getAPIList(M`/threads/${s}/runs/${t}/steps`,Te,{query:r,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}}const t2=e=>{if(typeof Buffer<"u"){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{const t=atob(e),n=t.length,u=new Uint8Array(n);for(let s=0;s<n;s++)u[s]=t.charCodeAt(s);return Array.from(new Float32Array(u.buffer))}};var n2={};const jn=e=>{if(typeof globalThis.process<"u")return n2?.[e]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(e)?.trim()};var je,Rn,Vi,$t,Nr,kt,In,Zn,Fn,os,mt,$r,Br,ju,Ru,Iu,El,Cl,kl,Sl,Dl,Tl,Fl;class qu extends Fo{constructor(){super(...arguments),je.add(this),Vi.set(this,[]),$t.set(this,{}),Nr.set(this,{}),kt.set(this,void 0),In.set(this,void 0),Zn.set(this,void 0),Fn.set(this,void 0),os.set(this,void 0),mt.set(this,void 0),$r.set(this,void 0),Br.set(this,void 0),ju.set(this,void 0)}[(Vi=new WeakMap,$t=new WeakMap,Nr=new WeakMap,kt=new WeakMap,In=new WeakMap,Zn=new WeakMap,Fn=new WeakMap,os=new WeakMap,mt=new WeakMap,$r=new WeakMap,Br=new WeakMap,ju=new WeakMap,je=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let u=!1;return this.on("event",s=>{const r=n.shift();r?r.resolve(s):t.push(s)}),this.on("end",()=>{u=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),this.on("error",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((r,i)=>n.push({resolve:r,reject:i})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new Rn;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){const u=n?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=zt.fromReadableStream(t,this.controller);for await(const r of s)v(this,je,"m",Ru).call(this,r);if(s.controller.signal?.aborted)throw new yt;return this._addRun(v(this,je,"m",Iu).call(this))}toReadableStream(){return new zt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,u,s){const r=new Rn;return r._run(()=>r._runToolAssistantStream(t,n,u,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createToolAssistantStream(t,n,u,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...u,stream:!0},o=await t.submitToolOutputs(n,i,{...s,signal:this.controller.signal});this._connected();for await(const a of o)v(this,je,"m",Ru).call(this,a);if(o.controller.signal?.aborted)throw new yt;return this._addRun(v(this,je,"m",Iu).call(this))}static createThreadAssistantStream(t,n,u){const s=new Rn;return s._run(()=>s._threadAssistantStream(t,n,{...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(t,n,u,s){const r=new Rn;return r._run(()=>r._runAssistantStream(t,n,u,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}currentEvent(){return v(this,$r,"f")}currentRun(){return v(this,Br,"f")}currentMessageSnapshot(){return v(this,kt,"f")}currentRunStepSnapshot(){return v(this,ju,"f")}async finalRunSteps(){return await this.done(),Object.values(v(this,$t,"f"))}async finalMessages(){return await this.done(),Object.values(v(this,Nr,"f"))}async finalRun(){if(await this.done(),!v(this,In,"f"))throw Error("Final run was not received.");return v(this,In,"f")}async _createThreadAssistantStream(t,n,u){const s=u?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const r={...n,stream:!0},i=await t.createAndRun(r,{...u,signal:this.controller.signal});this._connected();for await(const o of i)v(this,je,"m",Ru).call(this,o);if(i.controller.signal?.aborted)throw new yt;return this._addRun(v(this,je,"m",Iu).call(this))}async _createAssistantStream(t,n,u,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...u,stream:!0},o=await t.create(n,i,{...s,signal:this.controller.signal});this._connected();for await(const a of o)v(this,je,"m",Ru).call(this,a);if(o.controller.signal?.aborted)throw new yt;return this._addRun(v(this,je,"m",Iu).call(this))}static accumulateDelta(t,n){for(const[u,s]of Object.entries(n)){if(!t.hasOwnProperty(u)){t[u]=s;continue}let r=t[u];if(r==null){t[u]=s;continue}if(u==="index"||u==="type"){t[u]=s;continue}if(typeof r=="string"&&typeof s=="string")r+=s;else if(typeof r=="number"&&typeof s=="number")r+=s;else if(ai(r)&&ai(s))r=this.accumulateDelta(r,s);else if(Array.isArray(r)&&Array.isArray(s)){if(r.every(i=>typeof i=="string"||typeof i=="number")){r.push(...s);continue}for(const i of s){if(!ai(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const a=r[o];a==null?r.push(i):r[o]=this.accumulateDelta(a,i)}continue}else throw Error(`Unhandled record type: ${u}, deltaValue: ${s}, accValue: ${r}`);t[u]=r}return t}_addRun(t){return t}async _threadAssistantStream(t,n,u){return await this._createThreadAssistantStream(n,t,u)}async _runAssistantStream(t,n,u,s){return await this._createAssistantStream(n,t,u,s)}async _runToolAssistantStream(t,n,u,s){return await this._createToolAssistantStream(n,t,u,s)}}Rn=qu,Ru=function(t){if(!this.ended)switch(ee(this,$r,t),v(this,je,"m",kl).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":v(this,je,"m",Fl).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":v(this,je,"m",Cl).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":v(this,je,"m",El).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Iu=function(){if(this.ended)throw new X("stream has ended, this shouldn't happen");if(!v(this,In,"f"))throw Error("Final run has not been received");return v(this,In,"f")},El=function(t){const[n,u]=v(this,je,"m",Dl).call(this,t,v(this,kt,"f"));ee(this,kt,n),v(this,Nr,"f")[n.id]=n;for(const s of u){const r=n.content[s.index];r?.type=="text"&&this._emit("textCreated",r.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const s of t.data.delta.content){if(s.type=="text"&&s.text){let r=s.text,i=n.content[s.index];if(i&&i.type=="text")this._emit("textDelta",r,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=v(this,Zn,"f")){if(v(this,Fn,"f"))switch(v(this,Fn,"f").type){case"text":this._emit("textDone",v(this,Fn,"f").text,v(this,kt,"f"));break;case"image_file":this._emit("imageFileDone",v(this,Fn,"f").image_file,v(this,kt,"f"));break}ee(this,Zn,s.index)}ee(this,Fn,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(v(this,Zn,"f")!==void 0){const s=t.data.content[v(this,Zn,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,v(this,kt,"f"));break;case"text":this._emit("textDone",s.text,v(this,kt,"f"));break}}v(this,kt,"f")&&this._emit("messageDone",t.data),ee(this,kt,void 0)}},Cl=function(t){const n=v(this,je,"m",Sl).call(this,t);switch(ee(this,ju,n),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const u=t.data.delta;if(u.step_details&&u.step_details.type=="tool_calls"&&u.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const r of u.step_details.tool_calls)r.index==v(this,os,"f")?this._emit("toolCallDelta",r,n.step_details.tool_calls[r.index]):(v(this,mt,"f")&&this._emit("toolCallDone",v(this,mt,"f")),ee(this,os,r.index),ee(this,mt,n.step_details.tool_calls[r.index]),v(this,mt,"f")&&this._emit("toolCallCreated",v(this,mt,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ee(this,ju,void 0),t.data.step_details.type=="tool_calls"&&v(this,mt,"f")&&(this._emit("toolCallDone",v(this,mt,"f")),ee(this,mt,void 0)),this._emit("runStepDone",t.data,n);break}},kl=function(t){v(this,Vi,"f").push(t),this._emit("event",t)},Sl=function(t){switch(t.event){case"thread.run.step.created":return v(this,$t,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=v(this,$t,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let u=t.data;if(u.delta){const s=Rn.accumulateDelta(n,u.delta);v(this,$t,"f")[t.data.id]=s}return v(this,$t,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":v(this,$t,"f")[t.data.id]=t.data;break}if(v(this,$t,"f")[t.data.id])return v(this,$t,"f")[t.data.id];throw new Error("No snapshot available")},Dl=function(t,n){let u=[];switch(t.event){case"thread.message.created":return[t.data,u];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=t.data;if(s.delta.content)for(const r of s.delta.content)if(r.index in n.content){let i=n.content[r.index];n.content[r.index]=v(this,je,"m",Tl).call(this,r,i)}else n.content[r.index]=r,u.push(r);return[n,u];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,u];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Tl=function(t,n){return Rn.accumulateDelta(n,t)},Fl=function(t){switch(ee(this,Br,t.data),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ee(this,In,t.data),v(this,mt,"f")&&(this._emit("toolCallDone",v(this,mt,"f")),ee(this,mt,void 0));break}};let Oo=class extends V{constructor(){super(...arguments),this.steps=new Af(this._client)}create(t,n,u){const{include:s,...r}=n;return this._client.post(M`/threads/${t}/runs`,{query:{include:s},body:r,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers]),stream:n.stream??!1})}retrieve(t,n,u){const{thread_id:s}=n;return this._client.get(M`/threads/${s}/runs/${t}`,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}update(t,n,u){const{thread_id:s,...r}=n;return this._client.post(M`/threads/${s}/runs/${t}`,{body:r,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t,n={},u){return this._client.getAPIList(M`/threads/${t}/runs`,Te,{query:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}cancel(t,n,u){const{thread_id:s}=n;return this._client.post(M`/threads/${s}/runs/${t}/cancel`,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}async createAndPoll(t,n,u){const s=await this.create(t,n,u);return await this.poll(s.id,{thread_id:t},u)}createAndStream(t,n,u){return qu.createAssistantStream(t,this._client.beta.threads.runs,n,u)}async poll(t,n,u){const s=q([u?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":u?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:r,response:i}=await this.retrieve(t,n,{...u,headers:{...u?.headers,...s}}).withResponse();switch(r.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(u?.pollIntervalMs)o=u.pollIntervalMs;else{const a=i.headers.get("openai-poll-after-ms");if(a){const l=parseInt(a);isNaN(l)||(o=l)}}await or(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return r}}}stream(t,n,u){return qu.createAssistantStream(t,this._client.beta.threads.runs,n,u)}submitToolOutputs(t,n,u){const{thread_id:s,...r}=n;return this._client.post(M`/threads/${s}/runs/${t}/submit_tool_outputs`,{body:r,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(t,n,u){const s=await this.submitToolOutputs(t,n,u);return await this.poll(s.id,n,u)}submitToolOutputsStream(t,n,u){return qu.createToolAssistantStream(t,this._client.beta.threads.runs,n,u)}};Oo.Steps=Af;class Fs extends V{constructor(){super(...arguments),this.runs=new Oo(this._client),this.messages=new vf(this._client)}create(t={},n){return this._client.post("/threads",{body:t,...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(M`/threads/${t}`,{...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,u){return this._client.post(M`/threads/${t}`,{body:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}delete(t,n){return this._client.delete(M`/threads/${t}`,{...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async createAndRunPoll(t,n){const u=await this.createAndRun(t,n);return await this.runs.poll(u.id,{thread_id:u.thread_id},n)}createAndRunStream(t,n){return qu.createThreadAssistantStream(t,this._client.beta.threads,n)}}Fs.Runs=Oo;Fs.Messages=vf;class cu extends V{constructor(){super(...arguments),this.realtime=new Ds(this._client),this.chatkit=new Ts(this._client),this.assistants=new bf(this._client),this.threads=new Fs(this._client)}}cu.Realtime=Ds;cu.ChatKit=Ts;cu.Assistants=bf;cu.Threads=Fs;class Ef extends V{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class Cf extends V{retrieve(t,n,u){const{container_id:s}=n;return this._client.get(M`/containers/${s}/files/${t}/content`,{...u,headers:q([{Accept:"application/binary"},u?.headers]),__binaryResponse:!0})}}let Po=class extends V{constructor(){super(...arguments),this.content=new Cf(this._client)}create(t,n,u){return this._client.post(M`/containers/${t}/files`,Pn({body:n,...u},this._client))}retrieve(t,n,u){const{container_id:s}=n;return this._client.get(M`/containers/${s}/files/${t}`,u)}list(t,n={},u){return this._client.getAPIList(M`/containers/${t}/files`,Te,{query:n,...u})}delete(t,n,u){const{container_id:s}=n;return this._client.delete(M`/containers/${s}/files/${t}`,{...u,headers:q([{Accept:"*/*"},u?.headers])})}};Po.Content=Cf;class Lo extends V{constructor(){super(...arguments),this.files=new Po(this._client)}create(t,n){return this._client.post("/containers",{body:t,...n})}retrieve(t,n){return this._client.get(M`/containers/${t}`,n)}list(t={},n){return this._client.getAPIList("/containers",Te,{query:t,...n})}delete(t,n){return this._client.delete(M`/containers/${t}`,{...n,headers:q([{Accept:"*/*"},n?.headers])})}}Lo.Files=Po;class kf extends V{create(t,n,u){const{include:s,...r}=n;return this._client.post(M`/conversations/${t}/items`,{query:{include:s},body:r,...u})}retrieve(t,n,u){const{conversation_id:s,...r}=n;return this._client.get(M`/conversations/${s}/items/${t}`,{query:r,...u})}list(t,n={},u){return this._client.getAPIList(M`/conversations/${t}/items`,es,{query:n,...u})}delete(t,n,u){const{conversation_id:s}=n;return this._client.delete(M`/conversations/${s}/items/${t}`,u)}}class No extends V{constructor(){super(...arguments),this.items=new kf(this._client)}create(t={},n){return this._client.post("/conversations",{body:t,...n})}retrieve(t,n){return this._client.get(M`/conversations/${t}`,n)}update(t,n,u){return this._client.post(M`/conversations/${t}`,{body:n,...u})}delete(t,n){return this._client.delete(M`/conversations/${t}`,n)}}No.Items=kf;class Sf extends V{create(t,n){const u=!!t.encoding_format;let s=u?t.encoding_format:"base64";u&&ze(this._client).debug("embeddings/user defined encoding_format:",t.encoding_format);const r=this._client.post("/embeddings",{body:{...t,encoding_format:s},...n});return u?r:(ze(this._client).debug("embeddings/decoding base64 embeddings from base64"),r._thenUnwrap(i=>(i&&i.data&&i.data.forEach(o=>{const a=o.embedding;o.embedding=t2(a)}),i)))}}class Df extends V{retrieve(t,n,u){const{eval_id:s,run_id:r}=n;return this._client.get(M`/evals/${s}/runs/${r}/output_items/${t}`,u)}list(t,n,u){const{eval_id:s,...r}=n;return this._client.getAPIList(M`/evals/${s}/runs/${t}/output_items`,Te,{query:r,...u})}}class $o extends V{constructor(){super(...arguments),this.outputItems=new Df(this._client)}create(t,n,u){return this._client.post(M`/evals/${t}/runs`,{body:n,...u})}retrieve(t,n,u){const{eval_id:s}=n;return this._client.get(M`/evals/${s}/runs/${t}`,u)}list(t,n={},u){return this._client.getAPIList(M`/evals/${t}/runs`,Te,{query:n,...u})}delete(t,n,u){const{eval_id:s}=n;return this._client.delete(M`/evals/${s}/runs/${t}`,u)}cancel(t,n,u){const{eval_id:s}=n;return this._client.post(M`/evals/${s}/runs/${t}`,u)}}$o.OutputItems=Df;class Bo extends V{constructor(){super(...arguments),this.runs=new $o(this._client)}create(t,n){return this._client.post("/evals",{body:t,...n})}retrieve(t,n){return this._client.get(M`/evals/${t}`,n)}update(t,n,u){return this._client.post(M`/evals/${t}`,{body:n,...u})}list(t={},n){return this._client.getAPIList("/evals",Te,{query:t,...n})}delete(t,n){return this._client.delete(M`/evals/${t}`,n)}}Bo.Runs=$o;let Tf=class extends V{create(t,n){return this._client.post("/files",Pn({body:t,...n},this._client))}retrieve(t,n){return this._client.get(M`/files/${t}`,n)}list(t={},n){return this._client.getAPIList("/files",Te,{query:t,...n})}delete(t,n){return this._client.delete(M`/files/${t}`,n)}content(t,n){return this._client.get(M`/files/${t}/content`,{...n,headers:q([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:u=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),r=Date.now();let i=await this.retrieve(t);for(;!i.status||!s.has(i.status);)if(await or(n),i=await this.retrieve(t),Date.now()-r>u)throw new Eo({message:`Giving up on waiting for file ${t} to finish processing after ${u} milliseconds.`});return i}};class Ff extends V{}let Rf=class extends V{run(t,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:t,...n})}validate(t,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:t,...n})}};class Uo extends V{constructor(){super(...arguments),this.graders=new Rf(this._client)}}Uo.Graders=Rf;class If extends V{create(t,n,u){return this._client.getAPIList(M`/fine_tuning/checkpoints/${t}/permissions`,Ss,{body:n,method:"post",...u})}retrieve(t,n={},u){return this._client.get(M`/fine_tuning/checkpoints/${t}/permissions`,{query:n,...u})}delete(t,n,u){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(M`/fine_tuning/checkpoints/${s}/permissions/${t}`,u)}}let Ho=class extends V{constructor(){super(...arguments),this.permissions=new If(this._client)}};Ho.Permissions=If;class Mf extends V{list(t,n={},u){return this._client.getAPIList(M`/fine_tuning/jobs/${t}/checkpoints`,Te,{query:n,...u})}}class zo extends V{constructor(){super(...arguments),this.checkpoints=new Mf(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(M`/fine_tuning/jobs/${t}`,n)}list(t={},n){return this._client.getAPIList("/fine_tuning/jobs",Te,{query:t,...n})}cancel(t,n){return this._client.post(M`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},u){return this._client.getAPIList(M`/fine_tuning/jobs/${t}/events`,Te,{query:n,...u})}pause(t,n){return this._client.post(M`/fine_tuning/jobs/${t}/pause`,n)}resume(t,n){return this._client.post(M`/fine_tuning/jobs/${t}/resume`,n)}}zo.Checkpoints=Mf;class fu extends V{constructor(){super(...arguments),this.methods=new Ff(this._client),this.jobs=new zo(this._client),this.checkpoints=new Ho(this._client),this.alpha=new Uo(this._client)}}fu.Methods=Ff;fu.Jobs=zo;fu.Checkpoints=Ho;fu.Alpha=Uo;class Of extends V{}class jo extends V{constructor(){super(...arguments),this.graderModels=new Of(this._client)}}jo.GraderModels=Of;class Pf extends V{createVariation(t,n){return this._client.post("/images/variations",Pn({body:t,...n},this._client))}edit(t,n){return this._client.post("/images/edits",Pn({body:t,...n,stream:t.stream??!1},this._client))}generate(t,n){return this._client.post("/images/generations",{body:t,...n,stream:t.stream??!1})}}class Lf extends V{retrieve(t,n){return this._client.get(M`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",Ss,t)}delete(t,n){return this._client.delete(M`/models/${t}`,n)}}class Nf extends V{create(t,n){return this._client.post("/moderations",{body:t,...n})}}class $f extends V{accept(t,n,u){return this._client.post(M`/realtime/calls/${t}/accept`,{body:n,...u,headers:q([{Accept:"*/*"},u?.headers])})}hangup(t,n){return this._client.post(M`/realtime/calls/${t}/hangup`,{...n,headers:q([{Accept:"*/*"},n?.headers])})}refer(t,n,u){return this._client.post(M`/realtime/calls/${t}/refer`,{body:n,...u,headers:q([{Accept:"*/*"},u?.headers])})}reject(t,n={},u){return this._client.post(M`/realtime/calls/${t}/reject`,{body:n,...u,headers:q([{Accept:"*/*"},u?.headers])})}}class Bf extends V{create(t,n){return this._client.post("/realtime/client_secrets",{body:t,...n})}}class Rs extends V{constructor(){super(...arguments),this.clientSecrets=new Bf(this._client),this.calls=new $f(this._client)}}Rs.ClientSecrets=Bf;Rs.Calls=$f;function u2(e,t){return!t||!s2(t)?{...e,output_parsed:null,output:e.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(u=>({...u,parsed:null}))}:n)}:Uf(e,t)}function Uf(e,t){const n=e.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:a2(t,s)};if(s.type==="message"){const r=s.content.map(i=>i.type==="output_text"?{...i,parsed:r2(t,i.text)}:i);return{...s,content:r}}return s}),u=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||Ki(u),Object.defineProperty(u,"output_parsed",{enumerable:!0,get(){for(const s of u.output)if(s.type==="message"){for(const r of s.content)if(r.type==="output_text"&&r.parsed!==null)return r.parsed}return null}}),u}function r2(e,t){return e.text?.format?.type!=="json_schema"?null:"$parseRaw"in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t)}function s2(e){return!!Do(e.text?.format)}function i2(e){return e?.$brand==="auto-parseable-tool"}function o2(e,t){return e.find(n=>n.type==="function"&&n.name===t)}function a2(e,t){const n=o2(e.tools??[],t.name);return{...t,...t,parsed_arguments:i2(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function Ki(e){const t=[];for(const n of e.output)if(n.type==="message")for(const u of n.content)u.type==="output_text"&&t.push(u.text);e.output_text=t.join("")}var qn,Cr,dn,kr,Rl,Il,Ml,Ol;class qo extends Fo{constructor(t){super(),qn.add(this),Cr.set(this,void 0),dn.set(this,void 0),kr.set(this,void 0),ee(this,Cr,t)}static createResponse(t,n,u){const s=new qo(n);return s._run(()=>s._createOrRetrieveResponse(t,n,{...u,headers:{...u?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(t,n,u){const s=u?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),v(this,qn,"m",Rl).call(this);let r,i=null;"response_id"in n?(r=await t.responses.retrieve(n.response_id,{stream:!0},{...u,signal:this.controller.signal,stream:!0}),i=n.starting_after??null):r=await t.responses.create({...n,stream:!0},{...u,signal:this.controller.signal}),this._connected();for await(const o of r)v(this,qn,"m",Il).call(this,o,i);if(r.controller.signal?.aborted)throw new yt;return v(this,qn,"m",Ml).call(this)}[(Cr=new WeakMap,dn=new WeakMap,kr=new WeakMap,qn=new WeakSet,Rl=function(){this.ended||ee(this,dn,void 0)},Il=function(n,u){if(this.ended)return;const s=(i,o)=>{(u==null||o.sequence_number>u)&&this._emit(i,o)},r=v(this,qn,"m",Ol).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new X(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new X(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new X(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new X(`missing output at index ${n.output_index}`);i.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:i.arguments});break}default:s(n.type,n);break}},Ml=function(){if(this.ended)throw new X("stream has ended, this shouldn't happen");const n=v(this,dn,"f");if(!n)throw new X("request ended without sending any events");ee(this,dn,void 0);const u=l2(n,v(this,Cr,"f"));return ee(this,kr,u),u},Ol=function(n){let u=v(this,dn,"f");if(!u){if(n.type!=="response.created")throw new X(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return u=ee(this,dn,n.response),u}switch(n.type){case"response.output_item.added":{u.output.push(n.item);break}case"response.content_part.added":{const s=u.output[n.output_index];if(!s)throw new X(`missing output at index ${n.output_index}`);const r=s.type,i=n.part;r==="message"&&i.type!=="reasoning_text"?s.content.push(i):r==="reasoning"&&i.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(i));break}case"response.output_text.delta":{const s=u.output[n.output_index];if(!s)throw new X(`missing output at index ${n.output_index}`);if(s.type==="message"){const r=s.content[n.content_index];if(!r)throw new X(`missing content at index ${n.content_index}`);if(r.type!=="output_text")throw new X(`expected content to be 'output_text', got ${r.type}`);r.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=u.output[n.output_index];if(!s)throw new X(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=u.output[n.output_index];if(!s)throw new X(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const r=s.content?.[n.content_index];if(!r)throw new X(`missing content at index ${n.content_index}`);if(r.type!=="reasoning_text")throw new X(`expected content to be 'reasoning_text', got ${r.type}`);r.text+=n.delta}break}case"response.completed":{ee(this,dn,n.response);break}}return u},Symbol.asyncIterator)](){const t=[],n=[];let u=!1;return this.on("event",s=>{const r=n.shift();r?r.resolve(s):t.push(s)}),this.on("end",()=>{u=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),this.on("error",s=>{u=!0;for(const r of n)r.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((r,i)=>n.push({resolve:r,reject:i})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=v(this,kr,"f");if(!t)throw new X("stream ended without producing a ChatCompletion");return t}}function l2(e,t){return u2(e,t)}class Hf extends V{list(t,n={},u){return this._client.getAPIList(M`/responses/${t}/input_items`,Te,{query:n,...u})}}class zf extends V{count(t={},n){return this._client.post("/responses/input_tokens",{body:t,...n})}}class Is extends V{constructor(){super(...arguments),this.inputItems=new Hf(this._client),this.inputTokens=new zf(this._client)}create(t,n){return this._client.post("/responses",{body:t,...n,stream:t.stream??!1})._thenUnwrap(u=>("object"in u&&u.object==="response"&&Ki(u),u))}retrieve(t,n={},u){return this._client.get(M`/responses/${t}`,{query:n,...u,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Ki(s),s))}delete(t,n){return this._client.delete(M`/responses/${t}`,{...n,headers:q([{Accept:"*/*"},n?.headers])})}parse(t,n){return this._client.responses.create(t,n)._thenUnwrap(u=>Uf(u,t))}stream(t,n){return qo.createResponse(this._client,t,n)}cancel(t,n){return this._client.post(M`/responses/${t}/cancel`,n)}compact(t={},n){return this._client.post("/responses/compact",{body:t,...n})}}Is.InputItems=Hf;Is.InputTokens=zf;class jf extends V{create(t,n,u){return this._client.post(M`/uploads/${t}/parts`,Pn({body:n,...u},this._client))}}class Wo extends V{constructor(){super(...arguments),this.parts=new jf(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(M`/uploads/${t}/cancel`,n)}complete(t,n,u){return this._client.post(M`/uploads/${t}/complete`,{body:n,...u})}}Wo.Parts=jf;const c2=async e=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const u=[];for(const s of t)s.status==="fulfilled"&&u.push(s.value);return u};class qf extends V{create(t,n,u){return this._client.post(M`/vector_stores/${t}/file_batches`,{body:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}retrieve(t,n,u){const{vector_store_id:s}=n;return this._client.get(M`/vector_stores/${s}/file_batches/${t}`,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}cancel(t,n,u){const{vector_store_id:s}=n;return this._client.post(M`/vector_stores/${s}/file_batches/${t}/cancel`,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}async createAndPoll(t,n,u){const s=await this.create(t,n);return await this.poll(t,s.id,u)}listFiles(t,n,u){const{vector_store_id:s,...r}=n;return this._client.getAPIList(M`/vector_stores/${s}/file_batches/${t}/files`,Te,{query:r,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}async poll(t,n,u){const s=q([u?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":u?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:r,response:i}=await this.retrieve(n,{vector_store_id:t},{...u,headers:s}).withResponse();switch(r.status){case"in_progress":let o=5e3;if(u?.pollIntervalMs)o=u.pollIntervalMs;else{const a=i.headers.get("openai-poll-after-ms");if(a){const l=parseInt(a);isNaN(l)||(o=l)}}await or(o);break;case"failed":case"cancelled":case"completed":return r}}}async uploadAndPoll(t,{files:n,fileIds:u=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const r=s?.maxConcurrency??5,i=Math.min(r,n.length),o=this._client,a=n.values(),l=[...u];async function c(h){for(let d of h){const p=await o.files.create({file:d,purpose:"assistants"},s);l.push(p.id)}}const f=Array(i).fill(a).map(c);return await c2(f),await this.createAndPoll(t,{file_ids:l})}}class Wf extends V{create(t,n,u){return this._client.post(M`/vector_stores/${t}/files`,{body:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}retrieve(t,n,u){const{vector_store_id:s}=n;return this._client.get(M`/vector_stores/${s}/files/${t}`,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}update(t,n,u){const{vector_store_id:s,...r}=n;return this._client.post(M`/vector_stores/${s}/files/${t}`,{body:r,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t,n={},u){return this._client.getAPIList(M`/vector_stores/${t}/files`,Te,{query:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}delete(t,n,u){const{vector_store_id:s}=n;return this._client.delete(M`/vector_stores/${s}/files/${t}`,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}async createAndPoll(t,n,u){const s=await this.create(t,n,u);return await this.poll(t,s.id,u)}async poll(t,n,u){const s=q([u?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":u?.pollIntervalMs?.toString()??void 0}]);for(;;){const r=await this.retrieve(n,{vector_store_id:t},{...u,headers:s}).withResponse(),i=r.data;switch(i.status){case"in_progress":let o=5e3;if(u?.pollIntervalMs)o=u.pollIntervalMs;else{const a=r.response.headers.get("openai-poll-after-ms");if(a){const l=parseInt(a);isNaN(l)||(o=l)}}await or(o);break;case"failed":case"completed":return i}}}async upload(t,n,u){const s=await this._client.files.create({file:n,purpose:"assistants"},u);return this.create(t,{file_id:s.id},u)}async uploadAndPoll(t,n,u){const s=await this.upload(t,n,u);return await this.poll(t,s.id,u)}content(t,n,u){const{vector_store_id:s}=n;return this._client.getAPIList(M`/vector_stores/${s}/files/${t}/content`,Ss,{...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}}class Ms extends V{constructor(){super(...arguments),this.files=new Wf(this._client),this.fileBatches=new qf(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(M`/vector_stores/${t}`,{...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,u){return this._client.post(M`/vector_stores/${t}`,{body:n,...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}list(t={},n){return this._client.getAPIList("/vector_stores",Te,{query:t,...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(M`/vector_stores/${t}`,{...n,headers:q([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(t,n,u){return this._client.getAPIList(M`/vector_stores/${t}/search`,Ss,{body:n,method:"post",...u,headers:q([{"OpenAI-Beta":"assistants=v2"},u?.headers])})}}Ms.Files=Wf;Ms.FileBatches=qf;class Vf extends V{create(t,n){return this._client.post("/videos",xl({body:t,...n},this._client))}retrieve(t,n){return this._client.get(M`/videos/${t}`,n)}list(t={},n){return this._client.getAPIList("/videos",es,{query:t,...n})}delete(t,n){return this._client.delete(M`/videos/${t}`,n)}downloadContent(t,n={},u){return this._client.get(M`/videos/${t}/content`,{query:n,...u,headers:q([{Accept:"application/binary"},u?.headers]),__binaryResponse:!0})}remix(t,n,u){return this._client.post(M`/videos/${t}/remix`,xl({body:n,...u},this._client))}}var Xn,Kf,Ur;class Gf extends V{constructor(){super(...arguments),Xn.add(this)}async unwrap(t,n,u=this._client.webhookSecret,s=300){return await this.verifySignature(t,n,u,s),JSON.parse(t)}async verifySignature(t,n,u=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");v(this,Xn,"m",Kf).call(this,u);const r=q([n]).values,i=v(this,Xn,"m",Ur).call(this,r,"webhook-signature"),o=v(this,Xn,"m",Ur).call(this,r,"webhook-timestamp"),a=v(this,Xn,"m",Ur).call(this,r,"webhook-id"),l=parseInt(o,10);if(isNaN(l))throw new Eu("Invalid webhook timestamp format");const c=Math.floor(Date.now()/1e3);if(c-l>s)throw new Eu("Webhook timestamp is too old");if(l>c+s)throw new Eu("Webhook timestamp is too new");const f=i.split(" ").map(m=>m.startsWith("v1,")?m.substring(3):m),h=u.startsWith("whsec_")?Buffer.from(u.replace("whsec_",""),"base64"):Buffer.from(u,"utf-8"),d=a?`${a}.${o}.${t}`:`${o}.${t}`,p=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const m of f)try{const w=Buffer.from(m,"base64");if(await crypto.subtle.verify("HMAC",p,w,new TextEncoder().encode(d)))return}catch{continue}throw new Eu("The given webhook signature does not match the expected signature")}}Xn=new WeakSet,Kf=function(t){if(typeof t!="string"||t.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Ur=function(t,n){if(!t)throw new Error("Headers are required");const u=t.get(n);if(u==null)throw new Error(`Missing required header: ${n}`);return u};var Gi,Vo,Hr,Jf;class re{constructor({baseURL:t=jn("OPENAI_BASE_URL"),apiKey:n=jn("OPENAI_API_KEY"),organization:u=jn("OPENAI_ORG_ID")??null,project:s=jn("OPENAI_PROJECT_ID")??null,webhookSecret:r=jn("OPENAI_WEBHOOK_SECRET")??null,...i}={}){if(Gi.add(this),Hr.set(this,void 0),this.completions=new Ef(this),this.chat=new Mo(this),this.embeddings=new Sf(this),this.files=new Tf(this),this.images=new Pf(this),this.audio=new lr(this),this.moderations=new Nf(this),this.models=new Lf(this),this.fineTuning=new fu(this),this.graders=new jo(this),this.vectorStores=new Ms(this),this.webhooks=new Gf(this),this.beta=new cu(this),this.batches=new gf(this),this.uploads=new Wo(this),this.responses=new Is(this),this.realtime=new Rs(this),this.conversations=new No(this),this.evals=new Bo(this),this.containers=new Lo(this),this.videos=new Vf(this),n===void 0)throw new X("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:n,organization:u,project:s,webhookSecret:r,...i,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&fb())throw new X(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??Vo.DEFAULT_TIMEOUT,this.logger=o.logger??console;const a="warn";this.logLevel=a,this.logLevel=bl(o.logLevel,"ClientOptions.logLevel",this)??bl(jn("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??a,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??gb(),ee(this,Hr,_b),this._options=o,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=u,this.project=s,this.webhookSecret=r}withOptions(t){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...t})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){}async authHeaders(t){return q([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(t){return Eb(t,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Gn}`}defaultIdempotencyKey(){return`stainless-node-retry-${b0()}`}makeStatusError(t,n,u,s){return We.generate(t,n,u,s)}async _callApiKey(){const t=this._options.apiKey;if(typeof t!="function")return!1;let n;try{n=await t()}catch(u){throw u instanceof X?u:new X(`Failed to get token from 'apiKey' function: ${u.message}`,{cause:u})}if(typeof n!="string"||!n)throw new X(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(t,n,u){const s=!v(this,Gi,"m",Jf).call(this)&&u||this.baseURL,r=ib(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return ob(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(t){await this._callApiKey()}async prepareRequest(t,{url:n,options:u}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,u){return this.request(Promise.resolve(u).then(s=>({method:t,path:n,...s})))}request(t,n=null){return new ks(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,u){const s=await t,r=s.maxRetries??this.maxRetries;n==null&&(n=r),await this.prepareOptions(s);const{req:i,url:o,timeout:a}=await this.buildRequest(s,{retryCount:r-n});await this.prepareRequest(i,{url:o,options:s});const l="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=u===void 0?"":`, retryOf: ${u}`,f=Date.now();if(ze(this).debug(`[${l}] sending request`,Tn({retryOfRequestLogID:u,method:s.method,url:o,options:s,headers:i.headers})),s.signal?.aborted)throw new yt;const h=new AbortController,d=await this.fetchWithTimeout(o,i,a,h).catch(Li),p=Date.now();if(d instanceof globalThis.Error){const A=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new yt;const x=Pi(d)||/timed? ?out/i.test(String(d)+("cause"in d?String(d.cause):""));if(n)return ze(this).info(`[${l}] connection ${x?"timed out":"failed"} - ${A}`),ze(this).debug(`[${l}] connection ${x?"timed out":"failed"} (${A})`,Tn({retryOfRequestLogID:u,url:o,durationMs:p-f,message:d.message})),this.retryRequest(s,n,u??l);throw ze(this).info(`[${l}] connection ${x?"timed out":"failed"} - error; no more retries left`),ze(this).debug(`[${l}] connection ${x?"timed out":"failed"} (error; no more retries left)`,Tn({retryOfRequestLogID:u,url:o,durationMs:p-f,message:d.message})),x?new Eo:new Es({cause:d})}const m=[...d.headers.entries()].filter(([A])=>A==="x-request-id").map(([A,x])=>", "+A+": "+JSON.stringify(x)).join(""),w=`[${l}${c}${m}] ${i.method} ${o} ${d.ok?"succeeded":"failed"} with status ${d.status} in ${p-f}ms`;if(!d.ok){const A=await this.shouldRetry(d);if(n&&A){const O=`retrying, ${n} attempts remaining`;return await bb(d.body),ze(this).info(`${w} - ${O}`),ze(this).debug(`[${l}] response error (${O})`,Tn({retryOfRequestLogID:u,url:d.url,status:d.status,headers:d.headers,durationMs:p-f})),this.retryRequest(s,n,u??l,d.headers)}const x=A?"error; no more retries left":"error; not retryable";ze(this).info(`${w} - ${x}`);const E=await d.text().catch(O=>Li(O).message),y=cb(E),k=y?void 0:E;throw ze(this).debug(`[${l}] response error (${x})`,Tn({retryOfRequestLogID:u,url:d.url,status:d.status,headers:d.headers,message:k,durationMs:Date.now()-f})),this.makeStatusError(d.status,y,k,d.headers)}return ze(this).info(w),ze(this).debug(`[${l}] response start`,Tn({retryOfRequestLogID:u,url:d.url,status:d.status,headers:d.headers,durationMs:p-f})),{response:d,options:s,controller:h,requestLogID:l,retryOfRequestLogID:u,startTime:f}}getAPIList(t,n,u){return this.requestAPIList(n,{method:"get",path:t,...u})}requestAPIList(t,n){const u=this.makeRequest(n,null,void 0);return new Mb(this,u,t)}async fetchWithTimeout(t,n,u,s){const{signal:r,method:i,...o}=n||{};r&&r.addEventListener("abort",()=>s.abort());const a=setTimeout(()=>s.abort(),u),l=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,c={signal:s.signal,...l?{duplex:"half"}:{},method:"GET",...o};i&&(c.method=i.toUpperCase());try{return await this.fetch.call(void 0,t,c)}finally{clearTimeout(a)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,u,s){let r;const i=s?.get("retry-after-ms");if(i){const a=parseFloat(i);Number.isNaN(a)||(r=a)}const o=s?.get("retry-after");if(o&&!r){const a=parseFloat(o);Number.isNaN(a)?r=Date.parse(o)-Date.now():r=a*1e3}if(!(r&&0<=r&&r<60*1e3)){const a=t.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,a)}return await or(r),this.makeRequest(t,n-1,u)}calculateDefaultRetryTimeoutMillis(t,n){const r=n-t,i=Math.min(.5*Math.pow(2,r),8),o=1-Math.random()*.25;return i*o*1e3}async buildRequest(t,{retryCount:n=0}={}){const u={...t},{method:s,path:r,query:i,defaultBaseURL:o}=u,a=this.buildURL(r,i,o);"timeout"in u&&lb("timeout",u.timeout),u.timeout=u.timeout??this.timeout;const{bodyHeaders:l,body:c}=this.buildBody({options:u}),f=await this.buildHeaders({options:t,method:s,bodyHeaders:l,retryCount:n});return{req:{method:s,headers:f,...u.signal&&{signal:u.signal},...globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"},...c&&{body:c},...this.fetchOptions??{},...u.fetchOptions??{}},url:a,timeout:u.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:u,retryCount:s}){let r={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);const i=q([r,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{},...mb(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(t),this._options.defaultHeaders,u,t.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const u=q([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&u.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:F0(t)}:v(this,Hr,"f").call(this,{body:t,headers:u})}}Vo=re,Hr=new WeakMap,Gi=new WeakSet,Jf=function(){return this.baseURL!=="https://api.openai.com/v1"};re.OpenAI=Vo;re.DEFAULT_TIMEOUT=6e5;re.OpenAIError=X;re.APIError=We;re.APIConnectionError=Es;re.APIConnectionTimeoutError=Eo;re.APIUserAbortError=yt;re.NotFoundError=w0;re.ConflictError=v0;re.RateLimitError=E0;re.BadRequestError=_0;re.AuthenticationError=x0;re.InternalServerError=C0;re.PermissionDeniedError=y0;re.UnprocessableEntityError=A0;re.InvalidWebhookSignatureError=Eu;re.toFile=$b;re.Completions=Ef;re.Chat=Mo;re.Embeddings=Sf;re.Files=Tf;re.Images=Pf;re.Audio=lr;re.Moderations=Nf;re.Models=Lf;re.FineTuning=fu;re.Graders=jo;re.VectorStores=Ms;re.Webhooks=Gf;re.Beta=cu;re.Batches=gf;re.Uploads=Wo;re.Responses=Is;re.Realtime=Rs;re.Conversations=No;re.Evals=Bo;re.Containers=Lo;re.Videos=Vf;function f2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gi={exports:{}},Pl;function d2(){return Pl||(Pl=1,(function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,u=1,s=0;t.Diff=function(r,i){return[r,i]},t.prototype.diff_main=function(r,i,o,a){typeof a>"u"&&(this.Diff_Timeout<=0?a=Number.MAX_VALUE:a=new Date().getTime()+this.Diff_Timeout*1e3);var l=a;if(r==null||i==null)throw new Error("Null input. (diff_main)");if(r==i)return r?[new t.Diff(s,r)]:[];typeof o>"u"&&(o=!0);var c=o,f=this.diff_commonPrefix(r,i),h=r.substring(0,f);r=r.substring(f),i=i.substring(f),f=this.diff_commonSuffix(r,i);var d=r.substring(r.length-f);r=r.substring(0,r.length-f),i=i.substring(0,i.length-f);var p=this.diff_compute_(r,i,c,l);return h&&p.unshift(new t.Diff(s,h)),d&&p.push(new t.Diff(s,d)),this.diff_cleanupMerge(p),p},t.prototype.diff_compute_=function(r,i,o,a){var l;if(!r)return[new t.Diff(u,i)];if(!i)return[new t.Diff(n,r)];var c=r.length>i.length?r:i,f=r.length>i.length?i:r,h=c.indexOf(f);if(h!=-1)return l=[new t.Diff(u,c.substring(0,h)),new t.Diff(s,f),new t.Diff(u,c.substring(h+f.length))],r.length>i.length&&(l[0][0]=l[2][0]=n),l;if(f.length==1)return[new t.Diff(n,r),new t.Diff(u,i)];var d=this.diff_halfMatch_(r,i);if(d){var p=d[0],m=d[1],w=d[2],A=d[3],x=d[4],E=this.diff_main(p,w,o,a),y=this.diff_main(m,A,o,a);return E.concat([new t.Diff(s,x)],y)}return o&&r.length>100&&i.length>100?this.diff_lineMode_(r,i,a):this.diff_bisect_(r,i,a)},t.prototype.diff_lineMode_=function(r,i,o){var a=this.diff_linesToChars_(r,i);r=a.chars1,i=a.chars2;var l=a.lineArray,c=this.diff_main(r,i,!1,o);this.diff_charsToLines_(c,l),this.diff_cleanupSemantic(c),c.push(new t.Diff(s,""));for(var f=0,h=0,d=0,p="",m="";f<c.length;){switch(c[f][0]){case u:d++,m+=c[f][1];break;case n:h++,p+=c[f][1];break;case s:if(h>=1&&d>=1){c.splice(f-h-d,h+d),f=f-h-d;for(var w=this.diff_main(p,m,!1,o),A=w.length-1;A>=0;A--)c.splice(f,0,w[A]);f=f+w.length}d=0,h=0,p="",m="";break}f++}return c.pop(),c},t.prototype.diff_bisect_=function(r,i,o){for(var a=r.length,l=i.length,c=Math.ceil((a+l)/2),f=c,h=2*c,d=new Array(h),p=new Array(h),m=0;m<h;m++)d[m]=-1,p[m]=-1;d[f+1]=0,p[f+1]=0;for(var w=a-l,A=w%2!=0,x=0,E=0,y=0,k=0,T=0;T<c&&!(new Date().getTime()>o);T++){for(var O=-T+x;O<=T-E;O+=2){var N=f+O,F;O==-T||O!=T&&d[N-1]<d[N+1]?F=d[N+1]:F=d[N-1]+1;for(var $=F-O;F<a&&$<l&&r.charAt(F)==i.charAt($);)F++,$++;if(d[N]=F,F>a)E+=2;else if($>l)x+=2;else if(A){var z=f+w-O;if(z>=0&&z<h&&p[z]!=-1){var K=a-p[z];if(F>=K)return this.diff_bisectSplit_(r,i,F,$,o)}}}for(var Q=-T+y;Q<=T-k;Q+=2){var z=f+Q,K;Q==-T||Q!=T&&p[z-1]<p[z+1]?K=p[z+1]:K=p[z-1]+1;for(var me=K-Q;K<a&&me<l&&r.charAt(a-K-1)==i.charAt(l-me-1);)K++,me++;if(p[z]=K,K>a)k+=2;else if(me>l)y+=2;else if(!A){var N=f+w-Q;if(N>=0&&N<h&&d[N]!=-1){var F=d[N],$=f+F-N;if(K=a-K,F>=K)return this.diff_bisectSplit_(r,i,F,$,o)}}}}return[new t.Diff(n,r),new t.Diff(u,i)]},t.prototype.diff_bisectSplit_=function(r,i,o,a,l){var c=r.substring(0,o),f=i.substring(0,a),h=r.substring(o),d=i.substring(a),p=this.diff_main(c,f,!1,l),m=this.diff_main(h,d,!1,l);return p.concat(m)},t.prototype.diff_linesToChars_=function(r,i){var o=[],a={};o[0]="";function l(d){for(var p="",m=0,w=-1,A=o.length;w<d.length-1;){w=d.indexOf(`
`,m),w==-1&&(w=d.length-1);var x=d.substring(m,w+1);(a.hasOwnProperty?a.hasOwnProperty(x):a[x]!==void 0)?p+=String.fromCharCode(a[x]):(A==c&&(x=d.substring(m),w=d.length),p+=String.fromCharCode(A),a[x]=A,o[A++]=x),m=w+1}return p}var c=4e4,f=l(r);c=65535;var h=l(i);return{chars1:f,chars2:h,lineArray:o}},t.prototype.diff_charsToLines_=function(r,i){for(var o=0;o<r.length;o++){for(var a=r[o][1],l=[],c=0;c<a.length;c++)l[c]=i[a.charCodeAt(c)];r[o][1]=l.join("")}},t.prototype.diff_commonPrefix=function(r,i){if(!r||!i||r.charAt(0)!=i.charAt(0))return 0;for(var o=0,a=Math.min(r.length,i.length),l=a,c=0;o<l;)r.substring(c,l)==i.substring(c,l)?(o=l,c=o):a=l,l=Math.floor((a-o)/2+o);return l},t.prototype.diff_commonSuffix=function(r,i){if(!r||!i||r.charAt(r.length-1)!=i.charAt(i.length-1))return 0;for(var o=0,a=Math.min(r.length,i.length),l=a,c=0;o<l;)r.substring(r.length-l,r.length-c)==i.substring(i.length-l,i.length-c)?(o=l,c=o):a=l,l=Math.floor((a-o)/2+o);return l},t.prototype.diff_commonOverlap_=function(r,i){var o=r.length,a=i.length;if(o==0||a==0)return 0;o>a?r=r.substring(o-a):o<a&&(i=i.substring(0,o));var l=Math.min(o,a);if(r==i)return l;for(var c=0,f=1;;){var h=r.substring(l-f),d=i.indexOf(h);if(d==-1)return c;f+=d,(d==0||r.substring(l-f)==i.substring(0,f))&&(c=f,f++)}},t.prototype.diff_halfMatch_=function(r,i){if(this.Diff_Timeout<=0)return null;var o=r.length>i.length?r:i,a=r.length>i.length?i:r;if(o.length<4||a.length*2<o.length)return null;var l=this;function c(E,y,k){for(var T=E.substring(k,k+Math.floor(E.length/4)),O=-1,N="",F,$,z,K;(O=y.indexOf(T,O+1))!=-1;){var Q=l.diff_commonPrefix(E.substring(k),y.substring(O)),me=l.diff_commonSuffix(E.substring(0,k),y.substring(0,O));N.length<me+Q&&(N=y.substring(O-me,O)+y.substring(O,O+Q),F=E.substring(0,k-me),$=E.substring(k+Q),z=y.substring(0,O-me),K=y.substring(O+Q))}return N.length*2>=E.length?[F,$,z,K,N]:null}var f=c(o,a,Math.ceil(o.length/4)),h=c(o,a,Math.ceil(o.length/2)),d;if(!f&&!h)return null;h?f?d=f[4].length>h[4].length?f:h:d=h:d=f;var p,m,w,A;r.length>i.length?(p=d[0],m=d[1],w=d[2],A=d[3]):(w=d[0],A=d[1],p=d[2],m=d[3]);var x=d[4];return[p,m,w,A,x]},t.prototype.diff_cleanupSemantic=function(r){for(var i=!1,o=[],a=0,l=null,c=0,f=0,h=0,d=0,p=0;c<r.length;)r[c][0]==s?(o[a++]=c,f=d,h=p,d=0,p=0,l=r[c][1]):(r[c][0]==u?d+=r[c][1].length:p+=r[c][1].length,l&&l.length<=Math.max(f,h)&&l.length<=Math.max(d,p)&&(r.splice(o[a-1],0,new t.Diff(n,l)),r[o[a-1]+1][0]=u,a--,a--,c=a>0?o[a-1]:-1,f=0,h=0,d=0,p=0,l=null,i=!0)),c++;for(i&&this.diff_cleanupMerge(r),this.diff_cleanupSemanticLossless(r),c=1;c<r.length;){if(r[c-1][0]==n&&r[c][0]==u){var m=r[c-1][1],w=r[c][1],A=this.diff_commonOverlap_(m,w),x=this.diff_commonOverlap_(w,m);A>=x?(A>=m.length/2||A>=w.length/2)&&(r.splice(c,0,new t.Diff(s,w.substring(0,A))),r[c-1][1]=m.substring(0,m.length-A),r[c+1][1]=w.substring(A),c++):(x>=m.length/2||x>=w.length/2)&&(r.splice(c,0,new t.Diff(s,m.substring(0,x))),r[c-1][0]=u,r[c-1][1]=w.substring(0,w.length-x),r[c+1][0]=n,r[c+1][1]=m.substring(x),c++),c++}c++}},t.prototype.diff_cleanupSemanticLossless=function(r){function i(x,E){if(!x||!E)return 6;var y=x.charAt(x.length-1),k=E.charAt(0),T=y.match(t.nonAlphaNumericRegex_),O=k.match(t.nonAlphaNumericRegex_),N=T&&y.match(t.whitespaceRegex_),F=O&&k.match(t.whitespaceRegex_),$=N&&y.match(t.linebreakRegex_),z=F&&k.match(t.linebreakRegex_),K=$&&x.match(t.blanklineEndRegex_),Q=z&&E.match(t.blanklineStartRegex_);return K||Q?5:$||z?4:T&&!N&&F?3:N||F?2:T||O?1:0}for(var o=1;o<r.length-1;){if(r[o-1][0]==s&&r[o+1][0]==s){var a=r[o-1][1],l=r[o][1],c=r[o+1][1],f=this.diff_commonSuffix(a,l);if(f){var h=l.substring(l.length-f);a=a.substring(0,a.length-f),l=h+l.substring(0,l.length-f),c=h+c}for(var d=a,p=l,m=c,w=i(a,l)+i(l,c);l.charAt(0)===c.charAt(0);){a+=l.charAt(0),l=l.substring(1)+c.charAt(0),c=c.substring(1);var A=i(a,l)+i(l,c);A>=w&&(w=A,d=a,p=l,m=c)}r[o-1][1]!=d&&(d?r[o-1][1]=d:(r.splice(o-1,1),o--),r[o][1]=p,m?r[o+1][1]=m:(r.splice(o+1,1),o--))}o++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(r){for(var i=!1,o=[],a=0,l=null,c=0,f=!1,h=!1,d=!1,p=!1;c<r.length;)r[c][0]==s?(r[c][1].length<this.Diff_EditCost&&(d||p)?(o[a++]=c,f=d,h=p,l=r[c][1]):(a=0,l=null),d=p=!1):(r[c][0]==n?p=!0:d=!0,l&&(f&&h&&d&&p||l.length<this.Diff_EditCost/2&&f+h+d+p==3)&&(r.splice(o[a-1],0,new t.Diff(n,l)),r[o[a-1]+1][0]=u,a--,l=null,f&&h?(d=p=!0,a=0):(a--,c=a>0?o[a-1]:-1,d=p=!1),i=!0)),c++;i&&this.diff_cleanupMerge(r)},t.prototype.diff_cleanupMerge=function(r){r.push(new t.Diff(s,""));for(var i=0,o=0,a=0,l="",c="",f;i<r.length;)switch(r[i][0]){case u:a++,c+=r[i][1],i++;break;case n:o++,l+=r[i][1],i++;break;case s:o+a>1?(o!==0&&a!==0&&(f=this.diff_commonPrefix(c,l),f!==0&&(i-o-a>0&&r[i-o-a-1][0]==s?r[i-o-a-1][1]+=c.substring(0,f):(r.splice(0,0,new t.Diff(s,c.substring(0,f))),i++),c=c.substring(f),l=l.substring(f)),f=this.diff_commonSuffix(c,l),f!==0&&(r[i][1]=c.substring(c.length-f)+r[i][1],c=c.substring(0,c.length-f),l=l.substring(0,l.length-f))),i-=o+a,r.splice(i,o+a),l.length&&(r.splice(i,0,new t.Diff(n,l)),i++),c.length&&(r.splice(i,0,new t.Diff(u,c)),i++),i++):i!==0&&r[i-1][0]==s?(r[i-1][1]+=r[i][1],r.splice(i,1)):i++,a=0,o=0,l="",c="";break}r[r.length-1][1]===""&&r.pop();var h=!1;for(i=1;i<r.length-1;)r[i-1][0]==s&&r[i+1][0]==s&&(r[i][1].substring(r[i][1].length-r[i-1][1].length)==r[i-1][1]?(r[i][1]=r[i-1][1]+r[i][1].substring(0,r[i][1].length-r[i-1][1].length),r[i+1][1]=r[i-1][1]+r[i+1][1],r.splice(i-1,1),h=!0):r[i][1].substring(0,r[i+1][1].length)==r[i+1][1]&&(r[i-1][1]+=r[i+1][1],r[i][1]=r[i][1].substring(r[i+1][1].length)+r[i+1][1],r.splice(i+1,1),h=!0)),i++;h&&this.diff_cleanupMerge(r)},t.prototype.diff_xIndex=function(r,i){var o=0,a=0,l=0,c=0,f;for(f=0;f<r.length&&(r[f][0]!==u&&(o+=r[f][1].length),r[f][0]!==n&&(a+=r[f][1].length),!(o>i));f++)l=o,c=a;return r.length!=f&&r[f][0]===n?c:c+(i-l)},t.prototype.diff_prettyHtml=function(r){for(var i=[],o=/&/g,a=/</g,l=/>/g,c=/\n/g,f=0;f<r.length;f++){var h=r[f][0],d=r[f][1],p=d.replace(o,"&amp;").replace(a,"&lt;").replace(l,"&gt;").replace(c,"&para;<br>");switch(h){case u:i[f]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case n:i[f]='<del style="background:#ffe6e6;">'+p+"</del>";break;case s:i[f]="<span>"+p+"</span>";break}}return i.join("")},t.prototype.diff_text1=function(r){for(var i=[],o=0;o<r.length;o++)r[o][0]!==u&&(i[o]=r[o][1]);return i.join("")},t.prototype.diff_text2=function(r){for(var i=[],o=0;o<r.length;o++)r[o][0]!==n&&(i[o]=r[o][1]);return i.join("")},t.prototype.diff_levenshtein=function(r){for(var i=0,o=0,a=0,l=0;l<r.length;l++){var c=r[l][0],f=r[l][1];switch(c){case u:o+=f.length;break;case n:a+=f.length;break;case s:i+=Math.max(o,a),o=0,a=0;break}}return i+=Math.max(o,a),i},t.prototype.diff_toDelta=function(r){for(var i=[],o=0;o<r.length;o++)switch(r[o][0]){case u:i[o]="+"+encodeURI(r[o][1]);break;case n:i[o]="-"+r[o][1].length;break;case s:i[o]="="+r[o][1].length;break}return i.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(r,i){for(var o=[],a=0,l=0,c=i.split(/\t/g),f=0;f<c.length;f++){var h=c[f].substring(1);switch(c[f].charAt(0)){case"+":try{o[a++]=new t.Diff(u,decodeURI(h))}catch{throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var d=parseInt(h,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+h);var p=r.substring(l,l+=d);c[f].charAt(0)=="="?o[a++]=new t.Diff(s,p):o[a++]=new t.Diff(n,p);break;default:if(c[f])throw new Error("Invalid diff operation in diff_fromDelta: "+c[f])}}if(l!=r.length)throw new Error("Delta length ("+l+") does not equal source text length ("+r.length+").");return o},t.prototype.match_main=function(r,i,o){if(r==null||i==null||o==null)throw new Error("Null input. (match_main)");return o=Math.max(0,Math.min(o,r.length)),r==i?0:r.length?r.substring(o,o+i.length)==i?o:this.match_bitap_(r,i,o):-1},t.prototype.match_bitap_=function(r,i,o){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var a=this.match_alphabet_(i),l=this;function c(F,$){var z=F/i.length,K=Math.abs(o-$);return l.Match_Distance?z+K/l.Match_Distance:K?1:z}var f=this.Match_Threshold,h=r.indexOf(i,o);h!=-1&&(f=Math.min(c(0,h),f),h=r.lastIndexOf(i,o+i.length),h!=-1&&(f=Math.min(c(0,h),f)));var d=1<<i.length-1;h=-1;for(var p,m,w=i.length+r.length,A,x=0;x<i.length;x++){for(p=0,m=w;p<m;)c(x,o+m)<=f?p=m:w=m,m=Math.floor((w-p)/2+p);w=m;var E=Math.max(1,o-m+1),y=Math.min(o+m,r.length)+i.length,k=Array(y+2);k[y+1]=(1<<x)-1;for(var T=y;T>=E;T--){var O=a[r.charAt(T-1)];if(x===0?k[T]=(k[T+1]<<1|1)&O:k[T]=(k[T+1]<<1|1)&O|((A[T+1]|A[T])<<1|1)|A[T+1],k[T]&d){var N=c(x,T-1);if(N<=f)if(f=N,h=T-1,h>o)E=Math.max(1,2*o-h);else break}}if(c(x+1,o)>f)break;A=k}return h},t.prototype.match_alphabet_=function(r){for(var i={},o=0;o<r.length;o++)i[r.charAt(o)]=0;for(var o=0;o<r.length;o++)i[r.charAt(o)]|=1<<r.length-o-1;return i},t.prototype.patch_addContext_=function(r,i){if(i.length!=0){if(r.start2===null)throw Error("patch not initialized");for(var o=i.substring(r.start2,r.start2+r.length1),a=0;i.indexOf(o)!=i.lastIndexOf(o)&&o.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)a+=this.Patch_Margin,o=i.substring(r.start2-a,r.start2+r.length1+a);a+=this.Patch_Margin;var l=i.substring(r.start2-a,r.start2);l&&r.diffs.unshift(new t.Diff(s,l));var c=i.substring(r.start2+r.length1,r.start2+r.length1+a);c&&r.diffs.push(new t.Diff(s,c)),r.start1-=l.length,r.start2-=l.length,r.length1+=l.length+c.length,r.length2+=l.length+c.length}},t.prototype.patch_make=function(r,i,o){var a,l;if(typeof r=="string"&&typeof i=="string"&&typeof o>"u")a=r,l=this.diff_main(a,i,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(r&&typeof r=="object"&&typeof i>"u"&&typeof o>"u")l=r,a=this.diff_text1(l);else if(typeof r=="string"&&i&&typeof i=="object"&&typeof o>"u")a=r,l=i;else if(typeof r=="string"&&typeof i=="string"&&o&&typeof o=="object")a=r,l=o;else throw new Error("Unknown call format to patch_make.");if(l.length===0)return[];for(var c=[],f=new t.patch_obj,h=0,d=0,p=0,m=a,w=a,A=0;A<l.length;A++){var x=l[A][0],E=l[A][1];switch(!h&&x!==s&&(f.start1=d,f.start2=p),x){case u:f.diffs[h++]=l[A],f.length2+=E.length,w=w.substring(0,p)+E+w.substring(p);break;case n:f.length1+=E.length,f.diffs[h++]=l[A],w=w.substring(0,p)+w.substring(p+E.length);break;case s:E.length<=2*this.Patch_Margin&&h&&l.length!=A+1?(f.diffs[h++]=l[A],f.length1+=E.length,f.length2+=E.length):E.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(f,m),c.push(f),f=new t.patch_obj,h=0,m=w,d=p);break}x!==u&&(d+=E.length),x!==n&&(p+=E.length)}return h&&(this.patch_addContext_(f,m),c.push(f)),c},t.prototype.patch_deepCopy=function(r){for(var i=[],o=0;o<r.length;o++){var a=r[o],l=new t.patch_obj;l.diffs=[];for(var c=0;c<a.diffs.length;c++)l.diffs[c]=new t.Diff(a.diffs[c][0],a.diffs[c][1]);l.start1=a.start1,l.start2=a.start2,l.length1=a.length1,l.length2=a.length2,i[o]=l}return i},t.prototype.patch_apply=function(r,i){if(r.length==0)return[i,[]];r=this.patch_deepCopy(r);var o=this.patch_addPadding(r);i=o+i+o,this.patch_splitMax(r);for(var a=0,l=[],c=0;c<r.length;c++){var f=r[c].start2+a,h=this.diff_text1(r[c].diffs),d,p=-1;if(h.length>this.Match_MaxBits?(d=this.match_main(i,h.substring(0,this.Match_MaxBits),f),d!=-1&&(p=this.match_main(i,h.substring(h.length-this.Match_MaxBits),f+h.length-this.Match_MaxBits),(p==-1||d>=p)&&(d=-1))):d=this.match_main(i,h,f),d==-1)l[c]=!1,a-=r[c].length2-r[c].length1;else{l[c]=!0,a=d-f;var m;if(p==-1?m=i.substring(d,d+h.length):m=i.substring(d,p+this.Match_MaxBits),h==m)i=i.substring(0,d)+this.diff_text2(r[c].diffs)+i.substring(d+h.length);else{var w=this.diff_main(h,m,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(w)/h.length>this.Patch_DeleteThreshold)l[c]=!1;else{this.diff_cleanupSemanticLossless(w);for(var A=0,x,E=0;E<r[c].diffs.length;E++){var y=r[c].diffs[E];y[0]!==s&&(x=this.diff_xIndex(w,A)),y[0]===u?i=i.substring(0,d+x)+y[1]+i.substring(d+x):y[0]===n&&(i=i.substring(0,d+x)+i.substring(d+this.diff_xIndex(w,A+y[1].length))),y[0]!==n&&(A+=y[1].length)}}}}}return i=i.substring(o.length,i.length-o.length),[i,l]},t.prototype.patch_addPadding=function(r){for(var i=this.Patch_Margin,o="",a=1;a<=i;a++)o+=String.fromCharCode(a);for(var a=0;a<r.length;a++)r[a].start1+=i,r[a].start2+=i;var l=r[0],c=l.diffs;if(c.length==0||c[0][0]!=s)c.unshift(new t.Diff(s,o)),l.start1-=i,l.start2-=i,l.length1+=i,l.length2+=i;else if(i>c[0][1].length){var f=i-c[0][1].length;c[0][1]=o.substring(c[0][1].length)+c[0][1],l.start1-=f,l.start2-=f,l.length1+=f,l.length2+=f}if(l=r[r.length-1],c=l.diffs,c.length==0||c[c.length-1][0]!=s)c.push(new t.Diff(s,o)),l.length1+=i,l.length2+=i;else if(i>c[c.length-1][1].length){var f=i-c[c.length-1][1].length;c[c.length-1][1]+=o.substring(0,f),l.length1+=f,l.length2+=f}return o},t.prototype.patch_splitMax=function(r){for(var i=this.Match_MaxBits,o=0;o<r.length;o++)if(!(r[o].length1<=i)){var a=r[o];r.splice(o--,1);for(var l=a.start1,c=a.start2,f="";a.diffs.length!==0;){var h=new t.patch_obj,d=!0;for(h.start1=l-f.length,h.start2=c-f.length,f!==""&&(h.length1=h.length2=f.length,h.diffs.push(new t.Diff(s,f)));a.diffs.length!==0&&h.length1<i-this.Patch_Margin;){var p=a.diffs[0][0],m=a.diffs[0][1];p===u?(h.length2+=m.length,c+=m.length,h.diffs.push(a.diffs.shift()),d=!1):p===n&&h.diffs.length==1&&h.diffs[0][0]==s&&m.length>2*i?(h.length1+=m.length,l+=m.length,d=!1,h.diffs.push(new t.Diff(p,m)),a.diffs.shift()):(m=m.substring(0,i-h.length1-this.Patch_Margin),h.length1+=m.length,l+=m.length,p===s?(h.length2+=m.length,c+=m.length):d=!1,h.diffs.push(new t.Diff(p,m)),m==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(m.length))}f=this.diff_text2(h.diffs),f=f.substring(f.length-this.Patch_Margin);var w=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);w!==""&&(h.length1+=w.length,h.length2+=w.length,h.diffs.length!==0&&h.diffs[h.diffs.length-1][0]===s?h.diffs[h.diffs.length-1][1]+=w:h.diffs.push(new t.Diff(s,w))),d||r.splice(++o,0,h)}}},t.prototype.patch_toText=function(r){for(var i=[],o=0;o<r.length;o++)i[o]=r[o];return i.join("")},t.prototype.patch_fromText=function(r){var i=[];if(!r)return i;for(var o=r.split(`
`),a=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<o.length;){var c=o[a].match(l);if(!c)throw new Error("Invalid patch string: "+o[a]);var f=new t.patch_obj;for(i.push(f),f.start1=parseInt(c[1],10),c[2]===""?(f.start1--,f.length1=1):c[2]=="0"?f.length1=0:(f.start1--,f.length1=parseInt(c[2],10)),f.start2=parseInt(c[3],10),c[4]===""?(f.start2--,f.length2=1):c[4]=="0"?f.length2=0:(f.start2--,f.length2=parseInt(c[4],10)),a++;a<o.length;){var h=o[a].charAt(0);try{var d=decodeURI(o[a].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+d)}if(h=="-")f.diffs.push(new t.Diff(n,d));else if(h=="+")f.diffs.push(new t.Diff(u,d));else if(h==" ")f.diffs.push(new t.Diff(s,d));else{if(h=="@")break;if(h!=="")throw new Error('Invalid patch mode "'+h+'" in: '+d)}a++}}return i},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var r,i;this.length1===0?r=this.start1+",0":this.length1==1?r=this.start1+1:r=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var o=["@@ -"+r+" +"+i+` @@
`],a,l=0;l<this.diffs.length;l++){switch(this.diffs[l][0]){case u:a="+";break;case n:a="-";break;case s:a=" ";break}o[l+1]=a+encodeURI(this.diffs[l][1])+`
`}return o.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=u,e.exports.DIFF_EQUAL=s})(gi)),gi.exports}var h2=d2();const p2=f2(h2),m2={class:"text-xs text-purple-400 font-bold uppercase tracking-wider flex items-center gap-1"},g2={class:"flex items-center gap-1"},b2=["title"],_2={key:0,class:"text-xs"},x2={class:"font-bold text-green-500 flex items-center gap-1"},y2={class:"font-mono text-gray-400 whitespace-pre-wrap break-all bg-gray-900/50 p-1 rounded"},w2={key:0,class:"whitespace-pre-wrap"},v2={key:1,class:"space-y-2 w-full"},A2={class:"font-bold text-purple-300 mb-1 flex items-center gap-1"},E2={class:"font-mono text-gray-400 whitespace-pre-wrap break-all bg-gray-900/50 p-1 rounded"},C2={class:"text-[10px] text-gray-500 mt-1"},k2={key:0,class:"self-start text-gray-500 text-xs animate-pulse"},S2={class:"p-3 border-t border-gray-700 bg-gray-800"},D2={key:0,class:"mb-2 px-2 py-1 bg-gray-700/50 rounded border-l-2 border-purple-500 flex items-center justify-between group"},T2={class:"flex items-center gap-2 overflow-hidden"},F2={class:"text-xs text-gray-300 truncate"},R2={class:"relative chat-input"},I2=["placeholder","onKeydown"],M2=["disabled"],O2=1e5,P2=.5,L2=au({__name:"AIChatWindow",props:yn({currentLang:{},settings:{}},{show:{type:Boolean},showModifiers:{},selectedText:{},selectedTextModifiers:{},markdownContent:{},markdownContentModifiers:{},diffHighlights:{},diffHighlightsModifiers:{}}),emits:yn(["openSettings"],["update:show","update:selectedText","update:markdownContent","update:diffHighlights"]),setup(e,{emit:t}){const n=_n(e,"show"),u=_n(e,"selectedText"),s=_n(e,"markdownContent"),r=_n(e,"diffHighlights"),i=t,o=qt(()=>ur[e.currentLang]),a=Se([{role:"assistant",content:o.value.initialGreeting}]),l=Se(""),c=Se(!1),f=Se({x:window.innerWidth-380,y:80}),h=Se(!1),d=Se({x:0,y:0}),p=Se(null),m=qt(()=>u.value?u.value.length>50?u.value.substring(0,50)+"...":u.value:""),w=()=>{a.value=[]},A=(N,F)=>{const $=new p2;$.Match_Distance=O2,$.Match_Threshold=P2;let z=N??"";const K=[],Q=F.split(`
`),me=[];let ce=0;for(;ce<Q.length;){if(Q[ce].includes("<<<<<<< SEARCH")){const ge=ce;let oe=-1,se=-1;for(let be=ge+1;be<Q.length;be++)if(Q[be].includes("=======")){oe=be;break}if(oe!==-1){for(let be=oe+1;be<Q.length;be++)if(Q[be].includes(">>>>>>> REPLACE")){se=be;break}}if(oe!==-1&&se!==-1){const be=Q.slice(ge+1,oe).join(`
`),ut=Q.slice(oe+1,se).join(`
`);me.push({search:be,replace:ut}),ce=se+1;continue}}ce++}for(const ge of me){const oe=$.patch_make(ge.search,ge.replace),[se,be]=$.patch_apply(oe,z);if(be.some(ut=>ut)){const ut=$.diff_main(z,se);$.diff_cleanupSemantic(ut);let fe=0;for(const[Ve,ye]of ut)Ve===0?fe+=ye.length:Ve===1&&(K.push({start:fe,end:fe+ye.length}),fe+=ye.length);z=se}else console.warn("Failed to apply block:",ge.search)}return{content:z,ranges:K}},x=N=>{if(N.type==="function")try{const F=JSON.parse(N.function.arguments);if(N.function.name==="edit"&&F.diff){const $=/=======\s*([\s\S]*?)\s*>>>>>>> REPLACE/.exec(F.diff),z=$?$[1].trim():F.diff;return z.length>150?z.substring(0,150)+"...":z}return JSON.stringify(F)}catch{return N.function.arguments}},E=async()=>{if(!l.value.trim()||c.value)return;if(r.value=[],!e.settings.apiKey){alert(o.value.noKeyWarning),i("openSettings");return}let N=`You are a helpful Markdown editor assistant. You help the user write, edit, and improve their markdown content. The markdown has the following content,
`;N+=`

Full Content:
<BEGIN_FILES>
${s.value}
<END_FILES>`,u.value&&(N+=`

Response based on user selected part:
\`\`\`
${u.value}
\`\`\``),a.value.push({role:"user",content:l.value}),l.value="",await O(),c.value=!0;try{const F=new re({baseURL:e.settings.apiUrl,apiKey:e.settings.apiKey,dangerouslyAllowBrowser:!0}),$=[{type:"function",function:{name:"edit",description:`Edit the markdown content. Use the following format for the \`diff\` argument:
<<<<<<< SEARCH
[exact content to find]
=======
[new content]
>>>>>>> REPLACE`,parameters:{type:"object",properties:{diff:{type:"string",description:"The search/replace block."}},required:["diff"]}}}],K=(await F.chat.completions.create({messages:[{role:"system",content:N},...a.value.map(Q=>({role:Q.role,content:Q.content,tool_calls:Q.tool_calls,tool_call_id:Q.tool_call_id,name:Q.name}))],model:e.settings.model,tools:$,tool_choice:"auto"})).choices[0]?.message;if(K.tool_calls){a.value.push({role:"assistant",content:K.content,tool_calls:K.tool_calls}),await O();for(const ce of K.tool_calls)if(ce.type==="function"&&ce.function.name==="edit"){const ge=JSON.parse(ce.function.arguments),{content:oe,ranges:se}=A(s.value,ge.diff);let be="";oe!==s.value?(s.value=oe,r.value=se,be=o.value.successEdit):be=o.value.failEdit,a.value.push({role:"tool",tool_call_id:ce.id,name:ce.function.name,content:be}),await O()}const me=(await F.chat.completions.create({messages:[{role:"system",content:"You are a helpful Markdown editor assistant."},...a.value.map(ce=>({role:ce.role,content:ce.content,tool_calls:ce.tool_calls,tool_call_id:ce.tool_call_id,name:ce.name}))],model:e.settings.model,tools:$})).choices[0]?.message?.content;me&&(a.value.push({role:"assistant",content:me}),await O())}else{const Q=K.content??o.value.noResponse;a.value.push({role:"assistant",content:Q}),await O()}}catch(F){console.error(F);const $=F instanceof Error?F.message:String(F);a.value.push({role:"assistant",content:`${o.value.errorPrefix}${$}`}),await O()}finally{c.value=!1}},y=N=>{h.value=!0,d.value={x:N.clientX-f.value.x,y:N.clientY-f.value.y},window.addEventListener("mousemove",k),window.addEventListener("mouseup",T)},k=N=>{h.value&&(f.value={x:N.clientX-d.value.x,y:N.clientY-d.value.y})},T=()=>{h.value=!1,window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",T)},O=async()=>{p.value&&(await ac(),p.value.scrollTop=p.value.scrollHeight)};return lo(()=>{window.innerWidth<1e3&&(f.value={x:20,y:80})}),co(()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",T)}),(N,F)=>n.value?(Me(),Le("div",{key:0,class:"fixed flex flex-col bg-gray-850 border border-gray-700 rounded-xl shadow-2xl z-50 overflow-hidden",style:ds({left:f.value.x+"px",top:f.value.y+"px",width:"360px",height:"600px"})},[H("div",{class:"h-10 bg-gray-800 border-b border-gray-700 flex items-center justify-between px-3 cursor-move select-none",onMousedown:y},[H("span",m2,[F[3]||(F[3]=H("span",{class:"material-icons text-sm"},"auto_awesome",-1)),Hu(" "+Ce(o.value.chat),1)]),H("div",g2,[H("button",{class:"text-gray-500 hover:text-gray-300 p-1",title:o.value.clear,onClick:w},[...F[4]||(F[4]=[H("span",{class:"material-icons text-sm"},"delete_sweep",-1)])],8,b2),H("button",{class:"text-gray-500 hover:text-gray-300 p-1",onClick:F[0]||(F[0]=$=>n.value=!1)},[...F[5]||(F[5]=[H("span",{class:"material-icons text-sm"},"close",-1)])])])],32),H("div",{ref_key:"chatMessagesRef",ref:p,class:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-900/95"},[(Me(!0),Le(gt,null,vi(a.value,($,z)=>(Me(),Le("div",{key:z,class:St(["flex flex-col max-w-[90%]",$.role==="user"?"self-end items-end":"self-start items-start"])},[H("div",{class:St(["px-3 py-2 rounded-lg text-sm shadow-sm",$.role==="user"?"bg-purple-600 text-white rounded-br-none":"bg-gray-700 text-gray-200 rounded-bl-none"])},[$.role==="tool"?(Me(),Le("div",_2,[H("div",x2,[F[6]||(F[6]=H("span",{class:"material-icons text-[10px]"},"swap_horiz",-1)),Hu(" "+Ce(o.value.result),1)]),H("div",y2,Ce($.content),1)])):(Me(),Le(gt,{key:1},[$.content?(Me(),Le("div",w2,Ce($.content),1)):Vn("",!0),$.tool_calls?(Me(),Le("div",v2,[(Me(!0),Le(gt,null,vi($.tool_calls,(K,Q)=>(Me(),Le("div",{key:Q,class:"text-xs"},[H("div",A2,[F[7]||(F[7]=H("span",{class:"material-icons text-[10px]"},"terminal",-1)),Hu(" "+Ce(K.function.name),1)]),H("div",E2,Ce(x(K)),1)]))),128))])):Vn("",!0)],64))],2),H("span",C2,Ce($.role==="user"?o.value.you:o.value.ai),1)],2))),128)),c.value?(Me(),Le("div",k2,Ce(o.value.thinking),1)):Vn("",!0)],512),H("div",S2,[u.value?(Me(),Le("div",D2,[H("div",T2,[F[8]||(F[8]=H("span",{class:"material-icons text-xs text-purple-400"},"format_quote",-1)),H("span",F2,Ce(m.value),1)]),H("button",{class:"text-gray-500 hover:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",onClick:F[1]||(F[1]=$=>u.value="")},[...F[9]||(F[9]=[H("span",{class:"material-icons text-xs"},"close",-1)])])])):Vn("",!0),H("div",R2,[tu(H("textarea",{"onUpdate:modelValue":F[2]||(F[2]=$=>l.value=$),placeholder:o.value.placeholder,class:"w-full bg-gray-900 border border-gray-700 rounded-lg p-2 text-sm text-white focus:border-purple-500 outline-none resize-none h-20",onKeydown:Ap(wp(E,["ctrl"]),["enter"])},null,40,I2),[[Rr,l.value]]),H("button",{disabled:c.value||!l.value.trim(),class:"absolute bottom-2 right-2 p-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",onClick:E},[...F[10]||(F[10]=[H("span",{class:"material-icons text-sm"},"send",-1)])],8,M2)])])],4)):Vn("",!0)}}),N2={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-60 backdrop-blur-sm"},$2={class:"bg-gray-800 border border-gray-700 rounded-xl w-96 shadow-2xl p-6"},B2={class:"text-xl font-bold mb-4 flex items-center gap-2"},U2={class:"space-y-4"},H2={class:"block text-xs text-gray-400 mb-1"},z2={class:"block text-xs text-gray-400 mb-1"},j2={class:"block text-xs text-gray-400 mb-1"},q2={class:"mt-6 space-y-3 text-xs text-gray-400 bg-gray-900/50 p-3 rounded border border-gray-700/50"},W2={class:"flex gap-2 items-start"},V2={class:"leading-relaxed"},K2={class:"flex gap-2 items-start"},G2={class:"leading-relaxed"},J2={class:"flex justify-end gap-2 mt-6"},X2=au({__name:"SettingsModal",props:yn({settings:{},currentLang:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:yn(["save"],["update:modelValue"]),setup(e,{emit:t}){const n=_n(e,"modelValue"),u=t,s=qt(()=>ur[e.currentLang]),r=Se({...e.settings});Bu(()=>e.settings,o=>{r.value={...o}},{deep:!0});const i=()=>{u("save",r.value)};return(o,a)=>n.value?(Me(),Le("div",N2,[H("div",$2,[H("h2",B2,[a[4]||(a[4]=H("span",{class:"material-icons text-gray-400"},"settings",-1)),Hu(" "+Ce(s.value.settingsTitle),1)]),H("div",U2,[H("div",null,[H("label",H2,Ce(s.value.apiUrl),1),tu(H("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>r.value.apiUrl=l),type:"text",class:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm text-white focus:border-purple-500 outline-none"},null,512),[[Rr,r.value.apiUrl]])]),H("div",null,[H("label",z2,Ce(s.value.apiKey),1),tu(H("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>r.value.apiKey=l),type:"password",class:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm text-white focus:border-purple-500 outline-none",placeholder:"sk-..."},null,512),[[Rr,r.value.apiKey]])]),H("div",null,[H("label",j2,Ce(s.value.model),1),tu(H("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>r.value.model=l),type:"text",class:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm text-white focus:border-purple-500 outline-none"},null,512),[[Rr,r.value.model]])])]),H("div",q2,[H("p",W2,[a[5]||(a[5]=H("span",{class:"material-icons text-sm text-blue-400 mt-0.5"},"info",-1)),H("span",V2,Ce(s.value.localDataInfo),1)]),H("p",K2,[a[6]||(a[6]=H("span",{class:"material-icons text-sm text-yellow-500 mt-0.5"},"warning",-1)),H("span",G2,Ce(s.value.securityWarning),1)])]),H("div",J2,[H("button",{class:"px-4 py-2 rounded text-sm text-gray-300 hover:bg-gray-700 transition-colors",onClick:a[3]||(a[3]=l=>n.value=!1)},Ce(s.value.cancel),1),H("button",{class:"px-4 py-2 rounded text-sm bg-purple-600 text-white hover:bg-purple-500 transition-colors",onClick:i},Ce(s.value.save),1)])])])):Vn("",!0)}}),Z2={class:"h-screen w-screen bg-gray-900 text-gray-100 flex flex-col overflow-hidden font-sans"},Y2={class:"flex-1 flex overflow-hidden relative"},Q2=au({__name:"App",setup(e){const t={apiUrl:"https://api.openai.com/v1",apiKey:"",model:"gpt-4.1-nano-2025-04-14"},n=Se(`# Welcome to VibeMarkdown

Select this paragraph and ask the AI to rewrite it to be more exciting.

## Features
- **Split View**: Edit and preview side-by-side.
- **AI Collaboration**: Chat with AI to brainstorm.
- **Live Editing**: Ask the AI to "Fix the spelling" or "Add a conclusion".
- **Contextual Context**: Highlight text to ask specific questions about it.

## Try it out
1. Highlight the code block below.
2. Ask "What does this code do?"

\`\`\`javascript
function helloWorld() {
  console.log("Hello Vibe!");
}
\`\`\`
`),u=Se({...t}),s=Se(!1),r=Se("en"),i=Se("split"),o=Se(!0),a=Se(""),l=Se([]),c=()=>{r.value=r.value==="en"?"zh":"en"},f=()=>{const p=localStorage.getItem("vibe-settings");if(p)try{const m=JSON.parse(p);u.value={...t,...m}}catch(m){console.error("Failed to load settings",m)}},h=p=>{u.value=p,localStorage.setItem("vibe-settings",JSON.stringify(u.value)),s.value=!1},d=p=>{a.value=p};return Bu(n,()=>{l.value=[]},{flush:"sync"}),lo(()=>{f()}),(p,m)=>(Me(),Le("div",Z2,[lt(Hp,{"view-mode":i.value,"onUpdate:viewMode":m[0]||(m[0]=w=>i.value=w),"show-chat":o.value,"onUpdate:showChat":m[1]||(m[1]=w=>o.value=w),"current-lang":r.value,onToggleLanguage:c,onOpenSettings:m[2]||(m[2]=w=>s.value=!0)},null,8,["view-mode","show-chat","current-lang"]),H("div",Y2,[tu(H("div",{class:St(i.value==="split"?"w-1/2":"w-full")},[lt(m1,{modelValue:n.value,"onUpdate:modelValue":m[3]||(m[3]=w=>n.value=w),"current-lang":r.value,"diff-highlights":l.value,onSelectionChange:d},null,8,["modelValue","current-lang","diff-highlights"])],2),[[va,i.value!=="preview"]]),tu(H("div",{class:St(i.value==="split"?"w-1/2":"w-full")},[lt(rb,{content:n.value,"current-lang":r.value},null,8,["content","current-lang"])],2),[[va,i.value!=="editor"]]),lt(L2,{show:o.value,"onUpdate:show":m[4]||(m[4]=w=>o.value=w),"selected-text":a.value,"onUpdate:selectedText":m[5]||(m[5]=w=>a.value=w),"markdown-content":n.value,"onUpdate:markdownContent":m[6]||(m[6]=w=>n.value=w),"diff-highlights":l.value,"onUpdate:diffHighlights":m[7]||(m[7]=w=>l.value=w),"current-lang":r.value,settings:u.value,onOpenSettings:m[8]||(m[8]=w=>s.value=!0)},null,8,["show","selected-text","markdown-content","diff-highlights","current-lang","settings"])]),lt(X2,{modelValue:s.value,"onUpdate:modelValue":m[9]||(m[9]=w=>s.value=w),settings:u.value,"current-lang":r.value,onSave:h},null,8,["modelValue","settings","current-lang"])]))}});kp(Q2).mount("#app");
